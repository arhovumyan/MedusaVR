import{u as A,E as ke,j as t,c as re,P as k,d as B,e as T,f as _,h as ze,G as De,H as Ie,J as We,b as Oe,r as He,s as Fe,v as Me,w as oe,t as Be,x as se,z as ne,y as ae}from"./ui-vendor-wCvZxCWV.js";import{r as a}from"./react-vendor-CgzYKCvO.js";import{u as Ue}from"./routing-DoJeAdmJ.js";import{c as y,p as Xe,h as Ye,B as E,r as J,a as Z,S as Ve,l as $e,I as qe,L as Ge,b as Qe}from"./index-gA7j0pLP.js";import{c as Ke,u as Je}from"./index-Bk2AHYaC.js";import{a as Ze}from"./tag-CffDNoUx.js";import{ak as $,X as H,y as et,k as tt,i as rt,al as ee}from"./icons-BCb4Ufys.js";import{a as ot}from"./utils--BulIq_u.js";import{b as st}from"./query-vendor-BCFDQDjj.js";import{C as nt}from"./cards-CqOAE4u9.js";function at(e,o){return a.useReducer((r,s)=>o[r][s]??r,e)}var q="ScrollArea",[le,Yt]=re(q),[lt,C]=le(q),ce=a.forwardRef((e,o)=>{const{__scopeScrollArea:r,type:s="hover",dir:n,scrollHideDelay:l=600,...c}=e,[i,d]=a.useState(null),[m,f]=a.useState(null),[u,h]=a.useState(null),[p,b]=a.useState(null),[S,N]=a.useState(null),[v,g]=a.useState(0),[w,L]=a.useState(0),[z,R]=a.useState(!1),[W,O]=a.useState(!1),x=A(o,D=>d(D)),j=ke(n);return t.jsx(lt,{scope:r,type:s,dir:j,scrollHideDelay:l,scrollArea:i,viewport:m,onViewportChange:f,content:u,onContentChange:h,scrollbarX:p,onScrollbarXChange:b,scrollbarXEnabled:z,onScrollbarXEnabledChange:R,scrollbarY:S,onScrollbarYChange:N,scrollbarYEnabled:W,onScrollbarYEnabledChange:O,onCornerWidthChange:g,onCornerHeightChange:L,children:t.jsx(k.div,{dir:j,...c,ref:x,style:{position:"relative","--radix-scroll-area-corner-width":v+"px","--radix-scroll-area-corner-height":w+"px",...e.style}})})});ce.displayName=q;var ie="ScrollAreaViewport",de=a.forwardRef((e,o)=>{const{__scopeScrollArea:r,children:s,nonce:n,...l}=e,c=C(ie,r),i=a.useRef(null),d=A(o,i,c.onViewportChange);return t.jsxs(t.Fragment,{children:[t.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),t.jsx(k.div,{"data-radix-scroll-area-viewport":"",...l,ref:d,style:{overflowX:c.scrollbarXEnabled?"scroll":"hidden",overflowY:c.scrollbarYEnabled?"scroll":"hidden",...e.style},children:t.jsx("div",{ref:c.onContentChange,style:{minWidth:"100%",display:"table"},children:s})})]})});de.displayName=ie;var P="ScrollAreaScrollbar",G=a.forwardRef((e,o)=>{const{forceMount:r,...s}=e,n=C(P,e.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:c}=n,i=e.orientation==="horizontal";return a.useEffect(()=>(i?l(!0):c(!0),()=>{i?l(!1):c(!1)}),[i,l,c]),n.type==="hover"?t.jsx(ct,{...s,ref:o,forceMount:r}):n.type==="scroll"?t.jsx(it,{...s,ref:o,forceMount:r}):n.type==="auto"?t.jsx(he,{...s,ref:o,forceMount:r}):n.type==="always"?t.jsx(Q,{...s,ref:o}):null});G.displayName=P;var ct=a.forwardRef((e,o)=>{const{forceMount:r,...s}=e,n=C(P,e.__scopeScrollArea),[l,c]=a.useState(!1);return a.useEffect(()=>{const i=n.scrollArea;let d=0;if(i){const m=()=>{window.clearTimeout(d),c(!0)},f=()=>{d=window.setTimeout(()=>c(!1),n.scrollHideDelay)};return i.addEventListener("pointerenter",m),i.addEventListener("pointerleave",f),()=>{window.clearTimeout(d),i.removeEventListener("pointerenter",m),i.removeEventListener("pointerleave",f)}}},[n.scrollArea,n.scrollHideDelay]),t.jsx(B,{present:r||l,children:t.jsx(he,{"data-state":l?"visible":"hidden",...s,ref:o})})}),it=a.forwardRef((e,o)=>{const{forceMount:r,...s}=e,n=C(P,e.__scopeScrollArea),l=e.orientation==="horizontal",c=X(()=>d("SCROLL_END"),100),[i,d]=at("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return a.useEffect(()=>{if(i==="idle"){const m=window.setTimeout(()=>d("HIDE"),n.scrollHideDelay);return()=>window.clearTimeout(m)}},[i,n.scrollHideDelay,d]),a.useEffect(()=>{const m=n.viewport,f=l?"scrollLeft":"scrollTop";if(m){let u=m[f];const h=()=>{const p=m[f];u!==p&&(d("SCROLL"),c()),u=p};return m.addEventListener("scroll",h),()=>m.removeEventListener("scroll",h)}},[n.viewport,l,d,c]),t.jsx(B,{present:r||i!=="hidden",children:t.jsx(Q,{"data-state":i==="hidden"?"hidden":"visible",...s,ref:o,onPointerEnter:T(e.onPointerEnter,()=>d("POINTER_ENTER")),onPointerLeave:T(e.onPointerLeave,()=>d("POINTER_LEAVE"))})})}),he=a.forwardRef((e,o)=>{const r=C(P,e.__scopeScrollArea),{forceMount:s,...n}=e,[l,c]=a.useState(!1),i=e.orientation==="horizontal",d=X(()=>{if(r.viewport){const m=r.viewport.offsetWidth<r.viewport.scrollWidth,f=r.viewport.offsetHeight<r.viewport.scrollHeight;c(i?m:f)}},10);return I(r.viewport,d),I(r.content,d),t.jsx(B,{present:s||l,children:t.jsx(Q,{"data-state":l?"visible":"hidden",...n,ref:o})})}),Q=a.forwardRef((e,o)=>{const{orientation:r="vertical",...s}=e,n=C(P,e.__scopeScrollArea),l=a.useRef(null),c=a.useRef(0),[i,d]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=be(i.viewport,i.content),f={...s,sizes:i,onSizesChange:d,hasThumb:m>0&&m<1,onThumbChange:h=>l.current=h,onThumbPointerUp:()=>c.current=0,onThumbPointerDown:h=>c.current=h};function u(h,p){return pt(h,c.current,i,p)}return r==="horizontal"?t.jsx(dt,{...f,ref:o,onThumbPositionChange:()=>{if(n.viewport&&l.current){const h=n.viewport.scrollLeft,p=te(h,i,n.dir);l.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollLeft=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollLeft=u(h,n.dir))}}):r==="vertical"?t.jsx(ht,{...f,ref:o,onThumbPositionChange:()=>{if(n.viewport&&l.current){const h=n.viewport.scrollTop,p=te(h,i);l.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{n.viewport&&(n.viewport.scrollTop=h)},onDragScroll:h=>{n.viewport&&(n.viewport.scrollTop=u(h))}}):null}),dt=a.forwardRef((e,o)=>{const{sizes:r,onSizesChange:s,...n}=e,l=C(P,e.__scopeScrollArea),[c,i]=a.useState(),d=a.useRef(null),m=A(o,d,l.onScrollbarXChange);return a.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(fe,{"data-orientation":"horizontal",...n,ref:m,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":U(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,u)=>{if(l.viewport){const h=l.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),ge(h,u)&&f.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:d.current.clientWidth,paddingStart:M(c.paddingLeft),paddingEnd:M(c.paddingRight)}})}})}),ht=a.forwardRef((e,o)=>{const{sizes:r,onSizesChange:s,...n}=e,l=C(P,e.__scopeScrollArea),[c,i]=a.useState(),d=a.useRef(null),m=A(o,d,l.onScrollbarYChange);return a.useEffect(()=>{d.current&&i(getComputedStyle(d.current))},[d]),t.jsx(fe,{"data-orientation":"vertical",...n,ref:m,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":U(r)+"px",...e.style},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,u)=>{if(l.viewport){const h=l.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),ge(h,u)&&f.preventDefault()}},onResize:()=>{d.current&&l.viewport&&c&&s({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:d.current.clientHeight,paddingStart:M(c.paddingTop),paddingEnd:M(c.paddingBottom)}})}})}),[ut,ue]=le(P),fe=a.forwardRef((e,o)=>{const{__scopeScrollArea:r,sizes:s,hasThumb:n,onThumbChange:l,onThumbPointerUp:c,onThumbPointerDown:i,onThumbPositionChange:d,onDragScroll:m,onWheelScroll:f,onResize:u,...h}=e,p=C(P,r),[b,S]=a.useState(null),N=A(o,x=>S(x)),v=a.useRef(null),g=a.useRef(""),w=p.viewport,L=s.content-s.viewport,z=_(f),R=_(d),W=X(u,10);function O(x){if(v.current){const j=x.clientX-v.current.left,D=x.clientY-v.current.top;m({x:j,y:D})}}return a.useEffect(()=>{const x=j=>{const D=j.target;b?.contains(D)&&z(j,L)};return document.addEventListener("wheel",x,{passive:!1}),()=>document.removeEventListener("wheel",x,{passive:!1})},[w,b,L,z]),a.useEffect(R,[s,R]),I(b,W),I(p.content,W),t.jsx(ut,{scope:r,scrollbar:b,hasThumb:n,onThumbChange:_(l),onThumbPointerUp:_(c),onThumbPositionChange:R,onThumbPointerDown:_(i),children:t.jsx(k.div,{...h,ref:N,style:{position:"absolute",...h.style},onPointerDown:T(e.onPointerDown,x=>{x.button===0&&(x.target.setPointerCapture(x.pointerId),v.current=b.getBoundingClientRect(),g.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",p.viewport&&(p.viewport.style.scrollBehavior="auto"),O(x))}),onPointerMove:T(e.onPointerMove,O),onPointerUp:T(e.onPointerUp,x=>{const j=x.target;j.hasPointerCapture(x.pointerId)&&j.releasePointerCapture(x.pointerId),document.body.style.webkitUserSelect=g.current,p.viewport&&(p.viewport.style.scrollBehavior=""),v.current=null})})})}),F="ScrollAreaThumb",me=a.forwardRef((e,o)=>{const{forceMount:r,...s}=e,n=ue(F,e.__scopeScrollArea);return t.jsx(B,{present:r||n.hasThumb,children:t.jsx(ft,{ref:o,...s})})}),ft=a.forwardRef((e,o)=>{const{__scopeScrollArea:r,style:s,...n}=e,l=C(F,r),c=ue(F,r),{onThumbPositionChange:i}=c,d=A(o,u=>c.onThumbChange(u)),m=a.useRef(void 0),f=X(()=>{m.current&&(m.current(),m.current=void 0)},100);return a.useEffect(()=>{const u=l.viewport;if(u){const h=()=>{if(f(),!m.current){const p=bt(u,i);m.current=p,i()}};return i(),u.addEventListener("scroll",h),()=>u.removeEventListener("scroll",h)}},[l.viewport,f,i]),t.jsx(k.div,{"data-state":c.hasThumb?"visible":"hidden",...n,ref:d,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...s},onPointerDownCapture:T(e.onPointerDownCapture,u=>{const p=u.target.getBoundingClientRect(),b=u.clientX-p.left,S=u.clientY-p.top;c.onThumbPointerDown({x:b,y:S})}),onPointerUp:T(e.onPointerUp,c.onThumbPointerUp)})});me.displayName=F;var K="ScrollAreaCorner",pe=a.forwardRef((e,o)=>{const r=C(K,e.__scopeScrollArea),s=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&s?t.jsx(mt,{...e,ref:o}):null});pe.displayName=K;var mt=a.forwardRef((e,o)=>{const{__scopeScrollArea:r,...s}=e,n=C(K,r),[l,c]=a.useState(0),[i,d]=a.useState(0),m=!!(l&&i);return I(n.scrollbarX,()=>{const f=n.scrollbarX?.offsetHeight||0;n.onCornerHeightChange(f),d(f)}),I(n.scrollbarY,()=>{const f=n.scrollbarY?.offsetWidth||0;n.onCornerWidthChange(f),c(f)}),m?t.jsx(k.div,{...s,ref:o,style:{width:l,height:i,position:"absolute",right:n.dir==="ltr"?0:void 0,left:n.dir==="rtl"?0:void 0,bottom:0,...e.style}}):null});function M(e){return e?parseInt(e,10):0}function be(e,o){const r=e/o;return isNaN(r)?0:r}function U(e){const o=be(e.viewport,e.content),r=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,s=(e.scrollbar.size-r)*o;return Math.max(s,18)}function pt(e,o,r,s="ltr"){const n=U(r),l=n/2,c=o||l,i=n-c,d=r.scrollbar.paddingStart+c,m=r.scrollbar.size-r.scrollbar.paddingEnd-i,f=r.content-r.viewport,u=s==="ltr"?[0,f]:[f*-1,0];return xe([d,m],u)(e)}function te(e,o,r="ltr"){const s=U(o),n=o.scrollbar.paddingStart+o.scrollbar.paddingEnd,l=o.scrollbar.size-n,c=o.content-o.viewport,i=l-s,d=r==="ltr"?[0,c]:[c*-1,0],m=Ke(e,d);return xe([0,c],[0,i])(m)}function xe(e,o){return r=>{if(e[0]===e[1]||o[0]===o[1])return o[0];const s=(o[1]-o[0])/(e[1]-e[0]);return o[0]+s*(r-e[0])}}function ge(e,o){return e>0&&e<o}var bt=(e,o=()=>{})=>{let r={left:e.scrollLeft,top:e.scrollTop},s=0;return function n(){const l={left:e.scrollLeft,top:e.scrollTop},c=r.left!==l.left,i=r.top!==l.top;(c||i)&&o(),r=l,s=window.requestAnimationFrame(n)}(),()=>window.cancelAnimationFrame(s)};function X(e,o){const r=_(e),s=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(s.current),[]),a.useCallback(()=>{window.clearTimeout(s.current),s.current=window.setTimeout(r,o)},[r,o])}function I(e,o){const r=_(o);ze(()=>{let s=0;if(e){const n=new ResizeObserver(()=>{cancelAnimationFrame(s),s=window.requestAnimationFrame(r)});return n.observe(e),()=>{window.cancelAnimationFrame(s),n.unobserve(e)}}},[e,r])}var ve=ce,xt=de,gt=pe;const we=a.forwardRef(({className:e,children:o,...r},s)=>t.jsxs(ve,{ref:s,className:y("relative overflow-hidden",e),...r,children:[t.jsx(xt,{className:"h-full w-full rounded-[inherit]",children:o}),t.jsx(Se,{}),t.jsx(gt,{})]}));we.displayName=ve.displayName;const Se=a.forwardRef(({className:e,orientation:o="vertical",...r},s)=>t.jsx(G,{ref:s,orientation:o,className:y("flex touch-none select-none transition-colors",o==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",o==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",e),...r,children:t.jsx(me,{className:"relative flex-1 rounded-full bg-border"})}));Se.displayName=G.displayName;const vt=De,wt=Ie,St=We;var Y="Switch",[Ct,Vt]=re(Y),[jt,yt]=Ct(Y),Ce=a.forwardRef((e,o)=>{const{__scopeSwitch:r,name:s,checked:n,defaultChecked:l,required:c,disabled:i,value:d="on",onCheckedChange:m,form:f,...u}=e,[h,p]=a.useState(null),b=A(o,w=>p(w)),S=a.useRef(!1),N=h?f||!!h.closest("form"):!0,[v,g]=Oe({prop:n,defaultProp:l??!1,onChange:m,caller:Y});return t.jsxs(jt,{scope:r,checked:v,disabled:i,children:[t.jsx(k.button,{type:"button",role:"switch","aria-checked":v,"aria-required":c,"data-state":Pe(v),"data-disabled":i?"":void 0,disabled:i,value:d,...u,ref:b,onClick:T(e.onClick,w=>{g(L=>!L),N&&(S.current=w.isPropagationStopped(),S.current||w.stopPropagation())})}),N&&t.jsx(Ne,{control:h,bubbles:!S.current,name:s,value:d,checked:v,required:c,disabled:i,form:f,style:{transform:"translateX(-100%)"}})]})});Ce.displayName=Y;var je="SwitchThumb",ye=a.forwardRef((e,o)=>{const{__scopeSwitch:r,...s}=e,n=yt(je,r);return t.jsx(k.span,{"data-state":Pe(n.checked),"data-disabled":n.disabled?"":void 0,...s,ref:o})});ye.displayName=je;var Nt="SwitchBubbleInput",Ne=a.forwardRef(({__scopeSwitch:e,control:o,checked:r,bubbles:s=!0,...n},l)=>{const c=a.useRef(null),i=A(c,l),d=Je(r),m=Xe(o);return a.useEffect(()=>{const f=c.current;if(!f)return;const u=window.HTMLInputElement.prototype,p=Object.getOwnPropertyDescriptor(u,"checked").set;if(d!==r&&p){const b=new Event("click",{bubbles:s});p.call(f,r),f.dispatchEvent(b)}},[d,r,s]),t.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...n,tabIndex:-1,ref:i,style:{...n.style,...m,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});Ne.displayName=Nt;function Pe(e){return e?"checked":"unchecked"}var Re=Ce,Pt=ye;const Ee=a.forwardRef(({className:e,...o},r)=>t.jsx(Re,{className:y("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",e),...o,ref:r,children:t.jsx(Pt,{className:y("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));Ee.displayName=Re.displayName;function Rt({selectedTags:e,onTagsChange:o,includeNSFW:r=!1,onIncludeNSFWChange:s,className:n}){const[l,c]=a.useState(new Set(["personality"])),{tagCategories:i}=Ye(),d=u=>{const h=new Set(l);h.has(u)?h.delete(u):h.add(u),c(h)},m=u=>{const h=e.includes(u)?e.filter(p=>p!==u):[...e,u];o(h)},f=()=>{o([])};return t.jsxs("div",{className:y("space-y-4",n),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx($,{className:"h-4 w-4"}),t.jsx("h3",{className:"font-semibold",children:"Filters"})]}),e.length>0&&t.jsxs(E,{variant:"ghost",size:"sm",onClick:f,children:[t.jsx(H,{className:"h-3 w-3 mr-1"}),"Clear All"]})]}),e.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs(J,{className:"text-sm font-medium",children:["Selected (",e.length,")"]}),t.jsx("div",{className:"flex flex-wrap gap-1",children:e.map(u=>t.jsxs(Z,{variant:"default",className:"cursor-pointer",onClick:()=>m(u),children:[u,t.jsx(H,{className:"h-3 w-3 ml-1"})]},u))})]}),e.length>0&&t.jsx(Ve,{}),s&&t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx(J,{htmlFor:"nsfw-toggle",className:"text-sm",children:"Include NSFW"}),t.jsx(Ee,{id:"nsfw-toggle",checked:r,onCheckedChange:s})]}),t.jsx(we,{className:"h-[400px]",children:t.jsx("div",{className:"space-y-2",children:i.map(u=>{if(!u.tags||u.tags.length===0)return null;const h=l.has(u.category),p=u.tags;return t.jsxs(vt,{open:h,onOpenChange:()=>d(u.category),children:[t.jsx(wt,{asChild:!0,children:t.jsxs(E,{variant:"ghost",className:"w-full justify-between p-2 h-auto",children:[t.jsx("span",{className:"font-medium capitalize",children:u.category.replace("_"," ")}),t.jsxs("div",{className:"flex items-center gap-1",children:[t.jsx(Z,{variant:"outline",className:"text-xs",children:p.length}),h?t.jsx(et,{className:"h-4 w-4"}):t.jsx(tt,{className:"h-4 w-4"})]})]})}),t.jsx(St,{className:"space-y-1 pt-1",children:p.map(b=>t.jsx(E,{variant:"ghost",size:"sm",className:y("w-full justify-start p-2 h-auto text-xs",e.includes(b.name)&&"bg-primary/10"),onClick:()=>m(b.name),children:t.jsx(Ze,{tag:b.name,size:"sm"})},b.name))})]},u.category)})})})]})}const Et=He,Tt=Fe,At=Me,Te=a.forwardRef(({className:e,...o},r)=>t.jsx(ne,{className:y("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",e),...o,ref:r}));Te.displayName=ne.displayName;const Lt=ot("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ae=a.forwardRef(({side:e="right",className:o,children:r,...s},n)=>t.jsxs(At,{children:[t.jsx(Te,{}),t.jsxs(oe,{ref:n,className:y(Lt({side:e}),o),...s,children:[r,t.jsxs(Be,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[t.jsx(H,{className:"h-4 w-4"}),t.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Ae.displayName=oe.displayName;const Le=({className:e,...o})=>t.jsx("div",{className:y("flex flex-col space-y-2 text-center sm:text-left",e),...o});Le.displayName="SheetHeader";const _e=a.forwardRef(({className:e,...o},r)=>t.jsx(se,{ref:r,className:y("text-lg font-semibold text-foreground",e),...o}));_e.displayName=se.displayName;const _t=a.forwardRef(({className:e,...o},r)=>t.jsx(ae,{ref:r,className:y("text-sm text-muted-foreground",e),...o}));_t.displayName=ae.displayName;const V=768;function kt(){const[e,o]=a.useState(void 0);return a.useEffect(()=>{const r=window.matchMedia(`(max-width: ${V-1}px)`),s=()=>{o(window.innerWidth<V)};return r.addEventListener("change",s),o(window.innerWidth<V),()=>r.removeEventListener("change",s)},[]),!!e}const $t=()=>{const[e]=Ue(),[o,r]=a.useState(""),[s,n]=a.useState([]),[l,c]=a.useState(!1),[i,d]=a.useState(!1),m=kt(),{showNSFW:f}=$e();a.useEffect(()=>{const w=new URLSearchParams(window.location.search).get("search");w&&r(decodeURIComponent(w))},[e]);const{data:u=[],isLoading:h,error:p}=st({queryKey:["characters"],queryFn:async()=>await(await Qe("GET","/api/characters")).json()}),b=a.useMemo(()=>u.filter(g=>{if(o&&!g.name.toLowerCase().includes(o.toLowerCase())&&!(g.persona||"").toLowerCase().includes(o.toLowerCase())||!l&&g.isNsfw)return!1;if(s.length>0){const w=Array.isArray(g.tags)?g.tags:[];if(!s.some(z=>w.some(R=>R&&R.toLowerCase()===z.toLowerCase())))return!1}return!0}),[u,o,s,l,f]),S=()=>{r(""),n([]),c(!1)},N=o||s.length>0||l,v=()=>t.jsx(Rt,{selectedTags:s,onTagsChange:n,includeNSFW:l,onIncludeNSFWChange:c});return t.jsx("div",{className:"text-white",children:t.jsxs("div",{className:"max-w-7xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent mb-4",children:"Character Gallery"}),t.jsxs("p",{className:"text-zinc-300 mb-6",children:["Discover and explore our vast collection of AI characters",!h&&`(${b.length} characters)`]}),t.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 mb-8",children:[t.jsxs("div",{className:"flex-1 relative",children:[t.jsx(rt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-zinc-400"}),t.jsx(qe,{type:"text",placeholder:"Search characters...",value:o,onChange:g=>r(g.target.value),className:"w-full pl-10 pr-4 py-3 bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-xl text-zinc-100 placeholder:text-zinc-400 focus:border-orange-500/50 focus:outline-none focus:ring-2 focus:ring-orange-500/20"})]}),t.jsxs("div",{className:"flex gap-2",children:[N&&t.jsxs(E,{variant:"outline",onClick:S,className:"px-4 py-3 border-orange-500/20 hover:border-orange-500/50",children:[t.jsx(H,{className:"w-4 h-4 mr-2"}),"Clear"]}),m?t.jsxs(Et,{open:i,onOpenChange:d,children:[t.jsx(Tt,{asChild:!0,children:t.jsxs(E,{className:"px-6 py-3 bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-xl hover:bg-zinc-700/50 transition-all duration-200 flex items-center gap-2",children:[t.jsx($,{className:"w-5 h-5 text-orange-400"}),"Filters",(s.length>0||l)&&t.jsx("span",{className:"bg-orange-500 text-white text-xs rounded-full px-2 py-1",children:s.length+(l?1:0)})]})}),t.jsxs(Ae,{side:"left",className:"w-80",children:[t.jsx(Le,{children:t.jsx(_e,{children:"Filters"})}),t.jsx("div",{className:"mt-6",children:t.jsx(v,{})})]})]}):t.jsxs(E,{variant:s.length>0||l?"default":"outline",onClick:()=>d(!i),className:"px-6 py-3 border-orange-500/20 hover:border-orange-500/50 transition-all duration-200 flex items-center gap-2",children:[t.jsx($,{className:"w-5 h-5"}),"Filters",(s.length>0||l)&&t.jsx("span",{className:"bg-orange-500 text-white text-xs rounded-full px-2 py-1 ml-1",children:s.length+(l?1:0)})]})]})]})]}),t.jsxs("div",{className:"flex gap-6",children:[!m&&i&&t.jsx("div",{className:"w-80 flex-shrink-0",children:t.jsx("div",{className:"sticky top-6 bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-xl p-6",children:t.jsx(v,{})})}),t.jsx("div",{className:"flex-1",children:t.jsx("div",{className:"bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 backdrop-blur-lg border border-orange-500/20 rounded-2xl p-8 shadow-2xl shadow-orange-500/10",children:h?t.jsx("div",{className:"text-center py-12",children:t.jsx(Ge,{size:"lg",text:"Loading characters..."})}):p?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mb-4",children:t.jsx(ee,{className:"w-16 h-16 text-red-500 mx-auto mb-4"})}),t.jsx("h3",{className:"text-xl font-semibold text-red-300 mb-2",children:"Failed to load characters"}),t.jsx("p",{className:"text-zinc-400 mb-4",children:"There was an error loading character data"}),t.jsx(E,{onClick:()=>window.location.reload(),variant:"outline",children:"Try Again"})]}):b.length>0?t.jsx(nt,{externalCharacters:b,externalLoading:!1,externalError:null}):t.jsxs("div",{className:"text-center py-12",children:[t.jsx("div",{className:"mb-4",children:t.jsx(ee,{className:"w-16 h-16 text-zinc-500 mx-auto mb-4"})}),t.jsx("h3",{className:"text-xl font-semibold text-zinc-300 mb-2",children:"No characters found"}),t.jsx("p",{className:"text-zinc-400 mb-4",children:N?"Try adjusting your filters or search terms":"No characters available at the moment"}),N&&t.jsx(E,{onClick:S,variant:"outline",children:"Clear Filters"})]})})})]})]})})};export{$t as default};
