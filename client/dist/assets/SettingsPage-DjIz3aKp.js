import{j as e,l as de,T as me,m as xe,C as K,n as W,o as Z,p as J,A as Q,O as V}from"./ui-vendor-wCvZxCWV.js";import{r}from"./react-vendor-CgzYKCvO.js";import{L as q}from"./routing-DoJeAdmJ.js";import{h as he,z as S,i as k,F as g,q as F,j as ue,a as P,c as u,S as pe,B as x,k as X,u as ge,d as be,f as fe,e as je,g as ve,I as Ne,b as U}from"./index-dgNfrsMx.js";import{b as ye}from"./query-vendor-BCFDQDjj.js";import{P as we}from"./ProfilePictureUpload-BGV9eZg1.js";import{X as B,o as ze,R as Te,Y as Ce,j as Se,Z as ke,T as Fe,_ as Ae,m as Pe,$ as Ue}from"./icons-BCb4Ufys.js";import"./utils--BulIq_u.js";function De({isOpen:t,setIsOpen:i,onSave:a,initialSelectedTags:w=[]}){const{tagCategories:p,isLoading:z,error:o}=he(),[n,v]=r.useState([]),[N,y]=r.useState(!1);if(r.useEffect(()=>{t&&!N?(v([...w]),y(!0)):t||y(!1)},[t,N,w]),z)return e.jsx(S,{appear:!0,show:t,as:r.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:()=>i(!1),children:[e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:e.jsx(F,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-orange-200 mb-2",children:"Loading Your Preferences"}),e.jsx("p",{className:"text-zinc-300",children:"Fetching available tags..."})]})})})})]})});if(o)return e.jsx(S,{appear:!0,show:t,as:r.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:()=>i(!1),children:[e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:e.jsx(F,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-red-900/95 to-red-800/95 backdrop-blur-lg border border-red-500/30 text-white shadow-2xl shadow-red-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-red-400 mb-4",children:"⚠️"}),e.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Unable to Load Tags"}),e.jsx("p",{className:"text-red-300 mb-4",children:o.message}),e.jsx("p",{className:"text-red-400 text-sm",children:"Please try refreshing the page or contact support."})]})})})})]})});const T=c=>{v(d=>d.includes(c)?d.filter(l=>l!==c):d.length<8?[...d,c]:d)},j=()=>{n.length<5||(a(n),i(!1))},b=()=>{i(!1)};return!z&&!o&&p.length===0?e.jsx(S,{appear:!0,show:t,as:r.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:b,children:[e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:e.jsx(F,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-yellow-900/95 to-yellow-800/95 backdrop-blur-lg border border-yellow-500/30 text-white shadow-2xl shadow-yellow-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx("div",{className:"text-yellow-400 mb-4",children:"📦"}),e.jsx("h3",{className:"text-lg font-semibold text-yellow-200 mb-2",children:"No Tags Available"}),e.jsx("p",{className:"text-yellow-300 mb-4",children:"The tag database appears to be empty."}),e.jsx("p",{className:"text-yellow-400 text-sm",children:"Please contact support to set up your preferences."})]})})})})]})}):e.jsx(S,{appear:!0,show:t,as:r.Fragment,children:e.jsxs(k,{as:"div",className:"relative z-50",onClose:b,children:[e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:e.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),e.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:e.jsx(g,{as:r.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:e.jsxs(F,{className:"w-full max-w-xl max-h-[90vh] transform rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"relative p-4 pb-3 border-b border-orange-500/20",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"animate-in slide-in-from-left-4 duration-700",children:[e.jsx(ue,{className:"text-lg font-semibold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent animate-in fade-in duration-1000",children:"Update Your Preferences"}),e.jsx("p",{className:"text-zinc-300 text-sm mt-1 animate-in slide-in-from-left-4 duration-700 delay-200",children:"Update your tag preferences to discover new characters and content that match your interests."})]}),e.jsxs(P,{variant:"outline",className:`animate-in slide-in-from-right-4 duration-700 delay-300 ${n.length<5?"text-red-400 border-red-500/30 animate-pulse":n.length>=5&&n.length<=8?"text-green-400 border-green-500/30 animate-bounce":"text-orange-400 border-orange-500/30"}`,children:["(",n.length,"/8) ",n.length<5&&"Need "+(5-n.length)+" more"]})]}),e.jsx("button",{onClick:b,className:"absolute top-4 right-4 text-zinc-400 hover:text-white transition-colors duration-200",children:e.jsx(B,{className:"h-5 w-5"})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4 pt-3",children:[e.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-4 duration-700 delay-400",children:[e.jsx("h3",{className:"text-base font-semibold text-orange-200 mb-2",children:"Selected Tags"}),e.jsx("div",{className:"min-h-[40px] p-2 bg-zinc-600/30 rounded-lg border border-orange-500/20 transition-all duration-300",children:n.length===0?e.jsx("p",{className:"text-zinc-500 text-xs animate-pulse",children:"No tags selected yet..."}):e.jsx("div",{className:"flex flex-wrap gap-1",children:n.map((c,d)=>{const l=p.flatMap(f=>f.tags).find(f=>f.name===c);return l?e.jsxs(P,{className:"flex items-center gap-1 px-1.5 py-0.5 text-white border-0 text-xs animate-in slide-in-from-bottom-2 duration-300 hover:scale-105 transition-transform",style:{backgroundColor:l.color,animationDelay:`${d*100}ms`},children:[e.jsx("span",{className:"text-xs",children:l.emoji}),e.jsx("span",{className:"text-xs",children:l.displayName}),e.jsx(B,{className:"h-2.5 w-2.5 ml-0.5 cursor-pointer hover:bg-black/20 rounded-full transition-all duration-200",onClick:()=>T(c)})]},c):null})})})]}),e.jsx("div",{className:"space-y-4",children:p.map((c,d)=>e.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-700",style:{animationDelay:`${600+d*100}ms`},children:[e.jsx("h4",{className:"text-sm font-medium text-orange-200 mb-2",children:c.category}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:c.tags.map((l,f)=>{const h=n.includes(l.name);return e.jsxs("button",{onClick:A=>{A.stopPropagation(),T(l.name)},disabled:!h&&n.length>=8,className:u("relative flex items-center gap-1 p-1.5 rounded-md border text-left text-xs transition-all duration-300 hover:scale-105 hover:shadow-lg group animate-in slide-in-from-bottom-2",h?"border-orange-500/50 bg-orange-500/20 text-white shadow-orange-500/20 shadow-lg animate-pulse":n.length>=8?"border-zinc-600/30 bg-zinc-700/20 text-zinc-500 cursor-not-allowed":"border-zinc-600/50 bg-zinc-700/30 text-zinc-300 hover:border-orange-500/30 hover:bg-zinc-600/50 hover:text-orange-200 hover:shadow-orange-500/10",!h&&n.length<5&&n.length>0&&"animate-pulse border-green-500/30"),style:{animationDelay:`${800+d*100+f*50}ms`,boxShadow:h?`0 0 10px ${l.color}40`:void 0},children:[e.jsx("span",{className:"text-xs transition-transform duration-200 group-hover:scale-110",children:l.emoji}),e.jsx("span",{className:"flex-1 truncate text-xs font-medium",children:l.displayName}),l.isNSFW&&e.jsx(P,{variant:"outline",className:"text-[8px] px-0.5 py-0 h-2.5 text-red-400 border-red-500/30",children:"NSFW"}),h&&e.jsx(ze,{className:"h-2.5 w-2.5 text-orange-400 absolute -top-0.5 -right-0.5 bg-zinc-900 rounded-full"})]},l.name)})}),c.category!=="Sexuality"&&e.jsx(pe,{className:"mt-4 bg-zinc-600/50"})]},c.category))})]})}),e.jsx("div",{className:"p-3 pt-2 border-t border-orange-500/20 space-y-2 animate-in slide-in-from-bottom-4 duration-700 delay-1000",children:e.jsxs("div",{className:"flex justify-center gap-3 pt-1",children:[e.jsx(x,{onClick:b,variant:"outline",className:"px-6 py-2 text-sm border-zinc-600 text-zinc-300 hover:bg-zinc-700/50 hover:text-white transition-all duration-300",children:"Cancel"}),e.jsx(x,{onClick:j,disabled:n.length<5,className:`px-8 py-2 text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-orange-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${n.length<5?"animate-pulse":""}`,children:n.length<5?`Update Preferences (Need ${5-n.length} more tags)`:"Update Preferences ✨"})]})})]})})})]})})}const G=de,H=me,Ee=xe,_=r.forwardRef(({className:t,...i},a)=>e.jsx(V,{className:u("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...i,ref:a}));_.displayName=V.displayName;const D=r.forwardRef(({className:t,...i},a)=>e.jsxs(Ee,{children:[e.jsx(_,{}),e.jsx(K,{ref:a,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...i})]}));D.displayName=K.displayName;const E=({className:t,...i})=>e.jsx("div",{className:u("flex flex-col space-y-2 text-center sm:text-left",t),...i});E.displayName="AlertDialogHeader";const $=({className:t,...i})=>e.jsx("div",{className:u("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...i});$.displayName="AlertDialogFooter";const Y=r.forwardRef(({className:t,...i},a)=>e.jsx(W,{ref:a,className:u("text-lg font-semibold",t),...i}));Y.displayName=W.displayName;const L=r.forwardRef(({className:t,...i},a)=>e.jsx(Z,{ref:a,className:u("text-sm text-muted-foreground",t),...i}));L.displayName=Z.displayName;const R=r.forwardRef(({className:t,...i},a)=>e.jsx(Q,{ref:a,className:u(X(),t),...i}));R.displayName=Q.displayName;const M=r.forwardRef(({className:t,...i},a)=>e.jsx(J,{ref:a,className:u(X({variant:"outline"}),"mt-2 sm:mt-0",t),...i}));M.displayName=J.displayName;function Ge(){const[t,i]=r.useState("subscription"),{user:a,isAuthenticated:w,refreshUser:p,logout:z}=ge(),{toast:o}=be(),[n,v]=r.useState(a?.username||""),[N,y]=r.useState(!1),[T,j]=r.useState(!1),[b,c]=r.useState(!1),[d,l]=r.useState(!1),[f,h]=r.useState(!1),{data:A}=ye({queryKey:["user","profile"],queryFn:fe.getProfile,enabled:w,refetchInterval:6e4}),C=A||a,O=C?.coins||0,ee=[{id:"subscription",label:"Subscription"},{id:"account",label:"Account"},{id:"preferences",label:"Preferences"}],se=async()=>{if(!(!a?.id||!n.trim())){if(n===a.username){j(!1);return}y(!0);try{const s=await U("PUT",`/api/users/${a.id}`,{username:n.trim()});if(s.ok){const m=await s.json();o({title:"Success",description:"Username updated successfully"}),await p(),j(!1)}else{const m=await s.json();o({title:"Error",description:m.message||"Failed to update username",variant:"destructive"})}}catch(s){console.error("Username update error:",s),o({title:"Error",description:"Failed to update username",variant:"destructive"})}finally{y(!1)}}},ae=async()=>{if(a?.id){c(!0);try{const s=await U("DELETE",`/api/users/${a.id}`);if(s.ok)o({title:"Account Deleted",description:"Your account has been permanently deleted"}),z(),window.location.href="/";else{const m=await s.json();o({title:"Error",description:m.message||"Failed to delete account",variant:"destructive"})}}catch(s){console.error("Account deletion error:",s),o({title:"Error",description:"Failed to delete account",variant:"destructive"})}finally{c(!1)}}},te=async()=>{if(a?.id){l(!0);try{const s=await U("POST",`/api/users/${a.id}/cancel-subscription`);if(s.ok)o({title:"Subscription Cancelled",description:"Your subscription has been cancelled and you've been moved to the free tier"}),await p();else{const m=await s.json();o({title:"Error",description:m.message||"Failed to cancel subscription",variant:"destructive"})}}catch(s){console.error("Subscription cancellation error:",s),o({title:"Error",description:"Failed to cancel subscription",variant:"destructive"})}finally{l(!1)}}},re=async s=>{try{await je.updateUserPreferences({selectedTags:s}),o({title:"Success",description:"Your tag preferences have been updated"}),await p(),h(!1)}catch(m){console.error("Tag preferences update error:",m),o({title:"Error",description:"Failed to update tag preferences",variant:"destructive"})}},ne=()=>{const s=C?.tier||"free",m=s.charAt(0).toUpperCase()+s.slice(1),I=s==="free";return e.jsxs("div",{className:"space-y-6 sm:space-y-8",children:[e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-orange-200 mb-2",children:"Your Plan"}),e.jsxs("p",{className:"text-zinc-300 text-sm sm:text-base",children:["You are on the ",e.jsx("span",{className:`font-medium ${I?"text-zinc-400":"text-orange-400"}`,children:m})," plan."]})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsxs("div",{className:"flex items-center text-zinc-400 text-sm mb-1",children:[e.jsx(Te,{className:"w-4 h-4 mr-1"}),"Usage"]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-orange-200",children:"0 / 0"})]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 sm:gap-4 mb-4 sm:mb-6",children:["Unlimited character interactions","Basic character creation","Community features","Standard support"].map((oe,ce)=>e.jsxs("div",{className:"flex items-center text-sm sm:text-base text-zinc-300",children:[e.jsx(Ce,{className:"w-4 h-4 text-green-400 mr-2 shrink-0"}),oe]},ce))}),e.jsx(q,{href:"/subscribe",children:e.jsx(x,{variant:"outline",className:"border-orange-500/30 text-orange-400 hover:bg-orange-500/10 hover:border-orange-500/50 transition-all duration-200 cursor-pointer",children:"Upgrade Plan"})}),!I&&e.jsxs(G,{children:[e.jsx(H,{asChild:!0,children:e.jsx(x,{variant:"outline",className:"border-red-500/30 text-red-400 hover:bg-red-500/10 hover:border-red-500/50 transition-all duration-200 cursor-pointer bg-red-500/5",children:"Cancel Current Plan"})}),e.jsxs(D,{className:"bg-zinc-800 border border-red-500/20",children:[e.jsxs(E,{children:[e.jsx(Y,{className:"text-red-400",children:"Cancel Subscription"}),e.jsxs(L,{className:"text-zinc-300",children:["Are you sure you want to cancel your ",m," subscription? You will lose access to premium features and be moved to the free tier immediately. This action cannot be undone."]})]}),e.jsxs($,{children:[e.jsx(M,{className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700",children:"Keep Subscription"}),e.jsx(R,{onClick:te,disabled:d,className:"bg-red-600 hover:bg-red-700 text-white",children:d?"Cancelling...":"Yes, Cancel Subscription"})]})]})]})]}),e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-lg p-4 sm:p-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between mb-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-orange-200 mb-2",children:"Coins"}),e.jsx("p",{className:"text-zinc-300 text-sm sm:text-base",children:"Use coins for premium features and character interactions."})]}),e.jsxs("div",{className:"text-left sm:text-right",children:[e.jsxs("div",{className:"flex items-center text-zinc-400 text-sm mb-1",children:[e.jsx(Se,{className:"w-4 h-4 mr-1"}),"Current Balance"]}),e.jsx("div",{className:"text-xl sm:text-2xl font-bold text-yellow-400",children:ve(O)})]})]}),e.jsx(q,{href:"/coins",children:e.jsx(x,{variant:"outline",className:"border-orange-500/30 text-orange-400 hover:bg-orange-500/10 hover:border-orange-500/50 transition-all duration-200 cursor-pointer",children:"Get more coins"})})]})]})},ie=()=>e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-lg p-4 sm:p-6",children:[e.jsx("h2",{className:"text-lg sm:text-xl font-semibold text-orange-200 mb-4 sm:mb-6",children:"Account Information"}),e.jsxs("div",{className:"space-y-4 sm:space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-4",children:"Profile Picture"}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center space-y-3 sm:space-y-0 sm:space-x-4",children:[e.jsx(we,{currentAvatarUrl:a?.avatarUrl,onAvatarUpdate:async s=>{console.log("Avatar updated in settings:",s),await p()}}),e.jsxs("div",{className:"text-xs sm:text-sm text-zinc-400",children:[e.jsx("p",{children:"Click on your avatar to upload a new profile picture."}),e.jsx("p",{children:"Supported formats: JPG, PNG, GIF (max 5MB)"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Username"}),T?e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3",children:[e.jsx(Ne,{value:n,onChange:s=>v(s.target.value),className:"bg-zinc-700/50 border-orange-500/20 text-zinc-200 flex-1",placeholder:"Enter new username",minLength:3,maxLength:30}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(x,{onClick:se,disabled:N||!n.trim()||n===a?.username,size:"sm",className:"bg-orange-500 hover:bg-orange-600 text-white",children:N?"Saving...":"Save"}),e.jsx(x,{onClick:()=>{j(!1),v(a?.username||"")},variant:"outline",size:"sm",className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700",children:"Cancel"})]})]}):e.jsxs("div",{className:"flex items-center justify-between bg-zinc-700/50 border border-orange-500/20 rounded-lg p-3",children:[e.jsx("span",{className:"text-zinc-200 text-sm sm:text-base",children:a?.username||"Not set"}),e.jsxs(x,{onClick:()=>j(!0),variant:"ghost",size:"sm",className:"text-orange-400 hover:text-orange-300 hover:bg-orange-500/10",children:[e.jsx(ke,{className:"w-4 h-4 mr-1"}),"Edit"]})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Username must be 3-30 characters long"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Email"}),e.jsx("div",{className:"bg-zinc-700/50 border border-orange-500/20 rounded-lg p-3 text-zinc-200 text-sm sm:text-base",children:a?.email||"Not set"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-zinc-300 mb-2",children:"Member Since"}),e.jsx("div",{className:"bg-zinc-700/50 border border-orange-500/20 rounded-lg p-3 text-zinc-200 text-sm sm:text-base",children:C?.createdAt?new Date(C.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"}):"Unknown"})]}),e.jsxs("div",{className:"border-t border-red-500/20 pt-6 mt-8",children:[e.jsx("h3",{className:"text-lg font-semibold text-red-400 mb-4",children:"Danger Zone"}),e.jsx("div",{className:"bg-red-500/10 border border-red-500/20 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx(Fe,{className:"w-5 h-5 text-red-400 mt-0.5 shrink-0"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"text-sm font-medium text-red-300 mb-2",children:"Delete Account"}),e.jsx("p",{className:"text-xs text-red-200/80 mb-4",children:"This action cannot be undone. This will permanently delete your account, all your characters, conversations, and remove all associated data."}),e.jsxs(G,{children:[e.jsx(H,{asChild:!0,children:e.jsxs(x,{variant:"destructive",size:"sm",className:"bg-red-600 hover:bg-red-700 text-white",children:[e.jsx(Ae,{className:"w-4 h-4 mr-2"}),"Delete Account"]})}),e.jsxs(D,{className:"bg-zinc-900 border-red-500/20",children:[e.jsxs(E,{children:[e.jsx(Y,{className:"text-red-400",children:"Are you absolutely sure?"}),e.jsxs(L,{className:"text-zinc-300",children:["This action cannot be undone. This will permanently delete your account and remove all your data from our servers, including:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Your profile and account information"}),e.jsx("li",{children:"All characters you've created"}),e.jsx("li",{children:"All conversations and chat history"}),e.jsx("li",{children:"Your followers and following relationships"})]})]})]}),e.jsxs($,{children:[e.jsx(M,{className:"border-zinc-600 text-zinc-300 hover:bg-zinc-700",children:"Cancel"}),e.jsx(R,{onClick:ae,disabled:b,className:"bg-red-600 hover:bg-red-700 text-white",children:b?"Deleting...":"Delete Account"})]})]})]})]})]})})]})]})]}),le=()=>e.jsxs("div",{className:"bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 rounded-lg p-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-orange-200 mb-6",children:"Preferences"}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-orange-200 mb-2",children:"Content Preferences"}),e.jsx("p",{className:"text-sm text-zinc-400 mb-4",children:"Select your preferred tags to personalize your experience and see characters that match your interests."})]}),e.jsxs("div",{className:"bg-zinc-700/50 border border-orange-500/20 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-sm font-medium text-zinc-300",children:"Current Preferences"}),e.jsxs(x,{onClick:()=>h(!0),variant:"outline",size:"sm",className:"border-orange-500/30 text-orange-400 hover:bg-orange-500/10 hover:border-orange-500/50",children:[e.jsx(Pe,{className:"w-4 h-4 mr-2"}),"Edit Preferences"]})]}),a?.preferences?.selectedTags&&a.preferences.selectedTags.length>0?e.jsx("div",{className:"flex flex-wrap gap-2",children:a.preferences.selectedTags.map((s,m)=>e.jsx("span",{className:"inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-orange-500/20 text-orange-300 border border-orange-500/30",children:s},s))}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Ue,{className:"w-12 h-12 text-zinc-500 mx-auto mb-3"}),e.jsx("p",{className:"text-zinc-400 text-sm mb-3",children:"No preferences set yet"}),e.jsx(x,{onClick:()=>h(!0),className:"bg-orange-500 hover:bg-orange-600 text-white",children:"Set Your Preferences"})]})]})]})})]});return e.jsxs("div",{className:"min-h-screen pt-8 px-4 sm:px-6",children:[e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-orange-200 mb-6 sm:mb-8",children:"Settings"}),e.jsx("div",{className:"flex flex-wrap gap-1 sm:gap-2 mb-6 sm:mb-8 bg-zinc-800/30 backdrop-blur-sm rounded-lg p-1 border border-orange-500/20 overflow-x-auto",children:ee.map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:`
                px-2 sm:px-4 py-2 rounded-md text-xs sm:text-sm font-medium transition-all duration-200 cursor-pointer whitespace-nowrap
                ${t===s.id?"bg-zinc-700/80 text-orange-200 shadow-lg":"text-zinc-400 hover:text-orange-300 hover:bg-zinc-700/40"}
              `,children:[e.jsx("span",{className:"hidden sm:inline",children:s.label}),e.jsxs("span",{className:"sm:hidden",children:[s.id==="subscription"&&"Sub",s.id==="account"&&"Account",s.id==="preferences"&&"Prefs"]})]},s.id))}),e.jsxs("div",{className:"mb-8",children:[t==="subscription"&&ne(),t==="account"&&ie(),t==="preferences"&&le()]})]}),e.jsx(De,{isOpen:f,setIsOpen:h,onSave:re,initialSelectedTags:a?.preferences?.selectedTags||[]})]})}export{Ge as default};
