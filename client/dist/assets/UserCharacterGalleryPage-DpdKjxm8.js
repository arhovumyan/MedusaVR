import{j as e}from"./ui-vendor-yJ52fMSG.js";import{r as f}from"./react-vendor-CgzYKCvO.js";import{b as v}from"./query-vendor-8KRGqY0G.js";import{a as w,L as N}from"./routing-DoJeAdmJ.js";import{u as y,L as k,b as z}from"./index-KQwLGX-o.js";import{R as C,Q as g,X as L,aj as I,ak as $}from"./icons-B1tK8ZjU.js";import"./utils--BulIq_u.js";function F(){const{user:n}=y(),{characterId:i}=w(),[r,c]=f.useState(null),{data:s,isLoading:u,error:p}=v({queryKey:["user-gallery-character",n?.username,i],queryFn:async()=>(await z("GET",`/api/user-gallery/${n?.username}/character/${i}`,void 0,{},"medium")).json(),enabled:!!(n?.username&&i)}),m=async(a,t)=>{try{const j=await(await fetch(a)).blob(),h=window.URL.createObjectURL(j),l=document.createElement("a");l.href=h,l.download=t,document.body.appendChild(l),l.click(),document.body.removeChild(l),window.URL.revokeObjectURL(h)}catch(o){console.error("Download failed:",o),window.open(a,"_blank")}},b=a=>{c(a)},d=()=>{c(null)},x=a=>{!s?.images||r===null||c(a==="prev"?r>0?r-1:s.images.length-1:r<s.images.length-1?r+1:0)};return n?e.jsx("div",{className:"min-h-screen bg-zinc-900 text-white",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[e.jsx(N,{href:"/user-gallery",children:e.jsx("button",{className:"p-2 text-zinc-400 hover:text-white transition-colors",children:e.jsx(C,{size:20})})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:[s?.character.name||i," Gallery"]}),e.jsxs("p",{className:"text-zinc-400 mt-1",children:[s?.totalImages||0," images"]})]})]})}),u?e.jsx("div",{className:"flex items-center justify-center py-16",children:e.jsx(k,{size:"lg",text:"Loading character images..."})}):p?e.jsx("div",{className:"text-center text-zinc-400 py-16",children:e.jsx("p",{children:"Failed to load character images."})}):s&&s.images.length>0?e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4",children:s.images.map((a,t)=>e.jsxs("div",{className:"group cursor-pointer relative overflow-hidden rounded-lg border border-orange-500/20 bg-zinc-800/40",onClick:()=>b(t),children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:a.url,alt:`${s.character.name} image ${t+1}`,className:"w-full h-auto object-contain group-hover:scale-105 transition-transform duration-300",loading:"lazy"}),e.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/20 transition-colors duration-300"})]}),e.jsx("div",{className:"absolute bottom-2 right-2 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("button",{onClick:o=>{o.stopPropagation(),m(a.url,`${s.character.name}_image_${t+1}.png`)},className:"p-1.5 bg-black/60 text-white rounded-full hover:bg-black/80 transition-colors",children:e.jsx(g,{size:16})})})]},a.id))}):e.jsxs("div",{className:"bg-zinc-800/50 border border-orange-500/20 rounded-lg p-12 text-center",children:[e.jsxs("div",{className:"text-zinc-300 mb-1",children:["No images found for ",s?.character.name]}),e.jsx("div",{className:"text-zinc-500 text-sm",children:"Generate images with this character and they will appear here."})]}),r!==null&&s?.images&&e.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm z-50 flex items-center justify-center p-2 sm:p-4",onClick:d,children:e.jsxs("div",{className:"relative bg-zinc-800/90 backdrop-blur-md rounded-lg w-full h-full max-w-6xl max-h-full overflow-hidden border border-orange-500/30 flex flex-col",style:{maxWidth:"calc(100vw - 16px)",maxHeight:"calc(100vh - 16px)"},onClick:a=>a.stopPropagation(),children:[e.jsxs("div",{className:"flex items-center justify-between p-2 sm:p-4 border-b border-orange-500/20 flex-shrink-0",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h3",{className:"text-white font-semibold text-sm sm:text-base truncate",children:s.character.name}),e.jsxs("p",{className:"text-zinc-300 text-xs sm:text-sm",children:["Image ",r+1," of ",s.images.length]})]}),e.jsxs("div",{className:"flex items-center space-x-2 flex-shrink-0",children:[e.jsx("button",{onClick:()=>m(s.images[r].url,`${s.character.name}_image_${r+1}.png`),className:"bg-orange-600 hover:bg-orange-700 text-white p-1.5 sm:p-2 rounded-lg transition-colors",children:e.jsx(g,{size:16,className:"w-4 h-4 sm:w-5 sm:h-5"})}),e.jsx("button",{onClick:d,className:"bg-zinc-700 hover:bg-zinc-600 text-white p-1.5 sm:p-2 rounded-lg transition-colors",children:e.jsx(L,{size:16,className:"w-4 h-4 sm:w-5 sm:h-5"})})]})]}),e.jsxs("div",{className:"relative flex-1 flex items-center justify-center p-2",children:[e.jsx("img",{src:s.images[r].url,alt:`${s.character.name} image ${r+1}`,className:"max-w-full max-h-full object-contain mx-auto block",style:{maxWidth:"calc(100vw - 64px)",maxHeight:"calc(100vh - 120px)"}}),s.images.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>x("prev"),className:"absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-1.5 sm:p-2 rounded-full transition-colors",children:e.jsx(I,{size:20,className:"w-4 h-4 sm:w-6 sm:h-6"})}),e.jsx("button",{onClick:()=>x("next"),className:"absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 bg-black/60 hover:bg-black/80 text-white p-1.5 sm:p-2 rounded-full transition-colors",children:e.jsx($,{size:20,className:"w-4 h-4 sm:w-6 sm:h-6"})})]})]})]})})]})}):e.jsx("div",{className:"min-h-screen bg-zinc-900 text-white flex items-center justify-center p-6",children:e.jsx("div",{className:"bg-zinc-800/50 border border-orange-500/20 rounded-lg p-8 text-center",children:e.jsx("p",{className:"text-zinc-300",children:"Please sign in to view your image gallery."})})})}export{F as default};
