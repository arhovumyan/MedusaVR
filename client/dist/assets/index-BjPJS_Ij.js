const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/csrfProtection-Cneea2N7.js","assets/ui-vendor-yJ52fMSG.js","assets/react-vendor-CgzYKCvO.js","assets/routing-DoJeAdmJ.js","assets/query-vendor-8KRGqY0G.js","assets/utils--BulIq_u.js","assets/icons-B1tK8ZjU.js","assets/ForYouPage-Cb8Pdg-P.js","assets/cards-BKefm5w4.js","assets/SEOHead-8zf7CPXu.js","assets/following-C7JEhe5P.js","assets/skeleton-_w-rRPXg.js","assets/creators-gYXoofE9.js","assets/card-CqQ-sF9c.js","assets/creator-profile-CkDh1IcN.js","assets/recent-chats-ZHJ4OfdK.js","assets/SubscribePage-D1y6IbdD.js","assets/SubscriptionManagePage-CJtZQ8Ub.js","assets/SubscriptionSuccessPage-DFY9Ml88.js","assets/SubscriptionCancelPage-a2GvJoCq.js","assets/CoinsPage-uNOfIQ2W.js","assets/SettingsPage-BTTO9bV5.js","assets/ProfilePictureUpload-DvaKjbwC.js","assets/not-found-1SwJj7mB.js","assets/ChatPage-CiJmMgPs.js","assets/violation-tracker-B7Z4jDAE.js","assets/prohibitedWordsFilter-C7sCMSWg.js","assets/textarea-BVwmO6_d.js","assets/alert-BNZkiIaA.js","assets/CharacterProfile-DlpZIbnS.js","assets/CharacterPage-B3H4UaeE.js","assets/tag-M7NfzVJV.js","assets/Breadcrumb-BGSHSQI7.js","assets/FavoritesPage-DxeOgUoW.js","assets/NotFoundPage-DVh_ZfGy.js","assets/UserProfilePage-CXKJsaST.js","assets/BrandingFooter-26qMnV8x.js","assets/UserGalleryPage-CsPSH9rA.js","assets/CharacterGallery-BxvQpcIr.js","assets/index-Bk2AHYaC.js","assets/UserCharacterGalleryPage-CLQ7yWAA.js","assets/AllUserImagesPage-mLPi1Bzk.js","assets/ShowcasePage-CnF_KthO.js","assets/EmailVerificationPage-CvqqzlOa.js","assets/CreateCharacter-DwIwyxhk.js","assets/CreateCharacterEnhanced-DDYw5Yy8.js","assets/UserCharacters-BD2YQiUz.js","assets/TestPage-DmRFAbez.js","assets/TagPage-B3oBeYwJ.js","assets/SearchPage-HmQjPy_n.js","assets/AuthDebugPage-BtyO1Z2Q.js","assets/PaymentSuccessPage-BY-EgYxR.js","assets/PaymentCancelPage-RcutToyi.js","assets/GenerateImagesPage-CXnJ_Iba.js","assets/CharacterGalleryPage-MgwBzRNF.js","assets/FeaturesPage-DmfvTOe_.js","assets/LegalPage-Di8ekTLT.js","assets/CommunityGuidelinesPage-B0boAmA-.js","assets/LegalPolicyPage-BRbcphap.js","assets/PrivacyPolicyPage-btlwHiyj.js","assets/TermsOfServicePage-DASp72Pi.js","assets/ContentPolicyPage-zhsx4CQU.js","assets/BlockedContentPolicyPage-BM3hMm8f.js","assets/CookiePolicyPage-DBApG3SJ.js","assets/DMCANoticePage-DCuIBi2m.js","assets/ExemptionStatementPage-y5oG3G4M.js","assets/AgeVerificationPolicyPage-ac9fYri4.js","assets/ContentProviderCompliancePage-DYAgZnJd.js","assets/ContentSafetyCompliancePage-Dib7zlZ0.js","assets/LiabilityDisclaimerPage-Kj9p30C-.js","assets/GuidesPage-WnMccrS1.js","assets/BlogPostPage-CDraHEDo.js"])))=>i.map(i=>d[i]);
var ku=Object.defineProperty;var ju=(t,e,n)=>e in t?ku(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Re=(t,e,n)=>ju(t,typeof e!="symbol"?e+"":e,n);import{j as a,P as ae,c as Ds,a as Ru,u as Wt,B as Ou,b as Du,d as ra,e as Y,f as ln,R as Lu,g as Fu,h as Bn,i as Mu,D as $u,k as Uu,_ as Ls,S as zu,l as Vu,T as Hu,C as sa,m as Wu,n as oa,o as ia,p as aa,O as ca}from"./ui-vendor-yJ52fMSG.js";import{b as cr,g as Fs,r as d,a as N,R as Po}from"./react-vendor-CgzYKCvO.js";import{Q as Bu,u as lr,a as Ot,b as Ms,c as qu}from"./query-vendor-8KRGqY0G.js";import{t as Gu,c as ft,a as ur}from"./utils--BulIq_u.js";import{X as Bt,C as Ao,H as Ku,S as Yu,B as Ju,U as Xu,M as la,a as Qu,I as ua,F as No,b as Zu,c as ed,d as td,G as nd,e as rd,E as sd,L as as,f as od,g as id,h as da,i as ad,j as cd,k as ld,l as ud,m as dd,n as fd,P as hd,o as Dr,p as pd,T as md,q as gd}from"./icons-B1tK8ZjU.js";import{S as yd,R as C,u as $s,L as Xe,B as vd}from"./routing-DoJeAdmJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var cs={},ko=cr;cs.createRoot=ko.createRoot,cs.hydrateRoot=ko.hydrateRoot;const wd={medium:{maxRequests:6,windowMs:1e3,backoffMultiplier:1.5,maxBackoffMs:3e3,priority:"medium"}};class bd{constructor(){this.requestHistory=new Map,this.requestQueue=[],this.processingQueue=!1,this.backoffDelays=new Map,this.consecutiveRateLimits=new Map}async executeRequest(e,n,r=wd.medium){if(this.canExecuteNow(e,r))try{const s=await this.executeWithBackoff(e,n,r);return this.recordSuccess(e),s}catch(s){if(s.isRateLimit)return this.queueRequest(e,n,r);throw s}else return this.queueRequest(e,n,r)}canExecuteNow(e,n){const r=Date.now(),o=(this.requestHistory.get(e)||[]).filter(i=>r-i<n.windowMs);return this.requestHistory.set(e,o),o.length<n.maxRequests}async executeWithBackoff(e,n,r){const s=this.backoffDelays.get(e)||0;s>0&&(this.showProgressIndicator(e,s),await this.sleep(s));try{const o=await n();return this.recordRequestSuccess(e),o}catch(o){throw o.isRateLimit&&this.handleRateLimit(e,r),o}}queueRequest(e,n,r){return new Promise((s,o)=>{const i={id:`${e}-${Date.now()}-${Math.random()}`,request:n,priority:r.priority,timestamp:Date.now(),retryCount:0,resolve:s,reject:o};this.insertByPriority(i),this.showQueuedMessage(r.priority),this.processingQueue||this.processQueue()})}insertByPriority(e){const n={high:0,medium:1,low:2},r=this.requestQueue.findIndex(s=>n[s.priority]>n[e.priority]);r===-1?this.requestQueue.push(e):this.requestQueue.splice(r,0,e)}async processQueue(){if(!this.processingQueue){for(this.processingQueue=!0;this.requestQueue.length>0;){const e=this.requestQueue.shift();try{await this.sleep(100);const n=await e.request();e.resolve(n),this.recordRequestSuccess(e.id)}catch(n){n.isRateLimit&&e.retryCount<3?(e.retryCount++,await this.sleep(Math.min(1e3*Math.pow(2,e.retryCount),5e3)),this.requestQueue.unshift(e)):e.reject(n)}}this.processingQueue=!1}}handleRateLimit(e,n){const r=this.backoffDelays.get(e)||0,s=this.consecutiveRateLimits.get(e)||0,o=Math.min(Math.max(r*n.backoffMultiplier,500),n.maxBackoffMs);this.backoffDelays.set(e,o),this.consecutiveRateLimits.set(e,s+1),setTimeout(()=>{const i=this.backoffDelays.get(e)||0;this.backoffDelays.set(e,Math.max(i*.8,0))},n.windowMs)}recordRequestSuccess(e){const n=Date.now(),r=this.requestHistory.get(e)||[];r.push(n),this.requestHistory.set(e,r)}recordSuccess(e){this.backoffDelays.set(e,0),this.consecutiveRateLimits.set(e,0)}showProgressIndicator(e,n){typeof window<"u"&&window.toast&&window.toast({title:"Processing...",description:`Please wait ${Math.ceil(n/1e3)}s - managing request rate`,variant:"default"})}showQueuedMessage(e){const n={high:"Request queued - processing shortly",medium:"Request queued - processing in order",low:"Request queued - will process when possible"};typeof window<"u"&&window.toast&&window.toast({title:"Request Queued",description:n[e],variant:"default"})}sleep(e){return new Promise(n=>setTimeout(n,e))}getQueueStatus(){return{queueLength:this.requestQueue.length,processingQueue:this.processingQueue,backoffDelays:Object.fromEntries(this.backoffDelays),consecutiveRateLimits:Object.fromEntries(this.consecutiveRateLimits)}}}const fa=new bd;function xd(){return""}const ha=xd();async function pa(t){if(!t.ok){const e=await t.text()||t.statusText;if(t.status===401&&(e.includes("Invalid or expired token")||e.includes("invalid signature"))&&(console.warn("üîí JWT error detected, clearing tokens and refreshing page"),localStorage.removeItem("medusavr_access_token"),localStorage.removeItem("medusavr_refresh_token"),localStorage.removeItem("medusavr_user"),window.location.reload()),t.status===429){const r=new Error("Rate limit exceeded");throw r.isRateLimit=!0,r.originalResponse=t,r.status=429,console.info("‚è≥ Rate limit encountered - request will be queued"),r}const n=new Error(`${t.status}: ${e}`);throw n.status=t.status,n.response=t,n}}async function _(t,e,n,r={},s="medium"){const o=`${ha}${e}`,i=localStorage.getItem("medusavr_access_token"),l={method:t,credentials:"include",headers:{...i?{Authorization:`Bearer ${i}`}:{},...r}};n!==void 0?n instanceof FormData?l.body=n:(l.headers={"Content-Type":"application/json",...l.headers},l.body=JSON.stringify(n)):l.headers={"Content-Type":"application/json",...l.headers};const c=`${t}-${e}`;return await fa.executeRequest(c,async()=>{const f=await fetch(o,l);return await pa(f),f},{maxRequests:s==="high"?10:s==="medium"?6:3,windowMs:1e3,backoffMultiplier:s==="high"?1.2:s==="medium"?1.5:2,maxBackoffMs:s==="high"?2e3:s==="medium"?3e3:5e3,priority:s})}const ma=({on401:t,priority:e="medium"})=>async({queryKey:n})=>{const r=n[0],s=`${ha}${r}`,o=localStorage.getItem("medusavr_access_token"),i=o?{Authorization:`Bearer ${o}`}:{},l=`GET-${r}`;return await fa.executeRequest(l,async()=>{const u=await fetch(s,{headers:i,credentials:"include"});return await pa(u),u.json()},{maxRequests:e==="high"?10:e==="medium"?6:3,windowMs:1e3,backoffMultiplier:e==="high"?1.2:e==="medium"?1.5:2,maxBackoffMs:e==="high"?2e3:e==="medium"?3e3:5e3,priority:e})},ga=new Bu({defaultOptions:{queries:{queryFn:ma({on401:"throw",priority:"medium"}),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:5*6e4,retry:(t,e)=>e?.isRateLimit||e?.status===429||e?.status>=400&&e?.status<500&&e?.status!==408?!1:t<1,retryDelay:t=>{const e=Math.min(3e3*2**t,3e4),n=Math.random()*.3*e;return e+n}},mutations:{retry:(t,e)=>(e?.isRateLimit||e?.status===429||e?.status>=400&&e?.status<500,!1)}}});typeof window<"u"&&window.addEventListener("unhandledrejection",t=>{t.reason?.isRateLimit&&(t.preventDefault(),console.info("‚è≥ Rate limit error handled gracefully"))});const yE=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:_,getQueryFn:ma,queryClient:ga},Symbol.toStringTag,{value:"Module"}));var Ed=typeof Element<"u",Td=typeof Map=="function",_d=typeof Set=="function",Sd=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Ln(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Ln(t[r],e[r]))return!1;return!0}var o;if(Td&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!Ln(r.value[1],e.get(r.value[0])))return!1;return!0}if(_d&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(Sd&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(Ed&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!Ln(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var Id=function(e,n){try{return Ln(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const Cd=Fs(Id);var Pd=function(t,e,n,r,s,o,i,l){if(!t){var c;if(e===void 0)c=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,o,i,l],f=0;c=new Error(e.replace(/%s/g,function(){return u[f++]})),c.name="Invariant Violation"}throw c.framesToPop=1,c}},Ad=Pd;const jo=Fs(Ad);var Nd=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var i=Object.keys(e),l=Object.keys(n);if(i.length!==l.length)return!1;for(var c=Object.prototype.hasOwnProperty.bind(n),u=0;u<i.length;u++){var f=i[u];if(!c(f))return!1;var h=e[f],p=n[f];if(o=r?r.call(s,h,p,f):void 0,o===!1||o===void 0&&h!==p)return!1}return!0};const kd=Fs(Nd);var ya=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(ya||{}),Lr={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Ro=Object.values(ya),Us={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},jd=Object.entries(Us).reduce((t,[e,n])=>(t[n]=e,t),{}),de="data-rh",Dt={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Lt=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},Rd=t=>{let e=Lt(t,"title");const n=Lt(t,Dt.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Lt(t,Dt.DEFAULT_TITLE);return e||r||void 0},Od=t=>Lt(t,Dt.ON_CHANGE_CLIENT_STATE)||(()=>{}),Fr=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),Dd=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const l=s[o].toLowerCase();if(t.indexOf(l)!==-1&&r[l])return n.concat(r)}}return n},[]),Ld=t=>console&&typeof console.warn=="function"&&console.warn(t),Jt=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&Ld(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const i={};o.filter(c=>{let u;const f=Object.keys(c);for(let p=0;p<f.length;p+=1){const m=f[p],g=m.toLowerCase();e.indexOf(g)!==-1&&!(u==="rel"&&c[u].toLowerCase()==="canonical")&&!(g==="rel"&&c[g].toLowerCase()==="stylesheet")&&(u=g),e.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(u=m)}if(!u||!c[u])return!1;const h=c[u].toLowerCase();return r[u]||(r[u]={}),i[u]||(i[u]={}),r[u][h]?!1:(i[u][h]=!0,!0)}).reverse().forEach(c=>s.push(c));const l=Object.keys(i);for(let c=0;c<l.length;c+=1){const u=l[c],f={...r[u],...i[u]};r[u]=f}return s},[]).reverse()},Fd=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},Md=t=>({baseTag:Dd(["href"],t),bodyAttributes:Fr("bodyAttributes",t),defer:Lt(t,Dt.DEFER),encode:Lt(t,Dt.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:Fr("htmlAttributes",t),linkTags:Jt("link",["rel","href"],t),metaTags:Jt("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Jt("noscript",["innerHTML"],t),onChangeClientState:Od(t),scriptTags:Jt("script",["src","innerHTML"],t),styleTags:Jt("style",["cssText"],t),title:Rd(t),titleAttributes:Fr("titleAttributes",t),prioritizeSeoTags:Fd(t,Dt.PRIORITIZE_SEO_TAGS)}),va=t=>Array.isArray(t)?t.join(""):t,$d=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Mr=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>($d(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},Oo=(t,e)=>({...t,[e]:void 0}),Ud=["noscript","script","style"],ls=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),wa=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),zd=(t,e,n,r)=>{const s=wa(n),o=va(e);return s?`<${t} ${de}="true" ${s}>${ls(o,r)}</${t}>`:`<${t} ${de}="true">${ls(o,r)}</${t}>`},Vd=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,i=Object.keys(o).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,f)=>{const h=typeof o[f]>"u"?f:`${f}="${ls(o[f],n)}"`;return u?`${u} ${h}`:h},""),l=o.innerHTML||o.cssText||"",c=Ud.indexOf(t)===-1;return`${r}<${t} ${de}="true" ${i}${c?"/>":`>${l}</${t}>`}`},""),ba=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Us[r];return n[s||r]=t[r],n},e),Hd=(t,e,n)=>{const r={key:e,[de]:!0},s=ba(n,r);return[N.createElement("title",s,e)]},Fn=(t,e)=>e.map((n,r)=>{const s={key:r,[de]:!0};return Object.keys(n).forEach(o=>{const l=Us[o]||o;if(l==="innerHTML"||l==="cssText"){const c=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:c}}else s[l]=n[o]}),N.createElement(t,s)}),le=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>Hd(t,e.title,e.titleAttributes),toString:()=>zd(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>ba(e),toString:()=>wa(e)};default:return{toComponent:()=>Fn(t,e),toString:()=>Vd(t,e,n)}}},Wd=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=Mr(t,Lr.meta),o=Mr(e,Lr.link),i=Mr(n,Lr.script);return{priorityMethods:{toComponent:()=>[...Fn("meta",s.priority),...Fn("link",o.priority),...Fn("script",i.priority)],toString:()=>`${le("meta",s.priority,r)} ${le("link",o.priority,r)} ${le("script",i.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:i.default}},Bd=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:i,title:l="",titleAttributes:c,prioritizeSeoTags:u}=t;let{linkTags:f,metaTags:h,scriptTags:p}=t,m={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:m,linkTags:f,metaTags:h,scriptTags:p}=Wd(t)),{priority:m,base:le("base",e,r),bodyAttributes:le("bodyAttributes",n,r),htmlAttributes:le("htmlAttributes",s,r),link:le("link",f,r),meta:le("meta",h,r),noscript:le("noscript",o,r),script:le("script",p,r),style:le("style",i,r),title:le("title",{title:l,titleAttributes:c},r)}},us=Bd,In=[],xa=!!(typeof window<"u"&&window.document&&window.document.createElement),ds=class{constructor(t,e){Re(this,"instances",[]);Re(this,"canUseDOM",xa);Re(this,"context");Re(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?In:this.instances,add:t=>{(this.canUseDOM?In:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?In:this.instances).indexOf(t);(this.canUseDOM?In:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=us({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},qd={},Ea=N.createContext(qd),Et,zs=(Et=class extends d.Component{constructor(n){super(n);Re(this,"helmetData");this.helmetData=new ds(this.props.context||{},Et.canUseDOM)}render(){return N.createElement(Ea.Provider,{value:this.helmetData.value},this.props.children)}},Re(Et,"canUseDOM",xa),Et),Rt=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${de}]`),s=[].slice.call(r),o=[];let i;return e&&e.length&&e.forEach(l=>{const c=document.createElement(t);for(const u in l)if(Object.prototype.hasOwnProperty.call(l,u))if(u==="innerHTML")c.innerHTML=l.innerHTML;else if(u==="cssText")c.styleSheet?c.styleSheet.cssText=l.cssText:c.appendChild(document.createTextNode(l.cssText));else{const f=u,h=typeof l[f]>"u"?"":l[f];c.setAttribute(u,h)}c.setAttribute(de,"true"),s.some((u,f)=>(i=f,c.isEqualNode(u)))?s.splice(i,1):o.push(c)}),s.forEach(l=>l.parentNode?.removeChild(l)),o.forEach(l=>n.appendChild(l)),{oldTags:s,newTags:o}},fs=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(de),s=r?r.split(","):[],o=[...s],i=Object.keys(e);for(const l of i){const c=e[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),s.indexOf(l)===-1&&s.push(l);const u=o.indexOf(l);u!==-1&&o.splice(u,1)}for(let l=o.length-1;l>=0;l-=1)n.removeAttribute(o[l]);s.length===o.length?n.removeAttribute(de):n.getAttribute(de)!==i.join(",")&&n.setAttribute(de,i.join(","))},Gd=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=va(t)),fs("title",e)},Do=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:i,noscriptTags:l,onChangeClientState:c,scriptTags:u,styleTags:f,title:h,titleAttributes:p}=t;fs("body",r),fs("html",s),Gd(h,p);const m={baseTag:Rt("base",n),linkTags:Rt("link",o),metaTags:Rt("meta",i),noscriptTags:Rt("noscript",l),scriptTags:Rt("script",u),styleTags:Rt("style",f)},g={},w={};Object.keys(m).forEach(v=>{const{newTags:x,oldTags:y}=m[v];x.length&&(g[v]=x),y.length&&(w[v]=m[v].oldTags)}),e&&e(),c(t,g,w)},Xt=null,Kd=t=>{Xt&&cancelAnimationFrame(Xt),t.defer?Xt=requestAnimationFrame(()=>{Do(t,()=>{Xt=null})}):(Do(t),Xt=null)},Yd=Kd,Lo=class extends d.Component{constructor(){super(...arguments);Re(this,"rendered",!1)}shouldComponentUpdate(e){return!kd(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=Md(e.get().map(o=>{const i={...o.props};return delete i.context,i}));zs.canUseDOM?Yd(s):us&&(r=us(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},is,vE=(is=class extends d.Component{shouldComponentUpdate(t){return!Cd(Oo(this.props,"helmetData"),Oo(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return jo(Ro.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ro.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),jo(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return N.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,i=Object.keys(o).reduce((c,u)=>(c[jd[u]||u]=o[u],c),{});let{type:l}=r;switch(typeof l=="symbol"?l=l.toString():this.warnOnInvalidChildren(r,s),l){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,i,s);break;default:e=this.mapObjectTypeChildren(r,e,i,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof ds)){const s=r;r=new ds(s.context,!0),delete n.helmetData}return r?N.createElement(Lo,{...n,context:r.value}):N.createElement(Ea.Consumer,null,s=>N.createElement(Lo,{...n,context:s}))}},Re(is,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),is);const Jd=1,Xd=7e3;let $r=0;function Qd(){return $r=($r+1)%Number.MAX_SAFE_INTEGER,$r.toString()}const Ur=new Map,Fo=t=>{if(Ur.has(t))return;const e=setTimeout(()=>{Ur.delete(t),nn({type:"REMOVE_TOAST",toastId:t})},Xd);Ur.set(t,e)},Zd=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Jd)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?Fo(n):t.toasts.forEach(r=>{Fo(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},Mn=[];let $n={toasts:[]};function nn(t){$n=Zd($n,t),Mn.forEach(e=>{e($n)})}function ef({...t}){const e=Qd(),n=s=>nn({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>nn({type:"DISMISS_TOAST",toastId:e});return nn({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Vs(){const[t,e]=d.useState($n);return d.useEffect(()=>(Mn.push(e),()=>{const n=Mn.indexOf(e);n>-1&&Mn.splice(n,1)}),[t]),{...t,toast:ef,dismiss:n=>nn({type:"DISMISS_TOAST",toastId:n})}}var tf=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),nf="VisuallyHidden",dr=d.forwardRef((t,e)=>a.jsx(ae.span,{...t,ref:e,style:{...tf,...t.style}}));dr.displayName=nf;var rf=dr,Hs="ToastProvider",[Ws,sf,of]=Ru("Toast"),[Ta,wE]=Ds("Toast",[of]),[af,fr]=Ta(Hs),_a=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=t,[l,c]=d.useState(null),[u,f]=d.useState(0),h=d.useRef(!1),p=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${Hs}\`. Expected non-empty \`string\`.`),a.jsx(Ws.Provider,{scope:e,children:a.jsx(af,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:l,onViewportChange:c,onToastAdd:d.useCallback(()=>f(m=>m+1),[]),onToastRemove:d.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};_a.displayName=Hs;var Sa="ToastViewport",cf=["F8"],hs="toast.viewportPause",ps="toast.viewportResume",Ia=d.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=cf,label:s="Notifications ({hotkey})",...o}=t,i=fr(Sa,n),l=sf(n),c=d.useRef(null),u=d.useRef(null),f=d.useRef(null),h=d.useRef(null),p=Wt(e,h,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;d.useEffect(()=>{const v=x=>{r.length!==0&&r.every(b=>x[b]||x.code===b)&&h.current?.focus()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),d.useEffect(()=>{const v=c.current,x=h.current;if(g&&v&&x){const y=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(hs);x.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(ps);x.dispatchEvent(S),i.isClosePausedRef.current=!1}},E=S=>{!v.contains(S.relatedTarget)&&b()},T=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",y),v.addEventListener("focusout",E),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",T),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",E),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",T),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[g,i.isClosePausedRef]);const w=d.useCallback(({tabbingDirection:v})=>{const y=l().map(b=>{const E=b.ref.current,T=[E,...xf(E)];return v==="forwards"?T:T.reverse()});return(v==="forwards"?y.reverse():y).flat()},[l]);return d.useEffect(()=>{const v=h.current;if(v){const x=y=>{const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const T=document.activeElement,S=y.shiftKey;if(y.target===v&&S){u.current?.focus();return}const z=w({tabbingDirection:S?"backwards":"forwards"}),O=z.findIndex($=>$===T);zr(z.slice(O+1))?y.preventDefault():S?u.current?.focus():f.current?.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[l,w]),a.jsxs(Ou,{ref:c,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&a.jsx(ms,{ref:u,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"forwards"});zr(v)}}),a.jsx(Ws.Slot,{scope:n,children:a.jsx(ae.ol,{tabIndex:-1,...o,ref:p})}),g&&a.jsx(ms,{ref:f,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"backwards"});zr(v)}})]})});Ia.displayName=Sa;var Ca="ToastFocusProxy",ms=d.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=fr(Ca,n);return a.jsx(dr,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:i=>{const l=i.relatedTarget;!o.viewport?.contains(l)&&r()}})});ms.displayName=Ca;var pn="Toast",lf="toast.swipeStart",uf="toast.swipeMove",df="toast.swipeCancel",ff="toast.swipeEnd",Pa=d.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=t,[l,c]=Du({prop:r,defaultProp:s??!0,onChange:o,caller:pn});return a.jsx(ra,{present:n||l,children:a.jsx(mf,{open:l,...i,ref:e,onClose:()=>c(!1),onPause:ln(t.onPause),onResume:ln(t.onResume),onSwipeStart:Y(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(t.onSwipeMove,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Y(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(t.onSwipeEnd,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),c(!1)})})})});Pa.displayName=pn;var[hf,pf]=Ta(pn,{onClose(){}}),mf=d.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:l,onPause:c,onResume:u,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...g}=t,w=fr(pn,n),[v,x]=d.useState(null),y=Wt(e,I=>x(I)),b=d.useRef(null),E=d.useRef(null),T=s||w.duration,S=d.useRef(0),k=d.useRef(T),M=d.useRef(0),{onToastAdd:z,onToastRemove:O}=w,$=ln(()=>{v?.contains(document.activeElement)&&w.viewport?.focus(),i()}),D=d.useCallback(I=>{!I||I===1/0||(window.clearTimeout(M.current),S.current=new Date().getTime(),M.current=window.setTimeout($,I))},[$]);d.useEffect(()=>{const I=w.viewport;if(I){const H=()=>{D(k.current),u?.()},U=()=>{const V=new Date().getTime()-S.current;k.current=k.current-V,window.clearTimeout(M.current),c?.()};return I.addEventListener(hs,U),I.addEventListener(ps,H),()=>{I.removeEventListener(hs,U),I.removeEventListener(ps,H)}}},[w.viewport,T,c,u,D]),d.useEffect(()=>{o&&!w.isClosePausedRef.current&&D(T)},[o,T,w.isClosePausedRef,D]),d.useEffect(()=>(z(),()=>O()),[z,O]);const F=d.useMemo(()=>v?Da(v):null,[v]);return w.viewport?a.jsxs(a.Fragment,{children:[F&&a.jsx(gf,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:F}),a.jsx(hf,{scope:n,onClose:$,children:cr.createPortal(a.jsx(Ws.ItemSlot,{scope:n,children:a.jsx(Lu,{asChild:!0,onEscapeKeyDown:Y(l,()=>{w.isFocusedToastEscapeKeyDownRef.current||$(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:a.jsx(ae.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":w.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Y(t.onKeyDown,I=>{I.key==="Escape"&&(l?.(I.nativeEvent),I.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:Y(t.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:Y(t.onPointerMove,I=>{if(!b.current)return;const H=I.clientX-b.current.x,U=I.clientY-b.current.y,V=!!E.current,j=["left","right"].includes(w.swipeDirection),W=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,K=j?W(0,H):0,ne=j?0:W(0,U),Ne=I.pointerType==="touch"?10:2,L={x:K,y:ne},ke={originalEvent:I,delta:L};V?(E.current=L,Cn(uf,h,ke,{discrete:!1})):Mo(L,w.swipeDirection,Ne)?(E.current=L,Cn(lf,f,ke,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>Ne||Math.abs(U)>Ne)&&(b.current=null)}),onPointerUp:Y(t.onPointerUp,I=>{const H=E.current,U=I.target;if(U.hasPointerCapture(I.pointerId)&&U.releasePointerCapture(I.pointerId),E.current=null,b.current=null,H){const V=I.currentTarget,j={originalEvent:I,delta:H};Mo(H,w.swipeDirection,w.swipeThreshold)?Cn(ff,m,j,{discrete:!0}):Cn(df,p,j,{discrete:!0}),V.addEventListener("click",W=>W.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),gf=t=>{const{__scopeToast:e,children:n,...r}=t,s=fr(pn,e),[o,i]=d.useState(!1),[l,c]=d.useState(!1);return wf(()=>i(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>c(!0),1e3);return()=>window.clearTimeout(u)},[]),l?null:a.jsx(Fu,{asChild:!0,children:a.jsx(dr,{...r,children:o&&a.jsxs(a.Fragment,{children:[s.label," ",n]})})})},yf="ToastTitle",Aa=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ae.div,{...r,ref:e})});Aa.displayName=yf;var vf="ToastDescription",Na=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return a.jsx(ae.div,{...r,ref:e})});Na.displayName=vf;var ka="ToastAction",ja=d.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?a.jsx(Oa,{altText:n,asChild:!0,children:a.jsx(Bs,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ka}\`. Expected non-empty \`string\`.`),null)});ja.displayName=ka;var Ra="ToastClose",Bs=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=pf(Ra,n);return a.jsx(Oa,{asChild:!0,children:a.jsx(ae.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,s.onClose)})})});Bs.displayName=Ra;var Oa=d.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return a.jsx(ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function Da(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),bf(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(...Da(r))}}),e}function Cn(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Mu(s,o):s.dispatchEvent(o)}var Mo=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function wf(t=()=>{}){const e=ln(t);Bn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function bf(t){return t.nodeType===t.ELEMENT_NODE}function xf(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function zr(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var Ef=_a,La=Ia,Fa=Pa,Ma=Aa,$a=Na,Ua=ja,za=Bs;function G(...t){return Gu(ft(t))}function Tf(t,e=6){if(t===0)return"0";if(t>=1e9){const n=(t/1e9).toFixed(1)+"B";return n.length>e?`${n.slice(0,e-3)}...`:n}else if(t>=1e6){const n=(t/1e6).toFixed(1)+"M";return n.length>e?`${n.slice(0,e-3)}...`:n}else if(t>=1e4){const n=(t/1e3).toFixed(1)+"K";return n.length>e?`${n.slice(0,e-3)}...`:n}else{const n=t.toLocaleString();return n.length>e?`${n.slice(0,e-3)}...`:n}}const _f=Ef,Va=d.forwardRef(({className:t,...e},n)=>a.jsx(La,{ref:n,className:G("fixed top-16 right-4 z-[100] flex max-h-screen w-full max-w-[280px] sm:max-w-[360px] flex-col gap-2 pointer-events-none sm:top-20",t),...e}));Va.displayName=La.displayName;const Sf=ur("group pointer-events-auto relative flex w-full items-center justify-between space-x-3 overflow-hidden rounded-xl border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full backdrop-blur-xl",{variants:{variant:{default:"border-orange-500/30 bg-gradient-to-r from-zinc-800/90 to-zinc-900/90 text-white shadow-orange-500/10",destructive:"destructive group border-red-500/30 bg-gradient-to-r from-red-900/80 to-red-800/80 text-red-100 shadow-red-500/10"}},defaultVariants:{variant:"default"}}),Ha=d.forwardRef(({className:t,variant:e,...n},r)=>a.jsx(Fa,{ref:r,className:G(Sf({variant:e}),t),...n}));Ha.displayName=Fa.displayName;const If=d.forwardRef(({className:t,...e},n)=>a.jsx(Ua,{ref:n,className:G("inline-flex h-7 shrink-0 items-center justify-center rounded-md border border-orange-500/30 bg-transparent px-3 text-xs font-medium text-orange-300 transition-colors hover:bg-orange-500/20 hover:text-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-500/40 group-[.destructive]:hover:border-red-400/30 group-[.destructive]:hover:bg-red-500/20 group-[.destructive]:hover:text-red-100 group-[.destructive]:focus:ring-red-400",t),...e}));If.displayName=Ua.displayName;const Wa=d.forwardRef(({className:t,...e},n)=>a.jsx(za,{ref:n,className:G("absolute right-2 top-2 rounded-md p-1 text-orange-300/50 opacity-0 transition-opacity hover:text-orange-200 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-orange-500 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:a.jsx(Bt,{className:"h-3 w-3"})}));Wa.displayName=za.displayName;const Ba=d.forwardRef(({className:t,...e},n)=>a.jsx(Ma,{ref:n,className:G("text-sm font-semibold text-orange-200",t),...e}));Ba.displayName=Ma.displayName;const qa=d.forwardRef(({className:t,...e},n)=>a.jsx($a,{ref:n,className:G("text-xs text-orange-100/80",t),...e}));qa.displayName=$a.displayName;function Cf(){const{toasts:t}=Vs();return a.jsxs(_f,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return a.jsxs(Ha,{...o,children:[a.jsxs("div",{className:"grid gap-1",children:[n&&a.jsx(Ba,{children:n}),r&&a.jsx(qa,{children:r})]}),s,a.jsx(Wa,{})]},e)}),a.jsx(Va,{})]})}const Pf=["top","right","bottom","left"],it=Math.min,se=Math.max,qn=Math.round,Pn=Math.floor,be=t=>({x:t,y:t}),Af={left:"right",right:"left",bottom:"top",top:"bottom"},Nf={start:"end",end:"start"};function gs(t,e,n){return se(t,it(e,n))}function $e(t,e){return typeof t=="function"?t(e):t}function Ue(t){return t.split("-")[0]}function qt(t){return t.split("-")[1]}function qs(t){return t==="x"?"y":"x"}function Gs(t){return t==="y"?"height":"width"}const kf=new Set(["top","bottom"]);function we(t){return kf.has(Ue(t))?"y":"x"}function Ks(t){return qs(we(t))}function jf(t,e,n){n===void 0&&(n=!1);const r=qt(t),s=Ks(t),o=Gs(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=Gn(i)),[i,Gn(i)]}function Rf(t){const e=Gn(t);return[ys(t),e,ys(e)]}function ys(t){return t.replace(/start|end/g,e=>Nf[e])}const $o=["left","right"],Uo=["right","left"],Of=["top","bottom"],Df=["bottom","top"];function Lf(t,e,n){switch(t){case"top":case"bottom":return n?e?Uo:$o:e?$o:Uo;case"left":case"right":return e?Of:Df;default:return[]}}function Ff(t,e,n,r){const s=qt(t);let o=Lf(Ue(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(ys)))),o}function Gn(t){return t.replace(/left|right|bottom|top/g,e=>Af[e])}function Mf(t){return{top:0,right:0,bottom:0,left:0,...t}}function Ga(t){return typeof t!="number"?Mf(t):{top:t,right:t,bottom:t,left:t}}function Kn(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function zo(t,e,n){let{reference:r,floating:s}=t;const o=we(e),i=Ks(e),l=Gs(i),c=Ue(e),u=o==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[l]/2-s[l]/2;let m;switch(c){case"top":m={x:f,y:r.y-s.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(qt(e)){case"start":m[i]-=p*(n&&u?-1:1);break;case"end":m[i]+=p*(n&&u?-1:1);break}return m}const $f=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,l=o.filter(Boolean),c=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:h}=zo(u,r,c),p=r,m={},g=0;for(let w=0;w<l.length;w++){const{name:v,fn:x}=l[w],{x:y,y:b,data:E,reset:T}=await x({x:f,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:t,floating:e}});f=y??f,h=b??h,m={...m,[v]:{...m[v],...E}},T&&g<=50&&(g++,typeof T=="object"&&(T.placement&&(p=T.placement),T.rects&&(u=T.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):T.rects),{x:f,y:h}=zo(u,p,c)),w=-1)}return{x:f,y:h,placement:p,strategy:s,middlewareData:m}};async function un(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:l,strategy:c}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=$e(e,t),g=Ga(m),v=l[p?h==="floating"?"reference":"floating":h],x=Kn(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(l.floating)),boundary:u,rootBoundary:f,strategy:c})),y=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l.floating)),E=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},T=Kn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:l,rect:y,offsetParent:b,strategy:c}):y);return{top:(x.top-T.top+g.top)/E.y,bottom:(T.bottom-x.bottom+g.bottom)/E.y,left:(x.left-T.left+g.left)/E.x,right:(T.right-x.right+g.right)/E.x}}const Uf=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:l,middlewareData:c}=e,{element:u,padding:f=0}=$e(t,e)||{};if(u==null)return{};const h=Ga(f),p={x:n,y:r},m=Ks(s),g=Gs(m),w=await i.getDimensions(u),v=m==="y",x=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",E=o.reference[g]+o.reference[m]-p[m]-o.floating[g],T=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let k=S?S[b]:0;(!k||!await(i.isElement==null?void 0:i.isElement(S)))&&(k=l.floating[b]||o.floating[g]);const M=E/2-T/2,z=k/2-w[g]/2-1,O=it(h[x],z),$=it(h[y],z),D=O,F=k-w[g]-$,I=k/2-w[g]/2+M,H=gs(D,I,F),U=!c.arrow&&qt(s)!=null&&I!==H&&o.reference[g]/2-(I<D?O:$)-w[g]/2<0,V=U?I<D?I-D:I-F:0;return{[m]:p[m]+V,data:{[m]:H,centerOffset:I-H-V,...U&&{alignmentOffset:V}},reset:U}}}),zf=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:l,platform:c,elements:u}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...v}=$e(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Ue(s),y=we(l),b=Ue(l)===l,E=await(c.isRTL==null?void 0:c.isRTL(u.floating)),T=p||(b||!w?[Gn(l)]:Rf(l)),S=g!=="none";!p&&S&&T.push(...Ff(l,w,g,E));const k=[l,...T],M=await un(e,v),z=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&z.push(M[x]),h){const I=jf(s,i,E);z.push(M[I[0]],M[I[1]])}if(O=[...O,{placement:s,overflows:z}],!z.every(I=>I<=0)){var $,D;const I=((($=o.flip)==null?void 0:$.index)||0)+1,H=k[I];if(H&&(!(h==="alignment"?y!==we(H):!1)||O.every(j=>we(j.placement)===y?j.overflows[0]>0:!0)))return{data:{index:I,overflows:O},reset:{placement:H}};let U=(D=O.filter(V=>V.overflows[0]<=0).sort((V,j)=>V.overflows[1]-j.overflows[1])[0])==null?void 0:D.placement;if(!U)switch(m){case"bestFit":{var F;const V=(F=O.filter(j=>{if(S){const W=we(j.placement);return W===y||W==="y"}return!0}).map(j=>[j.placement,j.overflows.filter(W=>W>0).reduce((W,K)=>W+K,0)]).sort((j,W)=>j[1]-W[1])[0])==null?void 0:F[0];V&&(U=V);break}case"initialPlacement":U=l;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function Vo(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function Ho(t){return Pf.some(e=>t[e]>=0)}const Vf=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$e(t,e);switch(r){case"referenceHidden":{const o=await un(e,{...s,elementContext:"reference"}),i=Vo(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:Ho(i)}}}case"escaped":{const o=await un(e,{...s,altBoundary:!0}),i=Vo(o,n.floating);return{data:{escapedOffsets:i,escaped:Ho(i)}}}default:return{}}}}},Ka=new Set(["left","top"]);async function Hf(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ue(n),l=qt(n),c=we(n)==="y",u=Ka.has(i)?-1:1,f=o&&c?-1:1,h=$e(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return l&&typeof g=="number"&&(m=l==="end"?g*-1:g),c?{x:m*f,y:p*u}:{x:p*u,y:m*f}}const Wf=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:l}=e,c=await Hf(e,t);return i===((n=l.offset)==null?void 0:n.placement)&&(r=l.arrow)!=null&&r.alignmentOffset?{}:{x:s+c.x,y:o+c.y,data:{...c,placement:i}}}}},Bf=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:l={fn:v=>{let{x,y}=v;return{x,y}}},...c}=$e(t,e),u={x:n,y:r},f=await un(e,c),h=we(Ue(s)),p=qs(h);let m=u[p],g=u[h];if(o){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",y=m+f[v],b=m-f[x];m=gs(y,m,b)}if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=g+f[v],b=g-f[x];g=gs(y,g,b)}const w=l.fn({...e,[p]:m,[h]:g});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[p]:o,[h]:i}}}}}},qf=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:l=0,mainAxis:c=!0,crossAxis:u=!0}=$e(t,e),f={x:n,y:r},h=we(s),p=qs(h);let m=f[p],g=f[h];const w=$e(l,e),v=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(c){const b=p==="y"?"height":"width",E=o.reference[p]-o.floating[b]+v.mainAxis,T=o.reference[p]+o.reference[b]-v.mainAxis;m<E?m=E:m>T&&(m=T)}if(u){var x,y;const b=p==="y"?"width":"height",E=Ka.has(Ue(s)),T=o.reference[h]-o.floating[b]+(E&&((x=i.offset)==null?void 0:x[h])||0)+(E?0:v.crossAxis),S=o.reference[h]+o.reference[b]+(E?0:((y=i.offset)==null?void 0:y[h])||0)-(E?v.crossAxis:0);g<T?g=T:g>S&&(g=S)}return{[p]:m,[h]:g}}}},Gf=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:i,elements:l}=e,{apply:c=()=>{},...u}=$e(t,e),f=await un(e,u),h=Ue(s),p=qt(s),m=we(s)==="y",{width:g,height:w}=o.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=p===(await(i.isRTL==null?void 0:i.isRTL(l.floating))?"start":"end")?"left":"right"):(x=h,v=p==="end"?"top":"bottom");const y=w-f.top-f.bottom,b=g-f.left-f.right,E=it(w-f[v],y),T=it(g-f[x],b),S=!e.middlewareData.shift;let k=E,M=T;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(M=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(k=y),S&&!p){const O=se(f.left,0),$=se(f.right,0),D=se(f.top,0),F=se(f.bottom,0);m?M=g-2*(O!==0||$!==0?O+$:se(f.left,f.right)):k=w-2*(D!==0||F!==0?D+F:se(f.top,f.bottom))}await c({...e,availableWidth:M,availableHeight:k});const z=await i.getDimensions(l.floating);return g!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function hr(){return typeof window<"u"}function Gt(t){return Ya(t)?(t.nodeName||"").toLowerCase():"#document"}function oe(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ce(t){var e;return(e=(Ya(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Ya(t){return hr()?t instanceof Node||t instanceof oe(t).Node:!1}function me(t){return hr()?t instanceof Element||t instanceof oe(t).Element:!1}function _e(t){return hr()?t instanceof HTMLElement||t instanceof oe(t).HTMLElement:!1}function Wo(t){return!hr()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof oe(t).ShadowRoot}const Kf=new Set(["inline","contents"]);function mn(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ge(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!Kf.has(s)}const Yf=new Set(["table","td","th"]);function Jf(t){return Yf.has(Gt(t))}const Xf=[":popover-open",":modal"];function pr(t){return Xf.some(e=>{try{return t.matches(e)}catch{return!1}})}const Qf=["transform","translate","scale","rotate","perspective"],Zf=["transform","translate","scale","rotate","perspective","filter"],eh=["paint","layout","strict","content"];function Ys(t){const e=Js(),n=me(t)?ge(t):t;return Qf.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Zf.some(r=>(n.willChange||"").includes(r))||eh.some(r=>(n.contain||"").includes(r))}function th(t){let e=at(t);for(;_e(e)&&!zt(e);){if(Ys(e))return e;if(pr(e))return null;e=at(e)}return null}function Js(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const nh=new Set(["html","body","#document"]);function zt(t){return nh.has(Gt(t))}function ge(t){return oe(t).getComputedStyle(t)}function mr(t){return me(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function at(t){if(Gt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Wo(t)&&t.host||Ce(t);return Wo(e)?e.host:e}function Ja(t){const e=at(t);return zt(e)?t.ownerDocument?t.ownerDocument.body:t.body:_e(e)&&mn(e)?e:Ja(e)}function dn(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=Ja(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=oe(s);if(o){const l=vs(i);return e.concat(i,i.visualViewport||[],mn(s)?s:[],l&&n?dn(l):[])}return e.concat(s,dn(s,[],n))}function vs(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Xa(t){const e=ge(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_e(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,l=qn(n)!==o||qn(r)!==i;return l&&(n=o,r=i),{width:n,height:r,$:l}}function Xs(t){return me(t)?t:t.contextElement}function Ft(t){const e=Xs(t);if(!_e(e))return be(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=Xa(e);let i=(o?qn(n.width):n.width)/r,l=(o?qn(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!l||!Number.isFinite(l))&&(l=1),{x:i,y:l}}const rh=be(0);function Qa(t){const e=oe(t);return!Js()||!e.visualViewport?rh:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function sh(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==oe(t)?!1:e}function _t(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Xs(t);let i=be(1);e&&(r?me(r)&&(i=Ft(r)):i=Ft(t));const l=sh(o,n,r)?Qa(o):be(0);let c=(s.left+l.x)/i.x,u=(s.top+l.y)/i.y,f=s.width/i.x,h=s.height/i.y;if(o){const p=oe(o),m=r&&me(r)?oe(r):r;let g=p,w=vs(g);for(;w&&r&&m!==g;){const v=Ft(w),x=w.getBoundingClientRect(),y=ge(w),b=x.left+(w.clientLeft+parseFloat(y.paddingLeft))*v.x,E=x.top+(w.clientTop+parseFloat(y.paddingTop))*v.y;c*=v.x,u*=v.y,f*=v.x,h*=v.y,c+=b,u+=E,g=oe(w),w=vs(g)}}return Kn({width:f,height:h,x:c,y:u})}function gr(t,e){const n=mr(t).scrollLeft;return e?e.left+n:_t(Ce(t)).left+n}function Za(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-gr(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function oh(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=Ce(r),l=e?pr(e.floating):!1;if(r===i||l&&o)return n;let c={scrollLeft:0,scrollTop:0},u=be(1);const f=be(0),h=_e(r);if((h||!h&&!o)&&((Gt(r)!=="body"||mn(i))&&(c=mr(r)),_e(r))){const m=_t(r);u=Ft(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const p=i&&!h&&!o?Za(i,c):be(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-c.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-c.scrollTop*u.y+f.y+p.y}}function ih(t){return Array.from(t.getClientRects())}function ah(t){const e=Ce(t),n=mr(t),r=t.ownerDocument.body,s=se(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=se(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+gr(t);const l=-n.scrollTop;return ge(r).direction==="rtl"&&(i+=se(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:l}}const Bo=25;function ch(t,e){const n=oe(t),r=Ce(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,l=0,c=0;if(s){o=s.width,i=s.height;const f=Js();(!f||f&&e==="fixed")&&(l=s.offsetLeft,c=s.offsetTop)}const u=gr(r);if(u<=0){const f=r.ownerDocument,h=f.body,p=getComputedStyle(h),m=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,g=Math.abs(r.clientWidth-h.clientWidth-m);g<=Bo&&(o-=g)}else u<=Bo&&(o+=u);return{width:o,height:i,x:l,y:c}}const lh=new Set(["absolute","fixed"]);function uh(t,e){const n=_t(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=_e(t)?Ft(t):be(1),i=t.clientWidth*o.x,l=t.clientHeight*o.y,c=s*o.x,u=r*o.y;return{width:i,height:l,x:c,y:u}}function qo(t,e,n){let r;if(e==="viewport")r=ch(t,n);else if(e==="document")r=ah(Ce(t));else if(me(e))r=uh(e,n);else{const s=Qa(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Kn(r)}function ec(t,e){const n=at(t);return n===e||!me(n)||zt(n)?!1:ge(n).position==="fixed"||ec(n,e)}function dh(t,e){const n=e.get(t);if(n)return n;let r=dn(t,[],!1).filter(l=>me(l)&&Gt(l)!=="body"),s=null;const o=ge(t).position==="fixed";let i=o?at(t):t;for(;me(i)&&!zt(i);){const l=ge(i),c=Ys(i);!c&&l.position==="fixed"&&(s=null),(o?!c&&!s:!c&&l.position==="static"&&!!s&&lh.has(s.position)||mn(i)&&!c&&ec(t,i))?r=r.filter(f=>f!==i):s=l,i=at(i)}return e.set(t,r),r}function fh(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?pr(e)?[]:dh(e,this._c):[].concat(n),r],l=i[0],c=i.reduce((u,f)=>{const h=qo(e,f,s);return u.top=se(h.top,u.top),u.right=it(h.right,u.right),u.bottom=it(h.bottom,u.bottom),u.left=se(h.left,u.left),u},qo(e,l,s));return{width:c.right-c.left,height:c.bottom-c.top,x:c.left,y:c.top}}function hh(t){const{width:e,height:n}=Xa(t);return{width:e,height:n}}function ph(t,e,n){const r=_e(e),s=Ce(e),o=n==="fixed",i=_t(t,!0,o,e);let l={scrollLeft:0,scrollTop:0};const c=be(0);function u(){c.x=gr(s)}if(r||!r&&!o)if((Gt(e)!=="body"||mn(s))&&(l=mr(e)),r){const m=_t(e,!0,o,e);c.x=m.x+e.clientLeft,c.y=m.y+e.clientTop}else s&&u();o&&!r&&s&&u();const f=s&&!r&&!o?Za(s,l):be(0),h=i.left+l.scrollLeft-c.x-f.x,p=i.top+l.scrollTop-c.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function Vr(t){return ge(t).position==="static"}function Go(t,e){if(!_e(t)||ge(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ce(t)===n&&(n=n.ownerDocument.body),n}function tc(t,e){const n=oe(t);if(pr(t))return n;if(!_e(t)){let s=at(t);for(;s&&!zt(s);){if(me(s)&&!Vr(s))return s;s=at(s)}return n}let r=Go(t,e);for(;r&&Jf(r)&&Vr(r);)r=Go(r,e);return r&&zt(r)&&Vr(r)&&!Ys(r)?n:r||th(t)||n}const mh=async function(t){const e=this.getOffsetParent||tc,n=this.getDimensions,r=await n(t.floating);return{reference:ph(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gh(t){return ge(t).direction==="rtl"}const yh={convertOffsetParentRelativeRectToViewportRelativeRect:oh,getDocumentElement:Ce,getClippingRect:fh,getOffsetParent:tc,getElementRects:mh,getClientRects:ih,getDimensions:hh,getScale:Ft,isElement:me,isRTL:gh};function nc(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function vh(t,e){let n=null,r;const s=Ce(t);function o(){var l;clearTimeout(r),(l=n)==null||l.disconnect(),n=null}function i(l,c){l===void 0&&(l=!1),c===void 0&&(c=1),o();const u=t.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=u;if(l||e(),!p||!m)return;const g=Pn(h),w=Pn(s.clientWidth-(f+p)),v=Pn(s.clientHeight-(h+m)),x=Pn(f),b={rootMargin:-g+"px "+-w+"px "+-v+"px "+-x+"px",threshold:se(0,it(1,c))||1};let E=!0;function T(S){const k=S[0].intersectionRatio;if(k!==c){if(!E)return i();k?i(!1,k):r=setTimeout(()=>{i(!1,1e-7)},1e3)}k===1&&!nc(u,t.getBoundingClientRect())&&i(),E=!1}try{n=new IntersectionObserver(T,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(T,b)}n.observe(t)}return i(!0),o}function wh(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:l=typeof IntersectionObserver=="function",animationFrame:c=!1}=r,u=Xs(t),f=s||o?[...u?dn(u):[],...dn(e)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const h=u&&l?vh(u,n):null;let p=-1,m=null;i&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),n()}),u&&!c&&m.observe(u),m.observe(e));let g,w=c?_t(t):null;c&&v();function v(){const x=_t(t);w&&!nc(w,x)&&n(),w=x,g=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(y=>{s&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),h?.(),(x=m)==null||x.disconnect(),m=null,c&&cancelAnimationFrame(g)}}const bh=Wf,xh=Bf,Eh=zf,Th=Gf,_h=Vf,Ko=Uf,Sh=qf,Ih=(t,e,n)=>{const r=new Map,s={platform:yh,...n},o={...s.platform,_c:r};return $f(t,e,{...s,platform:o})};var Ch=typeof document<"u",Ph=function(){},Un=Ch?d.useLayoutEffect:Ph;function Yn(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Yn(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Yn(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function rc(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Yo(t,e){const n=rc(t);return Math.round(e*n)/n}function Hr(t){const e=d.useRef(t);return Un(()=>{e.current=t}),e}function Ah(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:l=!0,whileElementsMounted:c,open:u}=t,[f,h]=d.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=d.useState(r);Yn(p,r)||m(r);const[g,w]=d.useState(null),[v,x]=d.useState(null),y=d.useCallback(j=>{j!==S.current&&(S.current=j,w(j))},[]),b=d.useCallback(j=>{j!==k.current&&(k.current=j,x(j))},[]),E=o||g,T=i||v,S=d.useRef(null),k=d.useRef(null),M=d.useRef(f),z=c!=null,O=Hr(c),$=Hr(s),D=Hr(u),F=d.useCallback(()=>{if(!S.current||!k.current)return;const j={placement:e,strategy:n,middleware:p};$.current&&(j.platform=$.current),Ih(S.current,k.current,j).then(W=>{const K={...W,isPositioned:D.current!==!1};I.current&&!Yn(M.current,K)&&(M.current=K,cr.flushSync(()=>{h(K)}))})},[p,e,n,$,D]);Un(()=>{u===!1&&M.current.isPositioned&&(M.current.isPositioned=!1,h(j=>({...j,isPositioned:!1})))},[u]);const I=d.useRef(!1);Un(()=>(I.current=!0,()=>{I.current=!1}),[]),Un(()=>{if(E&&(S.current=E),T&&(k.current=T),E&&T){if(O.current)return O.current(E,T,F);F()}},[E,T,F,O,z]);const H=d.useMemo(()=>({reference:S,floating:k,setReference:y,setFloating:b}),[y,b]),U=d.useMemo(()=>({reference:E,floating:T}),[E,T]),V=d.useMemo(()=>{const j={position:n,left:0,top:0};if(!U.floating)return j;const W=Yo(U.floating,f.x),K=Yo(U.floating,f.y);return l?{...j,transform:"translate("+W+"px, "+K+"px)",...rc(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:W,top:K}},[n,l,U.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:F,refs:H,elements:U,floatingStyles:V}),[f,F,H,U,V])}const Nh=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Ko({element:r.current,padding:s}).fn(n):{}:r?Ko({element:r,padding:s}).fn(n):{}}}},kh=(t,e)=>({...bh(t),options:[t,e]}),jh=(t,e)=>({...xh(t),options:[t,e]}),Rh=(t,e)=>({...Sh(t),options:[t,e]}),Oh=(t,e)=>({...Eh(t),options:[t,e]}),Dh=(t,e)=>({...Th(t),options:[t,e]}),Lh=(t,e)=>({..._h(t),options:[t,e]}),Fh=(t,e)=>({...Nh(t),options:[t,e]});var Mh="Arrow",sc=d.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return a.jsx(ae.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:a.jsx("polygon",{points:"0,0 30,0 15,10"})})});sc.displayName=Mh;var $h=sc;function Uh(t){const[e,n]=d.useState(void 0);return Bn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,l;if("borderBoxSize"in o){const c=o.borderBoxSize,u=Array.isArray(c)?c[0]:c;i=u.inlineSize,l=u.blockSize}else i=t.offsetWidth,l=t.offsetHeight;n({width:i,height:l})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Qs="Popper",[oc,ic]=Ds(Qs),[zh,ac]=oc(Qs),cc=t=>{const{__scopePopper:e,children:n}=t,[r,s]=d.useState(null);return a.jsx(zh,{scope:e,anchor:r,onAnchorChange:s,children:n})};cc.displayName=Qs;var lc="PopperAnchor",uc=d.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=ac(lc,n),i=d.useRef(null),l=Wt(e,i),c=d.useRef(null);return d.useEffect(()=>{const u=c.current;c.current=r?.current||i.current,u!==c.current&&o.onAnchorChange(c.current)}),r?null:a.jsx(ae.div,{...s,ref:l})});uc.displayName=lc;var Zs="PopperContent",[Vh,Hh]=oc(Zs),dc=d.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:l=0,avoidCollisions:c=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:g,...w}=t,v=ac(Zs,n),[x,y]=d.useState(null),b=Wt(e,je=>y(je)),[E,T]=d.useState(null),S=Uh(E),k=S?.width??0,M=S?.height??0,z=r+(o!=="center"?"-"+o:""),O=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},$=Array.isArray(u)?u:[u],D=$.length>0,F={padding:O,boundary:$.filter(Bh),altBoundary:D},{refs:I,floatingStyles:H,placement:U,isPositioned:V,middlewareData:j}=Ah({strategy:"fixed",placement:z,whileElementsMounted:(...je)=>wh(...je,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[kh({mainAxis:s+M,alignmentAxis:i}),c&&jh({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?Rh():void 0,...F}),c&&Oh({...F}),Dh({...F,apply:({elements:je,rects:ut,availableWidth:dt,availableHeight:Pu})=>{const{width:Au,height:Nu}=ut.reference,Sn=je.floating.style;Sn.setProperty("--radix-popper-available-width",`${dt}px`),Sn.setProperty("--radix-popper-available-height",`${Pu}px`),Sn.setProperty("--radix-popper-anchor-width",`${Au}px`),Sn.setProperty("--radix-popper-anchor-height",`${Nu}px`)}}),E&&Fh({element:E,padding:l}),qh({arrowWidth:k,arrowHeight:M}),p&&Lh({strategy:"referenceHidden",...F})]}),[W,K]=pc(U),ne=ln(g);Bn(()=>{V&&ne?.()},[V,ne]);const Ne=j.arrow?.x,L=j.arrow?.y,ke=j.arrow?.centerOffset!==0,[lt,Or]=d.useState();return Bn(()=>{x&&Or(window.getComputedStyle(x).zIndex)},[x]),a.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:lt,"--radix-popper-transform-origin":[j.transformOrigin?.x,j.transformOrigin?.y].join(" "),...j.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:a.jsx(Vh,{scope:n,placedSide:W,onArrowChange:T,arrowX:Ne,arrowY:L,shouldHideArrow:ke,children:a.jsx(ae.div,{"data-side":W,"data-align":K,...w,ref:b,style:{...w.style,animation:V?void 0:"none"}})})})});dc.displayName=Zs;var fc="PopperArrow",Wh={top:"bottom",right:"left",bottom:"top",left:"right"},hc=d.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=Hh(fc,r),i=Wh[o.placedSide];return a.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:a.jsx($h,{...s,ref:n,style:{...s.style,display:"block"}})})});hc.displayName=fc;function Bh(t){return t!==null}var qh=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,i=s.arrow?.centerOffset!==0,l=i?0:t.arrowWidth,c=i?0:t.arrowHeight,[u,f]=pc(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(s.arrow?.x??0)+l/2,m=(s.arrow?.y??0)+c/2;let g="",w="";return u==="bottom"?(g=i?h:`${p}px`,w=`${-c}px`):u==="top"?(g=i?h:`${p}px`,w=`${r.floating.height+c}px`):u==="right"?(g=`${-c}px`,w=i?h:`${m}px`):u==="left"&&(g=`${r.floating.width+c}px`,w=i?h:`${m}px`),{data:{x:g,y:w}}}});function pc(t){const[e,n="center"]=t.split("-");return[e,n]}var bE=cc,Gh=uc,Kh=dc,Yh=hc,[yr,xE]=Ds("Tooltip",[ic]),eo=ic(),mc="TooltipProvider",Jh=700,Jo="tooltip.open",[Xh,gc]=yr(mc),yc=t=>{const{__scopeTooltip:e,delayDuration:n=Jh,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,i=d.useRef(!0),l=d.useRef(!1),c=d.useRef(0);return d.useEffect(()=>{const u=c.current;return()=>window.clearTimeout(u)},[]),a.jsx(Xh,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(c.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(c.current),c.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:l,onPointerInTransitChange:d.useCallback(u=>{l.current=u},[]),disableHoverableContent:s,children:o})};yc.displayName=mc;var vc="Tooltip",[EE,vr]=yr(vc),ws="TooltipTrigger",Qh=d.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=vr(ws,n),o=gc(ws,n),i=eo(n),l=d.useRef(null),c=Wt(e,l,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),a.jsx(Gh,{asChild:!0,...i,children:a.jsx(ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:c,onPointerMove:Y(t.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Y(t.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Y(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Y(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Y(t.onBlur,s.onClose),onClick:Y(t.onClick,s.onClose)})})});Qh.displayName=ws;var Zh="TooltipPortal",[TE,ep]=yr(Zh,{forceMount:void 0}),Vt="TooltipContent",wc=d.forwardRef((t,e)=>{const n=ep(Vt,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,i=vr(Vt,t.__scopeTooltip);return a.jsx(ra,{present:r||i.open,children:i.disableHoverableContent?a.jsx(bc,{side:s,...o,ref:e}):a.jsx(tp,{side:s,...o,ref:e})})}),tp=d.forwardRef((t,e)=>{const n=vr(Vt,t.__scopeTooltip),r=gc(Vt,t.__scopeTooltip),s=d.useRef(null),o=Wt(e,s),[i,l]=d.useState(null),{trigger:c,onClose:u}=n,f=s.current,{onPointerInTransitChange:h}=r,p=d.useCallback(()=>{l(null),h(!1)},[h]),m=d.useCallback((g,w)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},y=ip(x,v.getBoundingClientRect()),b=ap(x,y),E=cp(w.getBoundingClientRect()),T=up([...b,...E]);l(T),h(!0)},[h]);return d.useEffect(()=>()=>p(),[p]),d.useEffect(()=>{if(c&&f){const g=v=>m(v,f),w=v=>m(v,c);return c.addEventListener("pointerleave",g),f.addEventListener("pointerleave",w),()=>{c.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",w)}}},[c,f,m,p]),d.useEffect(()=>{if(i){const g=w=>{const v=w.target,x={x:w.clientX,y:w.clientY},y=c?.contains(v)||f?.contains(v),b=!lp(x,i);y?p():b&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[c,f,i,u,p]),a.jsx(bc,{...t,ref:o})}),[np,rp]=yr(vc,{isInside:!1}),sp=Uu("TooltipContent"),bc=d.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...l}=t,c=vr(Vt,n),u=eo(n),{onClose:f}=c;return d.useEffect(()=>(document.addEventListener(Jo,f),()=>document.removeEventListener(Jo,f)),[f]),d.useEffect(()=>{if(c.trigger){const h=p=>{p.target?.contains(c.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[c.trigger,f]),a.jsx($u,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:a.jsxs(Kh,{"data-state":c.stateAttribute,...u,...l,ref:e,style:{...l.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[a.jsx(sp,{children:r}),a.jsx(np,{scope:n,isInside:!0,children:a.jsx(rf,{id:c.contentId,role:"tooltip",children:s||r})})]})})});wc.displayName=Vt;var xc="TooltipArrow",op=d.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=eo(n);return rp(xc,n).isInside?null:a.jsx(Yh,{...s,...r,ref:e})});op.displayName=xc;function ip(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function ap(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function cp(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function lp(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const l=e[o],c=e[i],u=l.x,f=l.y,h=c.x,p=c.y;f>r!=p>r&&n<(h-u)*(r-f)/(p-f)+u&&(s=!s)}return s}function up(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),dp(e)}function dp(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var fp=yc,Ec=wc;const hp=fp,pp=d.forwardRef(({className:t,sideOffset:e=4,...n},r)=>a.jsx(Ec,{ref:r,sideOffset:e,className:G("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));pp.displayName=Ec.displayName;const mp="modulepreload",gp=function(t){return"/"+t},Xo={},A=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),l=i?.nonce||i?.getAttribute("nonce");s=Promise.allSettled(n.map(c=>{if(c=gp(c),c in Xo)return;Xo[c]=!0;const u=c.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":mp,u||(h.as="script"),h.crossOrigin="",h.href=c,l&&h.setAttribute("nonce",l),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(i){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=i,window.dispatchEvent(l),!l.defaultPrevented)throw i}return s.then(i=>{for(const l of i||[])l.status==="rejected"&&o(l.reason);return e().catch(o)})},yp=()=>{};var Qo={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},vp=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],l=t[n++],c=((s&7)<<18|(o&63)<<12|(i&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(c>>10)),e[r++]=String.fromCharCode(56320+(c&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},_c={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,l=i?t[s+1]:0,c=s+2<t.length,u=c?t[s+2]:0,f=o>>2,h=(o&3)<<4|l>>4;let p=(l&15)<<2|u>>6,m=u&63;c||(m=64,i||(p=64)),r.push(n[f],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Tc(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):vp(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],l=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||l==null||u==null||h==null)throw new wp;const p=o<<2|l>>4;if(r.push(p),u!==64){const m=l<<4&240|u>>2;if(r.push(m),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class wp extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const bp=function(t){const e=Tc(t);return _c.encodeByteArray(e,!0)},Sc=function(t){return bp(t).replace(/\./g,"")},Ic=function(t){try{return _c.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ep=()=>xp().__FIREBASE_DEFAULTS__,Tp=()=>{if(typeof process>"u"||typeof Qo>"u")return;const t=Qo.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_p=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ic(t[1]);return e&&JSON.parse(e)},to=()=>{try{return yp()||Ep()||Tp()||_p()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},Sp=t=>{var e,n;return(n=(e=to())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Cc=()=>{var t;return(t=to())===null||t===void 0?void 0:t.config},Pc=t=>{var e;return(e=to())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Cp(t){return(await fetch(t,{credentials:"include"})).ok}const rn={};function Pp(){const t={prod:[],emulator:[]};for(const e of Object.keys(rn))rn[e]?t.emulator.push(e):t.prod.push(e);return t}function Ap(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Zo=!1;function Np(t,e){if(typeof window>"u"||typeof document>"u"||!wr(window.location.host)||rn[t]===e||rn[t]||Zo)return;rn[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",o=Pp().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function l(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function c(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Zo=!0,i()},p}function f(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=Ap(r),m=n("text"),g=document.getElementById(m)||document.createElement("span"),w=n("learnmore"),v=document.getElementById(w)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;l(b),f(v,w);const E=u();c(y,x),b.append(y,g,v,E),document.body.appendChild(b)}o?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function kp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Z())}function jp(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function no(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Rp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Op(){const t=Z();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function ro(){try{return typeof indexedDB=="object"}catch{return!1}}function so(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function Ac(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dp="FirebaseError";class Pe extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Dp,Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Nt.prototype.create)}}class Nt{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?Lp(o,r):"Error",l=`${this.serviceName}: ${i} (${s}).`;return new Pe(s,l,r)}}function Lp(t,e){return t.replace(Fp,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const Fp=/\{\$([^}]+)}/g;function Mp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function St(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],i=e[s];if(ei(o)&&ei(i)){if(!St(o,i))return!1}else if(o!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function ei(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gn(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function $p(t,e){const n=new Up(t,e);return n.subscribe.bind(n)}class Up{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");zp(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Wr),s.error===void 0&&(s.error=Wr),s.complete===void 0&&(s.complete=Wr);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function zp(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Wr(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vp=1e3,Hp=2,Wp=4*60*60*1e3,Bp=.5;function ti(t,e=Vp,n=Hp){const r=e*Math.pow(n,t),s=Math.round(Bp*r*(Math.random()-.5)*2);return Math.min(Wp,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Se{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ip;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Kp(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ht){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ht){return this.instances.has(e)}getOptions(e=ht){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,i]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Gp(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ht){return this.component?this.component.multipleInstances?e:ht:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Gp(t){return t===ht?void 0:t}function Kp(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yp{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new qp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var B;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(B||(B={}));const Jp={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},Xp=B.INFO,Qp={[B.DEBUG]:"log",[B.VERBOSE]:"log",[B.INFO]:"info",[B.WARN]:"warn",[B.ERROR]:"error"},Zp=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Qp[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class oo{constructor(e){this.name=e,this._logLevel=Xp,this._logHandler=Zp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in B))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Jp[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,B.DEBUG,...e),this._logHandler(this,B.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,B.VERBOSE,...e),this._logHandler(this,B.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,B.INFO,...e),this._logHandler(this,B.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,B.WARN,...e),this._logHandler(this,B.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,B.ERROR,...e),this._logHandler(this,B.ERROR,...e)}}const em=(t,e)=>e.some(n=>t instanceof n);let ni,ri;function tm(){return ni||(ni=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function nm(){return ri||(ri=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Nc=new WeakMap,bs=new WeakMap,kc=new WeakMap,Br=new WeakMap,io=new WeakMap;function rm(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(rt(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&Nc.set(n,t)}).catch(()=>{}),io.set(e,t),e}function sm(t){if(bs.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});bs.set(t,e)}let xs={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return bs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||kc.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function om(t){xs=t(xs)}function im(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(qr(this),e,...n);return kc.set(r,e.sort?e.sort():[e]),rt(r)}:nm().includes(t)?function(...e){return t.apply(qr(this),e),rt(Nc.get(this))}:function(...e){return rt(t.apply(qr(this),e))}}function am(t){return typeof t=="function"?im(t):(t instanceof IDBTransaction&&sm(t),em(t,tm())?new Proxy(t,xs):t)}function rt(t){if(t instanceof IDBRequest)return rm(t);if(Br.has(t))return Br.get(t);const e=am(t);return e!==t&&(Br.set(t,e),io.set(e,t)),e}const qr=t=>io.get(t);function jc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),l=rt(i);return r&&i.addEventListener("upgradeneeded",c=>{r(rt(i.result),c.oldVersion,c.newVersion,rt(i.transaction),c)}),n&&i.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{o&&c.addEventListener("close",()=>o()),s&&c.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const cm=["get","getKey","getAll","getAllKeys","count"],lm=["put","add","delete","clear"],Gr=new Map;function si(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Gr.get(e))return Gr.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=lm.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||cm.includes(n)))return;const o=async function(i,...l){const c=this.transaction(i,s?"readwrite":"readonly");let u=c.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),s&&c.done]))[0]};return Gr.set(e,o),o}om(t=>({...t,get:(e,n,r)=>si(e,n)||t.get(e,n,r),has:(e,n)=>!!si(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class um{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(dm(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function dm(t){const e=t.getComponent();return e?.type==="VERSION"}const Es="@firebase/app",oi="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze=new oo("@firebase/app"),fm="@firebase/app-compat",hm="@firebase/analytics-compat",pm="@firebase/analytics",mm="@firebase/app-check-compat",gm="@firebase/app-check",ym="@firebase/auth",vm="@firebase/auth-compat",wm="@firebase/database",bm="@firebase/data-connect",xm="@firebase/database-compat",Em="@firebase/functions",Tm="@firebase/functions-compat",_m="@firebase/installations",Sm="@firebase/installations-compat",Im="@firebase/messaging",Cm="@firebase/messaging-compat",Pm="@firebase/performance",Am="@firebase/performance-compat",Nm="@firebase/remote-config",km="@firebase/remote-config-compat",jm="@firebase/storage",Rm="@firebase/storage-compat",Om="@firebase/firestore",Dm="@firebase/ai",Lm="@firebase/firestore-compat",Fm="firebase",Mm="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts="[DEFAULT]",$m={[Es]:"fire-core",[fm]:"fire-core-compat",[pm]:"fire-analytics",[hm]:"fire-analytics-compat",[gm]:"fire-app-check",[mm]:"fire-app-check-compat",[ym]:"fire-auth",[vm]:"fire-auth-compat",[wm]:"fire-rtdb",[bm]:"fire-data-connect",[xm]:"fire-rtdb-compat",[Em]:"fire-fn",[Tm]:"fire-fn-compat",[_m]:"fire-iid",[Sm]:"fire-iid-compat",[Im]:"fire-fcm",[Cm]:"fire-fcm-compat",[Pm]:"fire-perf",[Am]:"fire-perf-compat",[Nm]:"fire-rc",[km]:"fire-rc-compat",[jm]:"fire-gcs",[Rm]:"fire-gcs-compat",[Om]:"fire-fst",[Lm]:"fire-fst-compat",[Dm]:"fire-vertex","fire-js":"fire-js",[Fm]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jn=new Map,Um=new Map,_s=new Map;function ii(t,e){try{t.container.addComponent(e)}catch(n){ze.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ve(t){const e=t.name;if(_s.has(e))return ze.debug(`There were multiple attempts to register component ${e}.`),!1;_s.set(e,t);for(const n of Jn.values())ii(n,t);for(const n of Um.values())ii(n,t);return!0}function Kt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ve(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},st=new Nt("app","Firebase",zm);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw st.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn=Mm;function Rc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ts,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw st.create("bad-app-name",{appName:String(s)});if(n||(n=Cc()),!n)throw st.create("no-options");const o=Jn.get(s);if(o){if(St(n,o.options)&&St(r,o.config))return o;throw st.create("duplicate-app",{appName:s})}const i=new Yp(s);for(const c of _s.values())i.addComponent(c);const l=new Vm(n,r,i);return Jn.set(s,l),l}function Oc(t=Ts){const e=Jn.get(t);if(!e&&t===Ts&&Cc())return Rc();if(!e)throw st.create("no-app",{appName:t});return e}function xe(t,e,n){var r;let s=(r=$m[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const l=[`Unable to register library "${s}" with version "${e}":`];o&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&l.push("and"),i&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ze.warn(l.join(" "));return}Ve(new Se(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hm="firebase-heartbeat-database",Wm=1,fn="firebase-heartbeat-store";let Kr=null;function Dc(){return Kr||(Kr=jc(Hm,Wm,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(fn)}catch(n){console.warn(n)}}}}).catch(t=>{throw st.create("idb-open",{originalErrorMessage:t.message})})),Kr}async function Bm(t){try{const n=(await Dc()).transaction(fn),r=await n.objectStore(fn).get(Lc(t));return await n.done,r}catch(e){if(e instanceof Pe)ze.warn(e.message);else{const n=st.create("idb-get",{originalErrorMessage:e?.message});ze.warn(n.message)}}}async function ai(t,e){try{const r=(await Dc()).transaction(fn,"readwrite");await r.objectStore(fn).put(e,Lc(t)),await r.done}catch(n){if(n instanceof Pe)ze.warn(n.message);else{const r=st.create("idb-set",{originalErrorMessage:n?.message});ze.warn(r.message)}}}function Lc(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qm=1024,Gm=30;class Km{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Jm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=ci();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Gm){const i=Xm(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ze.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ci(),{heartbeatsToSend:r,unsentEntries:s}=Ym(this._heartbeatsCache.heartbeats),o=Sc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ze.warn(n),""}}}function ci(){return new Date().toISOString().substring(0,10)}function Ym(t,e=qm){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),li(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),li(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Jm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return ro()?so().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Bm(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ai(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ai(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function li(t){return Sc(JSON.stringify({version:2,heartbeats:t})).length}function Xm(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qm(t){Ve(new Se("platform-logger",e=>new um(e),"PRIVATE")),Ve(new Se("heartbeat",e=>new Km(e),"PRIVATE")),xe(Es,oi,t),xe(Es,oi,"esm2017"),xe("fire-js","")}Qm("");function Fc(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Zm=Fc,Mc=new Nt("auth","Firebase",Fc());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xn=new oo("@firebase/auth");function eg(t,...e){Xn.logLevel<=B.WARN&&Xn.warn(`Auth (${yn}): ${t}`,...e)}function zn(t,...e){Xn.logLevel<=B.ERROR&&Xn.error(`Auth (${yn}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,...e){throw co(t,...e)}function pe(t,...e){return co(t,...e)}function ao(t,e,n){const r=Object.assign(Object.assign({},Zm()),{[e]:n});return new Nt("auth","Firebase",r).create(e,{appName:t.name})}function Tt(t){return ao(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function tg(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ie(t,"argument-error"),ao(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function co(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Mc.create(t,...e)}function R(t,e,...n){if(!t)throw co(e,...n)}function Le(t){const e="INTERNAL ASSERTION FAILED: "+t;throw zn(e),new Error(e)}function He(t,e){t||Le(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function ng(){return ui()==="http:"||ui()==="https:"}function ui(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rg(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(ng()||no()||"connection"in navigator)?navigator.onLine:!0}function sg(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn{constructor(e,n){this.shortDelay=e,this.longDelay=n,He(n>e,"Short delay should be less than long delay!"),this.isMobile=kp()||Rp()}get(){return rg()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lo(t,e){He(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ig=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],ag=new vn(3e4,6e4);function uo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Yt(t,e,n,r,s={}){return Uc(t,s,async()=>{let o={},i={};r&&(e==="GET"?i=r:o={body:JSON.stringify(r)});const l=gn(Object.assign({key:t.config.apiKey},i)).slice(1),c=await t._getAdditionalHeaders();c["Content-Type"]="application/json",t.languageCode&&(c["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:c},o);return jp()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&wr(t.emulatorConfig.host)&&(u.credentials="include"),$c.fetch()(await zc(t,t.config.apiHost,n,l),u)})}async function Uc(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},og),e);try{const s=new lg(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw An(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const l=o.ok?i.errorMessage:i.error.message,[c,u]=l.split(" : ");if(c==="FEDERATED_USER_ID_ALREADY_LINKED")throw An(t,"credential-already-in-use",i);if(c==="EMAIL_EXISTS")throw An(t,"email-already-in-use",i);if(c==="USER_DISABLED")throw An(t,"user-disabled",i);const f=r[c]||c.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ao(t,f,u);Ie(t,f)}}catch(s){if(s instanceof Pe)throw s;Ie(t,"network-request-failed",{message:String(s)})}}async function cg(t,e,n,r,s={}){const o=await Yt(t,e,n,r,s);return"mfaPendingCredential"in o&&Ie(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function zc(t,e,n,r){const s=`${e}${n}?${r}`,o=t,i=o.config.emulator?lo(t.config,s):`${t.config.apiScheme}://${s}`;return ig.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}class lg{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pe(this.auth,"network-request-failed")),ag.get())})}}function An(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pe(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ug(t,e){return Yt(t,"POST","/v1/accounts:delete",e)}async function Qn(t,e){return Yt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sn(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function dg(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=fo(r);R(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o?.sign_in_provider;return{claims:s,token:r,authTime:sn(Yr(s.auth_time)),issuedAtTime:sn(Yr(s.iat)),expirationTime:sn(Yr(s.exp)),signInProvider:i||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Yr(t){return Number(t)*1e3}function fo(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return zn("JWT malformed, contained fewer than 3 sections"),null;try{const s=Ic(n);return s?JSON.parse(s):(zn("Failed to decode base64 JWT payload"),null)}catch(s){return zn("Caught error parsing JWT payload as JSON",s?.toString()),null}}function di(t){const e=fo(t);return R(e,"internal-error"),R(typeof e.exp<"u","internal-error"),R(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pe&&fg(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function fg({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hg{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Is{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=sn(this.lastLoginAt),this.creationTime=sn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zn(t){var e;const n=t.auth,r=await t.getIdToken(),s=await hn(t,Qn(n,{idToken:r}));R(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Vc(o.providerUserInfo):[],l=mg(t.providerData,i),c=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!l?.length,f=c?u:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Is(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function pg(t){const e=ct(t);await Zn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function mg(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Vc(t){return t.map(e=>{var{providerId:n}=e,r=Ls(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gg(t,e){const n=await Uc(t,{},async()=>{const r=gn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=await zc(t,s,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const c={method:"POST",headers:l,body:r};return t.emulatorConfig&&wr(t.emulatorConfig.host)&&(c.credentials="include"),$c.fetch()(i,c)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function yg(t,e){return Yt(t,"POST","/v2/accounts:revokeToken",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mt{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){R(e.idToken,"internal-error"),R(typeof e.idToken<"u","internal-error"),R(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):di(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){R(e.length!==0,"internal-error");const n=di(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(R(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await gg(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,i=new Mt;return r&&(R(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(R(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(R(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Mt,this.toJSON())}_performRefresh(){return Le("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t,e){R(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fe{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Ls(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new hg(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Is(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await hn(this,this.stsTokenManager.getToken(this.auth,e));return R(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return dg(this,e)}reload(){return pg(this)}_assign(e){this!==e&&(R(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fe(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){R(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Zn(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ve(this.auth.app))return Promise.reject(Tt(this.auth));const e=await this.getIdToken();return await hn(this,ug(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,i,l,c,u,f;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(i=n.photoURL)!==null&&i!==void 0?i:void 0,w=(l=n.tenantId)!==null&&l!==void 0?l:void 0,v=(c=n._redirectEventId)!==null&&c!==void 0?c:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:E,isAnonymous:T,providerData:S,stsTokenManager:k}=n;R(b&&k,e,"internal-error");const M=Mt.fromJSON(this.name,k);R(typeof b=="string",e,"internal-error"),qe(h,e.name),qe(p,e.name),R(typeof E=="boolean",e,"internal-error"),R(typeof T=="boolean",e,"internal-error"),qe(m,e.name),qe(g,e.name),qe(w,e.name),qe(v,e.name),qe(x,e.name),qe(y,e.name);const z=new fe({uid:b,auth:e,email:p,emailVerified:E,displayName:h,isAnonymous:T,photoURL:g,phoneNumber:m,tenantId:w,stsTokenManager:M,createdAt:x,lastLoginAt:y});return S&&Array.isArray(S)&&(z.providerData=S.map(O=>Object.assign({},O))),v&&(z._redirectEventId=v),z}static async _fromIdTokenResponse(e,n,r=!1){const s=new Mt;s.updateFromServerResponse(n);const o=new fe({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Zn(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];R(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Vc(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!o?.length,l=new Mt;l.updateFromIdToken(r);const c=new fe({uid:s.localId,auth:e,stsTokenManager:l,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Is(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(c,u),c}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fi=new Map;function Fe(t){He(t instanceof Function,"Expected a class definition");let e=fi.get(t);return e?(He(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,fi.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Hc.type="NONE";const hi=Hc;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t,e,n){return`firebase:${t}:${e}:${n}`}class $t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Vn(this.userKey,s.apiKey,o),this.fullPersistenceKey=Vn("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Qn(this.auth,{idToken:e}).catch(()=>{});return n?fe._fromGetAccountInfoResponse(this.auth,n,e):null}return fe._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $t(Fe(hi),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||Fe(hi);const i=Vn(r,e.config.apiKey,e.name);let l=null;for(const u of n)try{const f=await u._get(i);if(f){let h;if(typeof f=="string"){const p=await Qn(e,{idToken:f}).catch(()=>{});if(!p)break;h=await fe._fromGetAccountInfoResponse(e,p,f)}else h=fe._fromJSON(e,f);u!==o&&(l=h),o=u;break}}catch{}const c=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!c.length?new $t(o,e,r):(o=c[0],l&&await o._set(i,l.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(i)}catch{}})),new $t(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pi(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Gc(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Wc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Yc(e))return"Blackberry";if(Jc(e))return"Webos";if(Bc(e))return"Safari";if((e.includes("chrome/")||qc(e))&&!e.includes("edge/"))return"Chrome";if(Kc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function Wc(t=Z()){return/firefox\//i.test(t)}function Bc(t=Z()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function qc(t=Z()){return/crios\//i.test(t)}function Gc(t=Z()){return/iemobile/i.test(t)}function Kc(t=Z()){return/android/i.test(t)}function Yc(t=Z()){return/blackberry/i.test(t)}function Jc(t=Z()){return/webos/i.test(t)}function ho(t=Z()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function vg(t=Z()){var e;return ho(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function wg(){return Op()&&document.documentMode===10}function Xc(t=Z()){return ho(t)||Kc(t)||Jc(t)||Yc(t)||/windows phone/i.test(t)||Gc(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qc(t,e=[]){let n;switch(t){case"Browser":n=pi(Z());break;case"Worker":n=`${pi(Z())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${yn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bg{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((i,l)=>{try{const c=e(o);i(c)}catch(c){l(c)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xg(t,e={}){return Yt(t,"GET","/v2/passwordPolicy",uo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eg=6;class Tg{constructor(e){var n,r,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:Eg,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,i,l;const c={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,c),this.validatePasswordCharacterOptions(e,c),c.isValid&&(c.isValid=(n=c.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),c.isValid&&(c.isValid=(r=c.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),c.isValid&&(c.isValid=(s=c.containsLowercaseLetter)!==null&&s!==void 0?s:!0),c.isValid&&(c.isValid=(o=c.containsUppercaseLetter)!==null&&o!==void 0?o:!0),c.isValid&&(c.isValid=(i=c.containsNumericCharacter)!==null&&i!==void 0?i:!0),c.isValid&&(c.isValid=(l=c.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),c}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new mi(this),this.idTokenSubscription=new mi(this),this.beforeStateQueue=new bg(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Mc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Fe(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Qn(this,{idToken:e}),r=await fe._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ve(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(l,l))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=s?._redirectEventId,c=await this.tryRedirectSignIn(e);(!i||i===l)&&c?.user&&(s=c.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return R(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Zn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=sg()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ve(this.app))return Promise.reject(Tt(this));const n=e?ct(e):null;return n&&R(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&R(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ve(this.app)?Promise.reject(Tt(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ve(this.app)?Promise.reject(Tt(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Fe(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await xg(this),n=new Tg(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Nt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await yg(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Fe(e)||this._popupRedirectResolver;R(n,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Fe(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let i=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(R(l,this,"internal-error"),l.then(()=>{i||o(this.currentUser)}),typeof n=="function"){const c=e.addObserver(n,r,s);return()=>{i=!0,c()}}else{const c=e.addObserver(n);return()=>{i=!0,c()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return R(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Qc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&eg(`Error while retrieving App Check token: ${n.error}`),n?.token}}function br(t){return ct(t)}class mi{constructor(e){this.auth=e,this.observer=null,this.addObserver=$p(n=>this.observer=n)}get next(){return R(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let po={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Sg(t){po=t}function Ig(t){return po.loadJS(t)}function Cg(){return po.gapiScript}function Pg(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ag(t,e){const n=Kt(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(St(o,e??{}))return s;Ie(s,"already-initialized")}return n.initialize({options:e})}function Ng(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Fe);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function kg(t,e,n){const r=br(t);R(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Zc(e),{host:i,port:l}=jg(e),c=l===null?"":`:${l}`,u={url:`${o}//${i}${c}/`},f=Object.freeze({host:i,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){R(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),R(St(u,r.config.emulator)&&St(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,wr(i)?(Cp(`${o}//${i}${c}`),Np("Auth",!0)):Rg()}function Zc(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function jg(t){const e=Zc(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:gi(r.substr(o.length+1))}}else{const[o,i]=r.split(":");return{host:o,port:gi(i)}}}function gi(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Rg(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Le("not implemented")}_getIdTokenResponse(e){return Le("not implemented")}_linkToIdToken(e,n){return Le("not implemented")}_getReauthenticationResolver(e){return Le("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ut(t,e){return cg(t,"POST","/v1/accounts:signInWithIdp",uo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="http://localhost";class It extends el{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new It(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ie("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Ls(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new It(r,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Ut(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ut(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ut(e,n)}buildRequest(){const e={requestUri:Og,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=gn(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn extends mo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends wn{constructor(){super("facebook.com")}static credential(e){return It._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ge.credential(e.oauthAccessToken)}catch{return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ge.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends wn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return It._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oe.credential(n,r)}catch{return null}}}Oe.GOOGLE_SIGN_IN_METHOD="google.com";Oe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends wn{constructor(){super("github.com")}static credential(e){return It._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ke.credential(e.oauthAccessToken)}catch{return null}}}Ke.GITHUB_SIGN_IN_METHOD="github.com";Ke.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye extends wn{constructor(){super("twitter.com")}static credential(e,n){return It._fromParams({providerId:Ye.PROVIDER_ID,signInMethod:Ye.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ye.credentialFromTaggedObject(e)}static credentialFromError(e){return Ye.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ye.credential(n,r)}catch{return null}}}Ye.TWITTER_SIGN_IN_METHOD="twitter.com";Ye.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await fe._fromIdTokenResponse(e,r,s),i=yi(r);return new Ht({user:o,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=yi(r);return new Ht({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function yi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class er extends Pe{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,er.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new er(e,n,r,s)}}function tl(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?er._fromErrorAndOperation(t,o,e,r):o})}async function Dg(t,e,n=!1){const r=await hn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ht._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lg(t,e,n=!1){const{auth:r}=t;if(ve(r.app))return Promise.reject(Tt(r));const s="reauthenticate";try{const o=await hn(t,tl(r,s,e,t),n);R(o.idToken,r,"internal-error");const i=fo(o.idToken);R(i,r,"internal-error");const{sub:l}=i;return R(t.uid===l,r,"user-mismatch"),Ht._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ie(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fg(t,e,n=!1){if(ve(t.app))return Promise.reject(Tt(t));const r="signIn",s=await tl(t,r,e),o=await Ht._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}function Mg(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function $g(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}const tr="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nl{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(tr,"1"),this.storage.removeItem(tr),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=1e3,zg=10;class rl extends nl{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Xc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,l,c)=>{this.notifyListeners(i,c)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},o=this.storage.getItem(r);wg()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,zg):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Ug)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}rl.type="LOCAL";const Vg=rl;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sl extends nl{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}sl.type="SESSION";const ol=sl;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hg(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new xr(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,i=this.handlersMap[s];if(!i?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const l=Array.from(i).map(async u=>u(n.origin,o)),c=await Hg(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:c})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xr.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wg{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((l,c)=>{const u=go("",20);s.port1.start();const f=setTimeout(()=>{c(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{c(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(p.data.response);break;default:clearTimeout(f),clearTimeout(o),c(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ee(){return window}function Bg(t){Ee().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function il(){return typeof Ee().WorkerGlobalScope<"u"&&typeof Ee().importScripts=="function"}async function qg(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Gg(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Kg(){return il()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const al="firebaseLocalStorageDb",Yg=1,nr="firebaseLocalStorage",cl="fbase_key";class bn{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Er(t,e){return t.transaction([nr],e?"readwrite":"readonly").objectStore(nr)}function Jg(){const t=indexedDB.deleteDatabase(al);return new bn(t).toPromise()}function Cs(){const t=indexedDB.open(al,Yg);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(nr,{keyPath:cl})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(nr)?e(r):(r.close(),await Jg(),e(await Cs()))})})}async function vi(t,e,n){const r=Er(t,!0).put({[cl]:e,value:n});return new bn(r).toPromise()}async function Xg(t,e){const n=Er(t,!1).get(e),r=await new bn(n).toPromise();return r===void 0?null:r.value}function wi(t,e){const n=Er(t,!0).delete(e);return new bn(n).toPromise()}const Qg=800,Zg=3;class ll{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Cs(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Zg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return il()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xr._getInstance(Kg()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await qg(),!this.activeServiceWorker)return;this.sender=new Wg(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Gg()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Cs();return await vi(e,tr,"1"),await wi(e,tr),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>vi(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Xg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>wi(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=Er(s,!1).getAll();return new bn(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Qg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}ll.type="LOCAL";const ey=ll;new vn(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ul(t,e){return e?Fe(e):(R(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yo extends el{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ut(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ut(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ut(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function ty(t){return Fg(t.auth,new yo(t),t.bypassAuthState)}function ny(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),Lg(n,new yo(t),t.bypassAuthState)}async function ry(t){const{auth:e,user:n}=t;return R(n,e,"internal-error"),Dg(n,new yo(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dl{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:i,type:l}=e;if(i){this.reject(i);return}const c={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(c))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return ty;case"linkViaPopup":case"linkViaRedirect":return ry;case"reauthViaPopup":case"reauthViaRedirect":return ny;default:Ie(this.auth,"internal-error")}}resolve(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sy=new vn(2e3,1e4);async function oy(t,e,n){if(ve(t.app))return Promise.reject(pe(t,"operation-not-supported-in-this-environment"));const r=br(t);tg(t,e,mo);const s=ul(r,n);return new gt(r,"signInViaPopup",e,s).executeNotNull()}class gt extends dl{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,gt.currentPopupAction&&gt.currentPopupAction.cancel(),gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return R(e,this.auth,"internal-error"),e}async onExecution(){He(this.filter.length===1,"Popup operations only handle one event");const e=go();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,sy.get())};e()}}gt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy="pendingRedirect",Hn=new Map;class ay extends dl{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Hn.get(this.auth._key());if(!e){try{const r=await cy(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Hn.set(this.auth._key(),e)}return this.bypassAuthState||Hn.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function cy(t,e){const n=dy(e),r=uy(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function ly(t,e){Hn.set(t._key(),e)}function uy(t){return Fe(t._redirectPersistence)}function dy(t){return Vn(iy,t.config.apiKey,t.name)}async function fy(t,e,n=!1){if(ve(t.app))return Promise.reject(Tt(t));const r=br(t),s=ul(r,e),i=await new ay(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy=10*60*1e3;class py{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!my(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!fl(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pe(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=hy&&this.cachedEventUids.clear(),this.cachedEventUids.has(bi(e))}saveEventToCache(e){this.cachedEventUids.add(bi(e)),this.lastProcessedEventTime=Date.now()}}function bi(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function fl({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function my(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return fl(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gy(t,e={}){return Yt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yy=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,vy=/^https?/;async function wy(t){if(t.config.emulator)return;const{authorizedDomains:e}=await gy(t);for(const n of e)try{if(by(n))return}catch{}Ie(t,"unauthorized-domain")}function by(t){const e=Ss(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!vy.test(n))return!1;if(yy.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xy=new vn(3e4,6e4);function xi(){const t=Ee().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function Ey(t){return new Promise((e,n)=>{var r,s,o;function i(){xi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{xi(),n(pe(t,"network-request-failed"))},timeout:xy.get()})}if(!((s=(r=Ee().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Ee().gapi)===null||o===void 0)&&o.load)i();else{const l=Pg("iframefcb");return Ee()[l]=()=>{gapi.load?i():n(pe(t,"network-request-failed"))},Ig(`${Cg()}?onload=${l}`).catch(c=>n(c))}}).catch(e=>{throw Wn=null,e})}let Wn=null;function Ty(t){return Wn=Wn||Ey(t),Wn}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _y=new vn(5e3,15e3),Sy="__/auth/iframe",Iy="emulator/auth/iframe",Cy={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Py=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ay(t){const e=t.config;R(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?lo(e,Iy):`https://${t.config.authDomain}/${Sy}`,r={apiKey:e.apiKey,appName:t.name,v:yn},s=Py.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${gn(r).slice(1)}`}async function Ny(t){const e=await Ty(t),n=Ee().gapi;return R(n,t,"internal-error"),e.open({where:document.body,url:Ay(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Cy,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const i=pe(t,"network-request-failed"),l=Ee().setTimeout(()=>{o(i)},_y.get());function c(){Ee().clearTimeout(l),s(r)}r.ping(c).then(c,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},jy=500,Ry=600,Oy="_blank",Dy="http://localhost";class Ei{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Ly(t,e,n,r=jy,s=Ry){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const c=Object.assign(Object.assign({},ky),{width:r.toString(),height:s.toString(),top:o,left:i}),u=Z().toLowerCase();n&&(l=qc(u)?Oy:n),Wc(u)&&(e=e||Dy,c.scrollbars="yes");const f=Object.entries(c).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(vg(u)&&l!=="_self")return Fy(e||"",l),new Ei(null);const h=window.open(e||"",l,f);R(h,t,"popup-blocked");try{h.focus()}catch{}return new Ei(h)}function Fy(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const My="__/auth/handler",$y="emulator/auth/handler",Uy=encodeURIComponent("fac");async function Ti(t,e,n,r,s,o){R(t.config.authDomain,t,"auth-domain-config-required"),R(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:yn,eventId:s};if(e instanceof mo){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",Mp(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))i[f]=h}if(e instanceof wn){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(i.scopes=f.join(","))}t.tenantId&&(i.tid=t.tenantId);const l=i;for(const f of Object.keys(l))l[f]===void 0&&delete l[f];const c=await t._getAppCheckToken(),u=c?`#${Uy}=${encodeURIComponent(c)}`:"";return`${zy(t)}?${gn(l).slice(1)}${u}`}function zy({config:t}){return t.emulator?lo(t,$y):`https://${t.authDomain}/${My}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jr="webStorageSupport";class Vy{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ol,this._completeRedirectFn=fy,this._overrideRedirectResult=ly}async _openPopup(e,n,r,s){var o;He((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await Ti(e,n,r,Ss(),s);return Ly(e,i,go())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await Ti(e,n,r,Ss(),s);return Bg(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(He(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await Ny(e),r=new py(e);return n.register("authEvent",s=>(R(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Jr,{type:Jr},s=>{var o;const i=(o=s?.[0])===null||o===void 0?void 0:o[Jr];i!==void 0&&n(!!i),Ie(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=wy(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Xc()||Bc()||ho()}}const Hy=Vy;var _i="@firebase/auth",Si="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){R(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function By(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function qy(t){Ve(new Se("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:l}=r.options;R(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const c={apiKey:i,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Qc(t)},u=new _g(r,s,o,c);return Ng(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ve(new Se("auth-internal",e=>{const n=br(e.getProvider("auth").getImmediate());return(r=>new Wy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(_i,Si,By(t)),xe(_i,Si,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gy=5*60,Ky=Pc("authIdTokenMaxAge")||Gy;let Ii=null;const Yy=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>Ky)return;const s=n?.token;Ii!==s&&(Ii=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Jy(t=Oc()){const e=Kt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=Ag(t,{popupRedirectResolver:Hy,persistence:[ey,Vg,ol]}),r=Pc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const i=Yy(o.toString());$g(n,i,()=>i(n.currentUser)),Mg(n,l=>i(l))}}const s=Sp("auth");return s&&kg(n,`http://${s}`),n}function Xy(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}Sg({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=pe("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",Xy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});qy("Browser");var Qy="firebase",Zy="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xe(Qy,Zy,"app");const hl="@firebase/installations",vo="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pl=1e4,ml=`w:${vo}`,gl="FIS_v2",ev="https://firebaseinstallations.googleapis.com/v1",tv=60*60*1e3,nv="installations",rv="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sv={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ct=new Nt(nv,rv,sv);function yl(t){return t instanceof Pe&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vl({projectId:t}){return`${ev}/projects/${t}/installations`}function wl(t){return{token:t.token,requestStatus:2,expiresIn:iv(t.expiresIn),creationTime:Date.now()}}async function bl(t,e){const r=(await e.json()).error;return Ct.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function xl({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function ov(t,{refreshToken:e}){const n=xl(t);return n.append("Authorization",av(e)),n}async function El(t){const e=await t();return e.status>=500&&e.status<600?t():e}function iv(t){return Number(t.replace("s","000"))}function av(t){return`${gl} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cv({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=vl(t),s=xl(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const i={fid:n,authVersion:gl,appId:t.appId,sdkVersion:ml},l={method:"POST",headers:s,body:JSON.stringify(i)},c=await El(()=>fetch(r,l));if(c.ok){const u=await c.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:wl(u.authToken)}}else throw await bl("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lv(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uv=/^[cdef][\w-]{21}$/,Ps="";function dv(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=fv(t);return uv.test(n)?n:Ps}catch{return Ps}}function fv(t){return lv(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tr(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _l=new Map;function Sl(t,e){const n=Tr(t);Il(n,e),hv(n,e)}function Il(t,e){const n=_l.get(t);if(n)for(const r of n)r(e)}function hv(t,e){const n=pv();n&&n.postMessage({key:t,fid:e}),mv()}let yt=null;function pv(){return!yt&&"BroadcastChannel"in self&&(yt=new BroadcastChannel("[Firebase] FID Change"),yt.onmessage=t=>{Il(t.data.key,t.data.fid)}),yt}function mv(){_l.size===0&&yt&&(yt.close(),yt=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="firebase-installations-database",yv=1,Pt="firebase-installations-store";let Xr=null;function wo(){return Xr||(Xr=jc(gv,yv,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pt)}}})),Xr}async function rr(t,e){const n=Tr(t),s=(await wo()).transaction(Pt,"readwrite"),o=s.objectStore(Pt),i=await o.get(n);return await o.put(e,n),await s.done,(!i||i.fid!==e.fid)&&Sl(t,e.fid),e}async function Cl(t){const e=Tr(t),r=(await wo()).transaction(Pt,"readwrite");await r.objectStore(Pt).delete(e),await r.done}async function _r(t,e){const n=Tr(t),s=(await wo()).transaction(Pt,"readwrite"),o=s.objectStore(Pt),i=await o.get(n),l=e(i);return l===void 0?await o.delete(n):await o.put(l,n),await s.done,l&&(!i||i.fid!==l.fid)&&Sl(t,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bo(t){let e;const n=await _r(t.appConfig,r=>{const s=vv(r),o=wv(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===Ps?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function vv(t){const e=t||{fid:dv(),registrationStatus:0};return Pl(e)}function wv(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ct.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=bv(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:xv(t)}:{installationEntry:e}}async function bv(t,e){try{const n=await cv(t,e);return rr(t.appConfig,n)}catch(n){throw yl(n)&&n.customData.serverCode===409?await Cl(t.appConfig):await rr(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function xv(t){let e=await Ci(t.appConfig);for(;e.registrationStatus===1;)await Tl(100),e=await Ci(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await bo(t);return r||n}return e}function Ci(t){return _r(t,e=>{if(!e)throw Ct.create("installation-not-found");return Pl(e)})}function Pl(t){return Ev(t)?{fid:t.fid,registrationStatus:0}:t}function Ev(t){return t.registrationStatus===1&&t.registrationTime+pl<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tv({appConfig:t,heartbeatServiceProvider:e},n){const r=_v(t,n),s=ov(t,n),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const i={installation:{sdkVersion:ml,appId:t.appId}},l={method:"POST",headers:s,body:JSON.stringify(i)},c=await El(()=>fetch(r,l));if(c.ok){const u=await c.json();return wl(u)}else throw await bl("Generate Auth Token",c)}function _v(t,{fid:e}){return`${vl(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xo(t,e=!1){let n;const r=await _r(t.appConfig,o=>{if(!Al(o))throw Ct.create("not-registered");const i=o.authToken;if(!e&&Cv(i))return o;if(i.requestStatus===1)return n=Sv(t,e),o;{if(!navigator.onLine)throw Ct.create("app-offline");const l=Av(o);return n=Iv(t,l),l}});return n?await n:r.authToken}async function Sv(t,e){let n=await Pi(t.appConfig);for(;n.authToken.requestStatus===1;)await Tl(100),n=await Pi(t.appConfig);const r=n.authToken;return r.requestStatus===0?xo(t,e):r}function Pi(t){return _r(t,e=>{if(!Al(e))throw Ct.create("not-registered");const n=e.authToken;return Nv(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function Iv(t,e){try{const n=await Tv(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await rr(t.appConfig,r),n}catch(n){if(yl(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Cl(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await rr(t.appConfig,r)}throw n}}function Al(t){return t!==void 0&&t.registrationStatus===2}function Cv(t){return t.requestStatus===2&&!Pv(t)}function Pv(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+tv}function Av(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function Nv(t){return t.requestStatus===1&&t.requestTime+pl<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kv(t){const e=t,{installationEntry:n,registrationPromise:r}=await bo(e);return r?r.catch(console.error):xo(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jv(t,e=!1){const n=t;return await Rv(n),(await xo(n,e)).token}async function Rv(t){const{registrationPromise:e}=await bo(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ov(t){if(!t||!t.options)throw Qr("App Configuration");if(!t.name)throw Qr("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Qr(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Qr(t){return Ct.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nl="installations",Dv="installations-internal",Lv=t=>{const e=t.getProvider("app").getImmediate(),n=Ov(e),r=Kt(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},Fv=t=>{const e=t.getProvider("app").getImmediate(),n=Kt(e,Nl).getImmediate();return{getId:()=>kv(n),getToken:s=>jv(n,s)}};function Mv(){Ve(new Se(Nl,Lv,"PUBLIC")),Ve(new Se(Dv,Fv,"PRIVATE"))}Mv();xe(hl,vo);xe(hl,vo,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sr="analytics",$v="firebase_id",Uv="origin",zv=60*1e3,Vv="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Eo="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ee=new oo("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ie=new Nt("analytics","Analytics",Hv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wv(t){if(!t.startsWith(Eo)){const e=ie.create("invalid-gtag-resource",{gtagURL:t});return ee.warn(e.message),""}return t}function kl(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Bv(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function qv(t,e){const n=Bv("firebase-js-sdk-policy",{createScriptURL:Wv}),r=document.createElement("script"),s=`${Eo}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Gv(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function Kv(t,e,n,r,s,o){const i=r[s];try{if(i)await e[i];else{const c=(await kl(n)).find(u=>u.measurementId===s);c&&await e[c.appId]}}catch(l){ee.error(l)}t("config",s,o)}async function Yv(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let i=s.send_to;Array.isArray(i)||(i=[i]);const l=await kl(n);for(const c of i){const u=l.find(h=>h.measurementId===c),f=u&&e[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){ee.error(o)}}function Jv(t,e,n,r){async function s(o,...i){try{if(o==="event"){const[l,c]=i;await Yv(t,e,n,l,c)}else if(o==="config"){const[l,c]=i;await Kv(t,e,n,r,l,c)}else if(o==="consent"){const[l,c]=i;t("consent",l,c)}else if(o==="get"){const[l,c,u]=i;t("get",l,c,u)}else if(o==="set"){const[l]=i;t("set",l)}else t(o,...i)}catch(l){ee.error(l)}}return s}function Xv(t,e,n,r,s){let o=function(...i){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=Jv(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function Qv(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(Eo)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zv=30,e0=1e3;class t0{constructor(e={},n=e0){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const jl=new t0;function n0(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function r0(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:n0(r)},o=Vv.replace("{app-id}",n),i=await fetch(o,s);if(i.status!==200&&i.status!==304){let l="";try{const c=await i.json();!((e=c.error)===null||e===void 0)&&e.message&&(l=c.error.message)}catch{}throw ie.create("config-fetch-failed",{httpStatus:i.status,responseMessage:l})}return i.json()}async function s0(t,e=jl,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw ie.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw ie.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new a0;return setTimeout(async()=>{l.abort()},zv),Rl({appId:r,apiKey:s,measurementId:o},i,l,e)}async function Rl(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=jl){var o;const{appId:i,measurementId:l}=t;try{await o0(r,e)}catch(c){if(l)return ee.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c?.message}]`),{appId:i,measurementId:l};throw c}try{const c=await r0(t);return s.deleteThrottleMetadata(i),c}catch(c){const u=c;if(!i0(u)){if(s.deleteThrottleMetadata(i),l)return ee.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:i,measurementId:l};throw c}const f=Number((o=u?.customData)===null||o===void 0?void 0:o.httpStatus)===503?ti(n,s.intervalMillis,Zv):ti(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,h),ee.debug(`Calling attemptFetch again in ${f} millis`),Rl(t,h,r,s)}}function o0(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(ie.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function i0(t){if(!(t instanceof Pe)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class a0{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function c0(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,i=Object.assign(Object.assign({},r),{send_to:o});t("event",n,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function l0(){if(ro())try{await so()}catch(t){return ee.warn(ie.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return ee.warn(ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function u0(t,e,n,r,s,o,i){var l;const c=s0(t);c.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&ee.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>ee.error(m)),e.push(c);const u=l0().then(m=>{if(m)return r.getId()}),[f,h]=await Promise.all([c,u]);Qv(o)||qv(o,f.measurementId),s("js",new Date);const p=(l=i?.config)!==null&&l!==void 0?l:{};return p[Uv]="firebase",p.update=!0,h!=null&&(p[$v]=h),s("config",f.measurementId,p),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(e){this.app=e}_delete(){return delete on[this.app.options.appId],Promise.resolve()}}let on={},Ai=[];const Ni={};let Zr="dataLayer",f0="gtag",ki,Ol,ji=!1;function h0(){const t=[];if(no()&&t.push("This is a browser extension environment."),Ac()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=ie.create("invalid-analytics-context",{errorInfo:e});ee.warn(n.message)}}function p0(t,e,n){h0();const r=t.options.appId;if(!r)throw ie.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)ee.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ie.create("no-api-key");if(on[r]!=null)throw ie.create("already-exists",{id:r});if(!ji){Gv(Zr);const{wrappedGtag:o,gtagCore:i}=Xv(on,Ai,Ni,Zr,f0);Ol=o,ki=i,ji=!0}return on[r]=u0(t,Ai,Ni,e,ki,Zr,n),new d0(t)}function m0(t=Oc()){t=ct(t);const e=Kt(t,sr);return e.isInitialized()?e.getImmediate():g0(t)}function g0(t,e={}){const n=Kt(t,sr);if(n.isInitialized()){const s=n.getImmediate();if(St(e,n.getOptions()))return s;throw ie.create("already-initialized")}return n.initialize({options:e})}async function y0(){if(no()||!Ac()||!ro())return!1;try{return await so()}catch{return!1}}function v0(t,e,n,r){t=ct(t),c0(Ol,on[t.app.options.appId],e,n,r).catch(s=>ee.error(s))}const Ri="@firebase/analytics",Oi="0.10.17";function w0(){Ve(new Se(sr,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return p0(r,s,n)},"PUBLIC")),Ve(new Se("analytics-internal",t,"PRIVATE")),xe(Ri,Oi),xe(Ri,Oi,"esm2017");function t(e){try{const n=e.getProvider(sr).getImmediate();return{logEvent:(r,s,o)=>v0(n,r,s,o)}}catch(n){throw ie.create("interop-component-reg-failed",{reason:n})}}}w0();const b0={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""},Dl=Rc(b0),x0=Jy(Dl);y0().then(t=>{t&&m0(Dl)});class E0{constructor(){this.tokenKey="medusavr_access_token",this.refreshKey="medusavr_refresh_token",this.userKey="medusavr_user",this.register=async e=>{try{const{secureApiRequest:n}=await A(async()=>{const{secureApiRequest:o}=await import("./csrfProtection-Cneea2N7.js");return{secureApiRequest:o}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await n("POST","/api/auth/register",e);if(!r.ok){const o=await r.json().catch(()=>({message:"Registration failed"}));throw new Error(o.message||`Registration failed with status ${r.status}`)}const s=await r.json();return this.setTokens(s.accessToken,s.refreshToken,s.user),s}catch(n){throw console.error("Registration error in authService:",n),n}},this.login=async e=>{const{secureApiRequest:n}=await A(async()=>{const{secureApiRequest:o}=await import("./csrfProtection-Cneea2N7.js");return{secureApiRequest:o}},__vite__mapDeps([0,1,2,3,4,5,6])),s=await(await n("POST","/api/auth/login",e)).json();return this.setTokens(s.accessToken,s.refreshToken,s.user),s},this.refreshAccessToken=async()=>{const e=this.getRefreshToken();if(!e)throw new Error("No refresh token available");const r=await(await _("POST","/api/auth/refresh",{refreshToken:e})).json();return localStorage.setItem(this.tokenKey,r.accessToken),r.refreshToken&&localStorage.setItem(this.refreshKey,r.refreshToken),r.accessToken},this.logout=async()=>{try{const{secureApiRequest:e}=await A(async()=>{const{secureApiRequest:n}=await import("./csrfProtection-Cneea2N7.js");return{secureApiRequest:n}},__vite__mapDeps([0,1,2,3,4,5,6]));await e("POST","/api/auth/logout",{})}catch(e){console.warn("Logout request failed:",e)}finally{this.clearTokens()}},this.getProfile=async()=>{const n=await(await _("GET","/api/auth/me")).json();return localStorage.setItem(this.userKey,JSON.stringify(n)),n},this.updateProfile=async e=>{const r=await(await _("PUT","/api/auth/me",e)).json();return localStorage.setItem(this.userKey,JSON.stringify(r)),r},this.changePassword=async e=>{await _("PATCH","/api/auth/me/password",e)},this.requestPasswordReset=async e=>{await _("POST","/api/auth/password-reset/request",e)},this.confirmPasswordReset=async e=>{await _("POST","/api/auth/password-reset/confirm",e)},this.uploadAvatar=async e=>{const n=new FormData;n.append("file",e);const r=this.getUser();if(!r)throw new Error("User not authenticated");const s=await fetch(`/api/users/${r.id}/avatar`,{method:"POST",body:n,headers:{Authorization:`Bearer ${this.getAccessToken()}`}});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);return await s.json()},this.deleteAvatar=async()=>{const e=this.getUser();if(!e)throw new Error("User not authenticated");await _("DELETE",`/api/users/${e.id}/avatar`)},this.signInWithGoogle=async()=>{try{const e=new Oe;e.addScope("profile"),e.addScope("email"),e.setCustomParameters({prompt:"select_account"}),console.log("üîÑ Starting Google sign-in...");let n;try{n=await oy(x0,e)}catch(i){throw i.code==="auth/popup-blocked"||i.message?.includes("popup")||i.message?.includes("Cross-Origin-Opener-Policy")?(console.warn("üö´ Popup blocked, instructing user to allow popups"),new Error("Please allow popups for this site and try again. You may need to click the Google sign-in button again.")):i}console.log("‚úÖ Google sign-in successful:",n.user.email);const r=await n.user.getIdToken();console.log("üîë Got ID token, sending to backend...");const o=await(await _("POST","/api/auth/google",{idToken:r})).json();return console.log("‚úÖ Backend authentication successful"),this.setTokens(o.accessToken,o.refreshToken,o.user),o}catch(e){throw console.error("‚ùå Google sign-in error:",e),e}},this.signUpWithGoogle=async()=>this.signInWithGoogle(),this.handleGoogleCallback=async e=>{const r=await(await _("POST","/api/auth/google/callback",{code:e})).json();return this.setTokens(r.accessToken,r.refreshToken,r.user),r},this.ensureValidToken=async()=>{let e=this.getAccessToken();if(!e)throw new Error("No access token available");return this.isTokenExpired(e)&&(e=await this.refreshAccessToken()),e}}getAccessToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshKey)}getUser(){const e=localStorage.getItem(this.userKey);return e?JSON.parse(e):null}setTokens(e,n,r){localStorage.setItem(this.tokenKey,e),localStorage.setItem(this.refreshKey,n),localStorage.setItem(this.userKey,JSON.stringify(r))}clearTokens(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshKey),localStorage.removeItem(this.userKey)}isAuthenticated(){return!!this.getAccessToken()&&!!this.getUser()}clearInvalidTokens(){console.log("üßπ Clearing potentially invalid tokens"),this.clearTokens()}isTokenExpired(e){try{const n=JSON.parse(atob(e.split(".")[1]));return Date.now()>=n.exp*1e3}catch{return!0}}}const re=new E0,Ll=d.createContext(null),T0=({children:t})=>{const[e,n]=d.useState(re.getUser()),[r,s]=d.useState(!1),o=lr(),i=re.isAuthenticated();d.useEffect(()=>{},[e,i]);const l=Ot({mutationFn:re.login,onSuccess:y=>{n(y.user),o.invalidateQueries()}}),c=Ot({mutationFn:re.register,onSuccess:y=>{n(y.user),o.invalidateQueries()}}),u=Ot({mutationFn:re.updateProfile,onSuccess:y=>{n(y),o.invalidateQueries({queryKey:["auth","me"]})}}),f=d.useCallback(async y=>{s(!0);try{await l.mutateAsync(y)}finally{s(!1)}},[l]),h=d.useCallback(async y=>{s(!0);try{await c.mutateAsync(y)}catch(b){throw console.error("Registration error in useAuth:",b),b}finally{s(!1)}},[c]),p=d.useCallback(async()=>{s(!0);try{const y=await re.signInWithGoogle();n(y.user),o.invalidateQueries()}finally{s(!1)}},[o]),m=d.useCallback(async()=>{s(!0);try{const y=await re.signUpWithGoogle();n(y.user),o.invalidateQueries()}finally{s(!1)}},[o]),g=d.useCallback(async()=>{s(!0);try{await re.logout(),n(null),o.clear()}finally{s(!1)}},[o]),w=d.useCallback(async y=>{await u.mutateAsync(y)},[u]),v=d.useCallback(async()=>{if(i)try{const y=await re.getProfile();n(y)}catch(y){console.error("Failed to refresh user:",y),await g()}},[i,g]);d.useEffect(()=>{i&&!e&&v()},[i,e,v]);const x={user:e,isAuthenticated:i,isLoading:r||l.isPending||c.isPending,login:f,register:h,loginWithGoogle:p,registerWithGoogle:m,logout:g,updateProfile:w,refreshUser:v};return N.createElement(Ll.Provider,{value:x},t)},kt=()=>{const t=d.useContext(Ll);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};var _0=Object.defineProperty,S0=(t,e,n)=>e in t?_0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,es=(t,e,n)=>(S0(t,typeof e!="symbol"?e+"":e,n),n);let I0=class{constructor(){es(this,"current",this.detect()),es(this,"handoffState","pending"),es(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Te=new I0;function Sr(t){var e,n;return Te.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function Ir(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function Be(){let t=[],e={addEventListener(n,r,s,o){return n.addEventListener(r,s,o),e.add(()=>n.removeEventListener(r,s,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Ir(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=Be();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function To(){let[t]=d.useState(Be);return d.useEffect(()=>()=>t.dispose(),[t]),t}let J=(t,e)=>{Te.isServer?d.useEffect(t,e):d.useLayoutEffect(t,e)};function jt(t){let e=d.useRef(t);return J(()=>{e.current=t},[t]),e}let q=function(t){let e=jt(t);return N.useCallback((...n)=>e.current(...n),[e])},C0=d.createContext(void 0);function P0(){return d.useContext(C0)}function As(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function We(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,We),r}var or=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(or||{}),Qe=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Qe||{});function ue(){let t=N0();return d.useCallback(e=>A0({mergeRefs:t,...e}),[t])}function A0({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:o=!0,name:i,mergeRefs:l}){l=l??k0;let c=Fl(e,t);if(o)return Nn(c,n,r,i,l);let u=s??0;if(u&2){let{static:f=!1,...h}=c;if(f)return Nn(h,n,r,i,l)}if(u&1){let{unmount:f=!0,...h}=c;return We(f?0:1,{0(){return null},1(){return Nn({...h,hidden:!0,style:{display:"none"}},n,r,i,l)}})}return Nn(c,n,r,i,l)}function Nn(t,e={},n,r,s){let{as:o=n,children:i,refName:l="ref",...c}=ts(t,["unmount","static"]),u=t.ref!==void 0?{[l]:t.ref}:{},f=typeof i=="function"?i(e):i;"className"in c&&c.className&&typeof c.className=="function"&&(c.className=c.className(e)),c["aria-labelledby"]&&c["aria-labelledby"]===c.id&&(c["aria-labelledby"]=void 0);let h={};if(e){let p=!1,m=[];for(let[g,w]of Object.entries(e))typeof w=="boolean"&&(p=!0),w===!0&&m.push(g.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){h["data-headlessui-state"]=m.join(" ");for(let g of m)h[`data-${g}`]=""}}if(o===d.Fragment&&(Object.keys(pt(c)).length>0||Object.keys(pt(h)).length>0))if(!d.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(pt(c)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(pt(c)).concat(Object.keys(pt(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=f.props,m=p?.className,g=typeof m=="function"?(...x)=>As(m(...x),c.className):As(m,c.className),w=g?{className:g}:{},v=Fl(f.props,pt(ts(c,["ref"])));for(let x in h)x in v&&delete h[x];return d.cloneElement(f,Object.assign({},v,h,u,{ref:s(j0(f),u.ref)},w))}return d.createElement(o,Object.assign({},ts(c,["ref"]),o!==d.Fragment&&u,o!==d.Fragment&&h),f)}function N0(){let t=d.useRef([]),e=d.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function k0(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Fl(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var o;return(o=s?.preventDefault)==null?void 0:o.call(s)}]);for(let r in n)Object.assign(e,{[r](s,...o){let i=n[r];for(let l of i){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;l(s,...o)}}});return e}function te(t){var e;return Object.assign(d.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function pt(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function ts(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function j0(t){return N.version.split(".")[0]>="19"?t.props.ref:t.ref}let R0="span";var ir=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(ir||{});function O0(t,e){var n;let{features:r=1,...s}=t,o={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ue()({ourProps:o,theirProps:s,slot:{},defaultTag:R0,name:"Hidden"})}let Ns=te(O0);function Ml(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function ot(t){return Ml(t)&&"tagName"in t}function At(t){return ot(t)&&"accessKey"in t}function Ze(t){return ot(t)&&"tabIndex"in t}function D0(t){return ot(t)&&"style"in t}function L0(t){return At(t)&&t.nodeName==="IFRAME"}function F0(t){return At(t)&&t.nodeName==="INPUT"}let $l=Symbol();function M0(t,e=!0){return Object.assign(t,{[$l]:e})}function Ae(...t){let e=d.useRef(t);d.useEffect(()=>{e.current=t},[t]);let n=q(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||r?.[$l])?void 0:n}let _o=d.createContext(null);_o.displayName="DescriptionContext";function Ul(){let t=d.useContext(_o);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Ul),e}return t}function $0(){let[t,e]=d.useState([]);return[t.length>0?t.join(" "):void 0,d.useMemo(()=>function(n){let r=q(o=>(e(i=>[...i,o]),()=>e(i=>{let l=i.slice(),c=l.indexOf(o);return c!==-1&&l.splice(c,1),l}))),s=d.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return N.createElement(_o.Provider,{value:s},n.children)},[e])]}let U0="p";function z0(t,e){let n=d.useId(),r=P0(),{id:s=`headlessui-description-${n}`,...o}=t,i=Ul(),l=Ae(e);J(()=>i.register(s),[s,i.register]);let c=r||!1,u=d.useMemo(()=>({...i.slot,disabled:c}),[i.slot,c]),f={ref:l,...i.props,id:s};return ue()({ourProps:f,theirProps:o,slot:u,defaultTag:U0,name:i.name||"Description"})}let V0=te(z0),H0=Object.assign(V0,{});var zl=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(zl||{});let W0=d.createContext(()=>{});function B0({value:t,children:e}){return N.createElement(W0.Provider,{value:t},e)}let Vl=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var q0=Object.defineProperty,G0=(t,e,n)=>e in t?q0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,K0=(t,e,n)=>(G0(t,e+"",n),n),Hl=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ce=(t,e,n)=>(Hl(t,e,"read from private field"),n?n.call(t):e.get(t)),ns=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Di=(t,e,n,r)=>(Hl(t,e,"write to private field"),e.set(t,n),n),ye,Zt,en;let Y0=class{constructor(e){ns(this,ye,{}),ns(this,Zt,new Vl(()=>new Set)),ns(this,en,new Set),K0(this,"disposables",Be()),Di(this,ye,e),Te.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ce(this,ye)}subscribe(e,n){if(Te.isServer)return()=>{};let r={selector:e,callback:n,current:e(ce(this,ye))};return ce(this,en).add(r),this.disposables.add(()=>{ce(this,en).delete(r)})}on(e,n){return Te.isServer?()=>{}:(ce(this,Zt).get(e).add(n),this.disposables.add(()=>{ce(this,Zt).get(e).delete(n)}))}send(e){let n=this.reduce(ce(this,ye),e);if(n!==ce(this,ye)){Di(this,ye,n);for(let r of ce(this,en)){let s=r.selector(ce(this,ye));Wl(r.current,s)||(r.current=s,r.callback(s))}for(let r of ce(this,Zt).get(e.type))r(ce(this,ye),e)}}};ye=new WeakMap,Zt=new WeakMap,en=new WeakMap;function Wl(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:rs(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:rs(t.entries(),e.entries()):Li(t)&&Li(e)?rs(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function rs(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Li(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var J0=Object.defineProperty,X0=(t,e,n)=>e in t?J0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Fi=(t,e,n)=>(X0(t,typeof e!="symbol"?e+"":e,n),n),Q0=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(Q0||{});let Z0={0(t,e){let n=e.id,r=t.stack,s=t.stack.indexOf(n);if(s!==-1){let o=t.stack.slice();return o.splice(s,1),o.push(n),r=o,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let s=t.stack.slice();return s.splice(r,1),{...t,stack:s}}},ew=class Bl extends Y0{constructor(){super(...arguments),Fi(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),Fi(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new Bl({stack:[]})}reduce(e,n){return We(n.type,Z0,e,n)}};const ql=new Vl(()=>ew.new());var Gl={exports:{}},Kl={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xn=d;function tw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var nw=typeof Object.is=="function"?Object.is:tw,rw=xn.useSyncExternalStore,sw=xn.useRef,ow=xn.useEffect,iw=xn.useMemo,aw=xn.useDebugValue;Kl.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var o=sw(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=iw(function(){function c(m){if(!u){if(u=!0,f=m,m=r(m),s!==void 0&&i.hasValue){var g=i.value;if(s(g,m))return h=g}return h=m}if(g=h,nw(f,m))return g;var w=r(m);return s!==void 0&&s(g,w)?(f=m,g):(f=m,h=w)}var u=!1,f,h,p=n===void 0?null:n;return[function(){return c(e())},p===null?void 0:function(){return c(p())}]},[e,n,r,s]);var l=rw(t,o[0],o[1]);return ow(function(){i.hasValue=!0,i.value=l},[l]),aw(l),l};Gl.exports=Kl;var cw=Gl.exports;function Yl(t,e,n=Wl){return cw.useSyncExternalStoreWithSelector(q(r=>t.subscribe(lw,r)),q(()=>t.state),q(()=>t.state),q(e),n)}function lw(t){return t}function En(t,e){let n=d.useId(),r=ql.get(e),[s,o]=Yl(r,d.useCallback(i=>[r.selectors.isTop(i,n),r.selectors.inStack(i,n)],[r,n]));return J(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?o?s:!0:!1}let ks=new Map,an=new Map;function Mi(t){var e;let n=(e=an.get(t))!=null?e:0;return an.set(t,n+1),n!==0?()=>$i(t):(ks.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>$i(t))}function $i(t){var e;let n=(e=an.get(t))!=null?e:1;if(n===1?an.delete(t):an.set(t,n-1),n!==1)return;let r=ks.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,ks.delete(t))}function uw(t,{allowed:e,disallowed:n}={}){let r=En(t,"inert-others");J(()=>{var s,o;if(!r)return;let i=Be();for(let c of(s=n?.())!=null?s:[])c&&i.add(Mi(c));let l=(o=e?.())!=null?o:[];for(let c of l){if(!c)continue;let u=Sr(c);if(!u)continue;let f=c.parentElement;for(;f&&f!==u.body;){for(let h of f.children)l.some(p=>h.contains(p))||i.add(Mi(h));f=f.parentElement}}return i.dispose},[r,e,n])}function dw(t,e,n){let r=jt(s=>{let o=s.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});d.useEffect(()=>{if(!t)return;let s=e===null?null:At(e)?e:e.current;if(!s)return;let o=Be();if(typeof ResizeObserver<"u"){let i=new ResizeObserver(()=>r.current(s));i.observe(s),o.add(()=>i.disconnect())}if(typeof IntersectionObserver<"u"){let i=new IntersectionObserver(()=>r.current(s));i.observe(s),o.add(()=>i.disconnect())}return()=>o.dispose()},[e,r,t])}let ar=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),fw=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var De=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(De||{}),js=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(js||{}),hw=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(hw||{});function pw(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(ar)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function mw(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(fw)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var Jl=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))(Jl||{});function gw(t,e=0){var n;return t===((n=Sr(t))==null?void 0:n.body)?!1:We(e,{0(){return t.matches(ar)},1(){let r=t;for(;r!==null;){if(r.matches(ar))return!0;r=r.parentElement}return!1}})}var yw=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(yw||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Me(t){t?.focus({preventScroll:!0})}let vw=["textarea","input"].join(",");function ww(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,vw))!=null?n:!1}function bw(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),o=e(r);if(s===null||o===null)return 0;let i=s.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function cn(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,i=Array.isArray(t)?n?bw(t):t:e&64?mw(t):pw(t);s.length>0&&i.length>1&&(i=i.filter(m=>!s.some(g=>g!=null&&"current"in g?g?.current===m:g===m))),r=r??o.activeElement;let l=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),c=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,i.indexOf(r))-1;if(e&4)return Math.max(0,i.indexOf(r))+1;if(e&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},f=0,h=i.length,p;do{if(f>=h||f+h<=0)return 0;let m=c+f;if(e&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}p=i[m],p?.focus(u),f+=l}while(p!==o.activeElement);return e&6&&ww(p)&&p.select(),2}function Xl(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function xw(){return/Android/gi.test(window.navigator.userAgent)}function Ui(){return Xl()||xw()}function kn(t,e,n,r){let s=jt(n);d.useEffect(()=>{if(!t)return;function o(i){s.current(i)}return document.addEventListener(e,o,r),()=>document.removeEventListener(e,o,r)},[t,e,r])}function Ql(t,e,n,r){let s=jt(n);d.useEffect(()=>{if(!t)return;function o(i){s.current(i)}return window.addEventListener(e,o,r),()=>window.removeEventListener(e,o,r)},[t,e,r])}const zi=30;function Ew(t,e,n){let r=jt(n),s=d.useCallback(function(l,c){if(l.defaultPrevented)return;let u=c(l);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let f=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let h of f)if(h!==null&&(h.contains(u)||l.composed&&l.composedPath().includes(h)))return;return!gw(u,Jl.Loose)&&u.tabIndex!==-1&&l.preventDefault(),r.current(l,u)},[r,e]),o=d.useRef(null);kn(t,"pointerdown",l=>{var c,u;Ui()||(o.current=((u=(c=l.composedPath)==null?void 0:c.call(l))==null?void 0:u[0])||l.target)},!0),kn(t,"pointerup",l=>{if(Ui()||!o.current)return;let c=o.current;return o.current=null,s(l,()=>c)},!0);let i=d.useRef({x:0,y:0});kn(t,"touchstart",l=>{i.current.x=l.touches[0].clientX,i.current.y=l.touches[0].clientY},!0),kn(t,"touchend",l=>{let c={x:l.changedTouches[0].clientX,y:l.changedTouches[0].clientY};if(!(Math.abs(c.x-i.current.x)>=zi||Math.abs(c.y-i.current.y)>=zi))return s(l,()=>Ze(l.target)?l.target:null)},!0),Ql(t,"blur",l=>s(l,()=>L0(window.document.activeElement)?window.document.activeElement:null),!0)}function Cr(...t){return d.useMemo(()=>Sr(...t),[...t])}function Zl(t,e,n,r){let s=jt(n);d.useEffect(()=>{t=t??window;function o(i){s.current(i)}return t.addEventListener(e,o,r),()=>t.removeEventListener(e,o,r)},[t,e,r])}function Tw(t){return d.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function _w(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...o){let i=e[s].call(n,...o);i&&(n=i,r.forEach(l=>l()))}}}function Sw(){let t;return{before({doc:e}){var n;let r=e.documentElement,s=(n=e.defaultView)!=null?n:window;t=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,t-s);n.style(r,"paddingRight",`${o}px`)}}}function Iw(){return Xl()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let l=Be();l.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>l.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,i=null;e.addEventListener(t,"click",l=>{if(Ze(l.target))try{let c=l.target.closest("a");if(!c)return;let{hash:u}=new URL(c.href),f=t.querySelector(u);Ze(f)&&!r(f)&&(i=f)}catch{}},!0),e.addEventListener(t,"touchstart",l=>{if(Ze(l.target)&&D0(l.target))if(r(l.target)){let c=l.target;for(;c.parentElement&&r(c.parentElement);)c=c.parentElement;e.style(c,"overscrollBehavior","contain")}else e.style(l.target,"touchAction","none")}),e.addEventListener(t,"touchmove",l=>{if(Ze(l.target)){if(F0(l.target))return;if(r(l.target)){let c=l.target;for(;c.parentElement&&c.dataset.headlessuiPortal!==""&&!(c.scrollHeight>c.clientHeight||c.scrollWidth>c.clientWidth);)c=c.parentElement;c.dataset.headlessuiPortal===""&&l.preventDefault()}else l.preventDefault()}},{passive:!1}),e.add(()=>{var l;let c=(l=window.scrollY)!=null?l:window.pageYOffset;o!==c&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function Cw(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function Pw(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let vt=_w(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:Be(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:Pw(n)},s=[Iw(),Sw(),Cw()];s.forEach(({before:o})=>o?.(r)),s.forEach(({after:o})=>o?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});vt.subscribe(()=>{let t=vt.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&vt.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&vt.dispatch("TEARDOWN",n)}});function Aw(t,e,n=()=>({containers:[]})){let r=Tw(vt),s=e?r.get(e):void 0,o=s?s.count>0:!1;return J(()=>{if(!(!e||!t))return vt.dispatch("PUSH",e,n),()=>vt.dispatch("POP",e,n)},[t,e]),o}function Nw(t,e,n=()=>[document.body]){let r=En(t,"scroll-lock");Aw(r,e,s=>{var o;return{containers:[...(o=s.containers)!=null?o:[],n]}})}function kw(t=0){let[e,n]=d.useState(t),r=d.useCallback(c=>n(c),[e]),s=d.useCallback(c=>n(u=>u|c),[e]),o=d.useCallback(c=>(e&c)===c,[e]),i=d.useCallback(c=>n(u=>u&~c),[n]),l=d.useCallback(c=>n(u=>u^c),[n]);return{flags:e,setFlag:r,addFlag:s,hasFlag:o,removeFlag:i,toggleFlag:l}}var jw={},Vi,Hi;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Vi=process==null?void 0:jw)==null?void 0:Vi.NODE_ENV)==="test"&&typeof((Hi=Element?.prototype)==null?void 0:Hi.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var Rw=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(Rw||{});function Ow(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function Dw(t,e,n,r){let[s,o]=d.useState(n),{hasFlag:i,addFlag:l,removeFlag:c}=kw(t&&s?3:0),u=d.useRef(!1),f=d.useRef(!1),h=To();return J(()=>{var p;if(t){if(n&&o(!0),!e){n&&l(3);return}return(p=r?.start)==null||p.call(r,n),Lw(e,{inFlight:u,prepare(){f.current?f.current=!1:f.current=u.current,u.current=!0,!f.current&&(n?(l(3),c(4)):(l(4),c(2)))},run(){f.current?n?(c(3),l(4)):(c(4),l(3)):n?c(1):l(1)},done(){var m;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,c(7),n||o(!1),(m=r?.end)==null||m.call(r,n))}})}},[t,n,e,h]),t?[s,{closed:i(1),enter:i(2),leave:i(4),transition:i(2)||i(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function Lw(t,{prepare:e,run:n,done:r,inFlight:s}){let o=Be();return Mw(t,{prepare:e,inFlight:s}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(Fw(t,r))})}),o.dispose}function Fw(t,e){var n,r;let s=Be();if(!t)return s.dispose;let o=!1;s.add(()=>{o=!0});let i=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(l=>l instanceof CSSTransition))!=null?r:[];return i.length===0?(e(),s.dispose):(Promise.allSettled(i.map(l=>l.finished)).then(()=>{o||e()}),s.dispose)}function Mw(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function So(t,e){let n=d.useRef([]),r=q(t);d.useEffect(()=>{let s=[...n.current];for(let[o,i]of e.entries())if(n.current[o]!==i){let l=r(e,s);return n.current=e,l}},[r,...e])}let Pr=d.createContext(null);Pr.displayName="OpenClosedContext";var he=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(he||{});function Ar(){return d.useContext(Pr)}function $w({value:t,children:e}){return N.createElement(Pr.Provider,{value:t},e)}function Uw({children:t}){return N.createElement(Pr.Provider,{value:null},t)}function zw(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Je=[];zw(()=>{function t(e){if(!Ze(e.target)||e.target===document.body||Je[0]===e.target)return;let n=e.target;n=n.closest(ar),Je.unshift(n??e.target),Je=Je.filter(r=>r!=null&&r.isConnected),Je.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function eu(t){let e=q(t),n=d.useRef(!1);d.useEffect(()=>(n.current=!1,()=>{n.current=!0,Ir(()=>{n.current&&e()})}),[e])}function Vw(){let t=typeof document>"u";return"useSyncExternalStore"in Po?(e=>e.useSyncExternalStore)(Po)(()=>()=>{},()=>!1,()=>!t):!1}function Tn(){let t=Vw(),[e,n]=d.useState(Te.isHandoffComplete);return e&&Te.isHandoffComplete===!1&&n(!1),d.useEffect(()=>{e!==!0&&n(!0)},[e]),d.useEffect(()=>Te.handoff(),[]),t?!1:e}let tu=d.createContext(!1);function Hw(){return d.useContext(tu)}function Wi(t){return N.createElement(tu.Provider,{value:t.force},t.children)}function Ww(t){let e=Hw(),n=d.useContext(ru),[r,s]=d.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(Te.isServer)return null;let i=t?.getElementById("headlessui-portal-root");if(i)return i;if(t===null)return null;let l=t.createElement("div");return l.setAttribute("id","headlessui-portal-root"),t.body.appendChild(l)});return d.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),d.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let nu=d.Fragment,Bw=te(function(t,e){let{ownerDocument:n=null,...r}=t,s=d.useRef(null),o=Ae(M0(m=>{s.current=m}),e),i=Cr(s),l=n??i,c=Ww(l),[u]=d.useState(()=>{var m;return Te.isServer?null:(m=l?.createElement("div"))!=null?m:null}),f=d.useContext(Rs),h=Tn();J(()=>{!c||!u||c.contains(u)||(u.setAttribute("data-headlessui-portal",""),c.appendChild(u))},[c,u]),J(()=>{if(u&&f)return f.register(u)},[f,u]),eu(()=>{var m;!c||!u||(Ml(u)&&c.contains(u)&&c.removeChild(u),c.childNodes.length<=0&&((m=c.parentElement)==null||m.removeChild(c)))});let p=ue();return h?!c||!u?null:cr.createPortal(p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:nu,name:"Portal"}),u):null});function qw(t,e){let n=Ae(e),{enabled:r=!0,ownerDocument:s,...o}=t,i=ue();return r?N.createElement(Bw,{...o,ownerDocument:s,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:nu,name:"Portal"})}let Gw=d.Fragment,ru=d.createContext(null);function Kw(t,e){let{target:n,...r}=t,s={ref:Ae(e)},o=ue();return N.createElement(ru.Provider,{value:n},o({ourProps:s,theirProps:r,defaultTag:Gw,name:"Popover.Group"}))}let Rs=d.createContext(null);function Yw(){let t=d.useContext(Rs),e=d.useRef([]),n=q(o=>(e.current.push(o),t&&t.register(o),()=>r(o))),r=q(o=>{let i=e.current.indexOf(o);i!==-1&&e.current.splice(i,1),t&&t.unregister(o)}),s=d.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,d.useMemo(()=>function({children:o}){return N.createElement(Rs.Provider,{value:s},o)},[s])]}let Jw=te(qw),su=te(Kw),Xw=Object.assign(Jw,{Group:su});function Qw(t,e=typeof document<"u"?document.defaultView:null,n){let r=En(t,"escape");Zl(e,"keydown",s=>{r&&(s.defaultPrevented||s.key===zl.Escape&&n(s))})}function Zw(){var t;let[e]=d.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=d.useState((t=e?.matches)!=null?t:!1);return J(()=>{if(!e)return;function s(o){r(o.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),n}function eb({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Cr(n),s=q(()=>{var o,i;let l=[];for(let c of t)c!==null&&(ot(c)?l.push(c):"current"in c&&ot(c.current)&&l.push(c.current));if(e!=null&&e.current)for(let c of e.current)l.push(c);for(let c of(o=r?.querySelectorAll("html > *, body > *"))!=null?o:[])c!==document.body&&c!==document.head&&ot(c)&&c.id!=="headlessui-portal-root"&&(n&&(c.contains(n)||c.contains((i=n?.getRootNode())==null?void 0:i.host))||l.some(u=>c.contains(u))||l.push(c));return l});return{resolveContainers:s,contains:q(o=>s().some(i=>i.contains(o)))}}let ou=d.createContext(null);function Bi({children:t,node:e}){let[n,r]=d.useState(null),s=iu(e??n);return N.createElement(ou.Provider,{value:s},t,s===null&&N.createElement(Ns,{features:ir.Hidden,ref:o=>{var i,l;if(o){for(let c of(l=(i=Sr(o))==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?l:[])if(c!==document.body&&c!==document.head&&ot(c)&&c!=null&&c.contains(o)){r(c);break}}}}))}function iu(t=null){var e;return(e=d.useContext(ou))!=null?e:t}function Io(){let t=d.useRef(!1);return J(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var tn=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(tn||{});function tb(){let t=d.useRef(0);return Ql(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function au(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)ot(n.current)&&e.add(n.current);return e}let nb="div";var mt=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(mt||{});function rb(t,e){let n=d.useRef(null),r=Ae(n,e),{initialFocus:s,initialFocusFallback:o,containers:i,features:l=15,...c}=t;Tn()||(l=0);let u=Cr(n);ab(l,{ownerDocument:u});let f=cb(l,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:o});lb(l,{ownerDocument:u,container:n,containers:i,previousActiveElement:f});let h=tb(),p=q(y=>{if(!At(n.current))return;let b=n.current;(E=>E())(()=>{We(h.current,{[tn.Forwards]:()=>{cn(b,De.First,{skipElements:[y.relatedTarget,o]})},[tn.Backwards]:()=>{cn(b,De.Last,{skipElements:[y.relatedTarget,o]})}})})}),m=En(!!(l&2),"focus-trap#tab-lock"),g=To(),w=d.useRef(!1),v={ref:r,onKeyDown(y){y.key=="Tab"&&(w.current=!0,g.requestAnimationFrame(()=>{w.current=!1}))},onBlur(y){if(!(l&4))return;let b=au(i);At(n.current)&&b.add(n.current);let E=y.relatedTarget;Ze(E)&&E.dataset.headlessuiFocusGuard!=="true"&&(cu(b,E)||(w.current?cn(n.current,We(h.current,{[tn.Forwards]:()=>De.Next,[tn.Backwards]:()=>De.Previous})|De.WrapAround,{relativeTo:y.target}):Ze(y.target)&&Me(y.target)))}},x=ue();return N.createElement(N.Fragment,null,m&&N.createElement(Ns,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ir.Focusable}),x({ourProps:v,theirProps:c,defaultTag:nb,name:"FocusTrap"}),m&&N.createElement(Ns,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:ir.Focusable}))}let sb=te(rb),ob=Object.assign(sb,{features:mt});function ib(t=!0){let e=d.useRef(Je.slice());return So(([n],[r])=>{r===!0&&n===!1&&Ir(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Je.slice())},[t,Je,e]),q(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function ab(t,{ownerDocument:e}){let n=!!(t&8),r=ib(n);So(()=>{n||e?.activeElement===e?.body&&Me(r())},[n]),eu(()=>{n&&Me(r())})}function cb(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:s}){let o=d.useRef(null),i=En(!!(t&1),"focus-trap#initial-focus"),l=Io();return So(()=>{if(t===0)return;if(!i){s!=null&&s.current&&Me(s.current);return}let c=n.current;c&&Ir(()=>{if(!l.current)return;let u=e?.activeElement;if(r!=null&&r.current){if(r?.current===u){o.current=u;return}}else if(c.contains(u)){o.current=u;return}if(r!=null&&r.current)Me(r.current);else{if(t&16){if(cn(c,De.First|De.AutoFocus)!==js.Error)return}else if(cn(c,De.First)!==js.Error)return;if(s!=null&&s.current&&(Me(s.current),e?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=e?.activeElement})},[s,i,t]),o}function lb(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:s}){let o=Io(),i=!!(t&4);Zl(e?.defaultView,"focus",l=>{if(!i||!o.current)return;let c=au(r);At(n.current)&&c.add(n.current);let u=s.current;if(!u)return;let f=l.target;At(f)?cu(c,f)?(s.current=f,Me(f)):(l.preventDefault(),l.stopPropagation(),Me(u)):Me(s.current)},!0)}function cu(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function lu(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:du)!==d.Fragment||N.Children.count(t.children)===1}let Nr=d.createContext(null);Nr.displayName="TransitionContext";var ub=(t=>(t.Visible="visible",t.Hidden="hidden",t))(ub||{});function db(){let t=d.useContext(Nr);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function fb(){let t=d.useContext(kr);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let kr=d.createContext(null);kr.displayName="NestingContext";function jr(t){return"children"in t?jr(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function uu(t,e){let n=jt(t),r=d.useRef([]),s=Io(),o=To(),i=q((m,g=Qe.Hidden)=>{let w=r.current.findIndex(({el:v})=>v===m);w!==-1&&(We(g,{[Qe.Unmount](){r.current.splice(w,1)},[Qe.Hidden](){r.current[w].state="hidden"}}),o.microTask(()=>{var v;!jr(r)&&s.current&&((v=n.current)==null||v.call(n))}))}),l=q(m=>{let g=r.current.find(({el:w})=>w===m);return g?g.state!=="visible"&&(g.state="visible"):r.current.push({el:m,state:"visible"}),()=>i(m,Qe.Unmount)}),c=d.useRef([]),u=d.useRef(Promise.resolve()),f=d.useRef({enter:[],leave:[]}),h=q((m,g,w)=>{c.current.splice(0),e&&(e.chains.current[g]=e.chains.current[g].filter(([v])=>v!==m)),e?.chains.current[g].push([m,new Promise(v=>{c.current.push(v)})]),e?.chains.current[g].push([m,new Promise(v=>{Promise.all(f.current[g].map(([x,y])=>y)).then(()=>v())})]),g==="enter"?u.current=u.current.then(()=>e?.wait.current).then(()=>w(g)):w(g)}),p=q((m,g,w)=>{Promise.all(f.current[g].splice(0).map(([v,x])=>x)).then(()=>{var v;(v=c.current.shift())==null||v()}).then(()=>w(g))});return d.useMemo(()=>({children:r,register:l,unregister:i,onStart:h,onStop:p,wait:u,chains:f}),[l,i,r,h,p,f,u])}let du=d.Fragment,fu=or.RenderStrategy;function hb(t,e){var n,r;let{transition:s=!0,beforeEnter:o,afterEnter:i,beforeLeave:l,afterLeave:c,enter:u,enterFrom:f,enterTo:h,entered:p,leave:m,leaveFrom:g,leaveTo:w,...v}=t,[x,y]=d.useState(null),b=d.useRef(null),E=lu(t),T=Ae(...E?[b,e,y]:e===null?[]:[e]),S=(n=v.unmount)==null||n?Qe.Unmount:Qe.Hidden,{show:k,appear:M,initial:z}=db(),[O,$]=d.useState(k?"visible":"hidden"),D=fb(),{register:F,unregister:I}=D;J(()=>F(b),[F,b]),J(()=>{if(S===Qe.Hidden&&b.current){if(k&&O!=="visible"){$("visible");return}return We(O,{hidden:()=>I(b),visible:()=>F(b)})}},[O,b,F,I,k,S]);let H=Tn();J(()=>{if(E&&H&&O==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,O,H,E]);let U=z&&!M,V=M&&k&&z,j=d.useRef(!1),W=uu(()=>{j.current||($("hidden"),I(b))},D),K=q(je=>{j.current=!0;let ut=je?"enter":"leave";W.onStart(b,ut,dt=>{dt==="enter"?o?.():dt==="leave"&&l?.()})}),ne=q(je=>{let ut=je?"enter":"leave";j.current=!1,W.onStop(b,ut,dt=>{dt==="enter"?i?.():dt==="leave"&&c?.()}),ut==="leave"&&!jr(W)&&($("hidden"),I(b))});d.useEffect(()=>{E&&s||(K(k),ne(k))},[k,E,s]);let Ne=!(!s||!E||!H||U),[,L]=Dw(Ne,x,k,{start:K,end:ne}),ke=pt({ref:T,className:((r=As(v.className,V&&u,V&&f,L.enter&&u,L.enter&&L.closed&&f,L.enter&&!L.closed&&h,L.leave&&m,L.leave&&!L.closed&&g,L.leave&&L.closed&&w,!L.transition&&k&&p))==null?void 0:r.trim())||void 0,...Ow(L)}),lt=0;O==="visible"&&(lt|=he.Open),O==="hidden"&&(lt|=he.Closed),k&&O==="hidden"&&(lt|=he.Opening),!k&&O==="visible"&&(lt|=he.Closing);let Or=ue();return N.createElement(kr.Provider,{value:W},N.createElement($w,{value:lt},Or({ourProps:ke,theirProps:v,defaultTag:du,features:fu,visible:O==="visible",name:"Transition.Child"})))}function pb(t,e){let{show:n,appear:r=!1,unmount:s=!0,...o}=t,i=d.useRef(null),l=lu(t),c=Ae(...l?[i,e]:e===null?[]:[e]);Tn();let u=Ar();if(n===void 0&&u!==null&&(n=(u&he.Open)===he.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,h]=d.useState(n?"visible":"hidden"),p=uu(()=>{n||h("hidden")}),[m,g]=d.useState(!0),w=d.useRef([n]);J(()=>{m!==!1&&w.current[w.current.length-1]!==n&&(w.current.push(n),g(!1))},[w,n]);let v=d.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);J(()=>{n?h("visible"):!jr(p)&&i.current!==null&&h("hidden")},[n,p]);let x={unmount:s},y=q(()=>{var T;m&&g(!1),(T=t.beforeEnter)==null||T.call(t)}),b=q(()=>{var T;m&&g(!1),(T=t.beforeLeave)==null||T.call(t)}),E=ue();return N.createElement(kr.Provider,{value:p},N.createElement(Nr.Provider,{value:v},E({ourProps:{...x,as:d.Fragment,children:N.createElement(hu,{ref:c,...x,...o,beforeEnter:y,beforeLeave:b})},theirProps:{},defaultTag:d.Fragment,features:fu,visible:f==="visible",name:"Transition"})))}function mb(t,e){let n=d.useContext(Nr)!==null,r=Ar()!==null;return N.createElement(N.Fragment,null,!n&&r?N.createElement(Os,{ref:e,...t}):N.createElement(hu,{ref:e,...t}))}let Os=te(pb),hu=te(hb),X=te(mb),et=Object.assign(Os,{Child:X,Root:Os});var gb=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(gb||{}),yb=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(yb||{});let vb={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Co=d.createContext(null);Co.displayName="DialogContext";function Rr(t){let e=d.useContext(Co);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Rr),n}return e}function wb(t,e){return We(e.type,vb,t,e)}let qi=te(function(t,e){let n=d.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:o,initialFocus:i,role:l="dialog",autoFocus:c=!0,__demoMode:u=!1,unmount:f=!1,...h}=t,p=d.useRef(!1);l=function(){return l==="dialog"||l==="alertdialog"?l:(p.current||(p.current=!0,console.warn(`Invalid role [${l}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Ar();s===void 0&&m!==null&&(s=(m&he.Open)===he.Open);let g=d.useRef(null),w=Ae(g,e),v=Cr(g),x=s?0:1,[y,b]=d.useReducer(wb,{titleId:null,descriptionId:null,panelRef:d.createRef()}),E=q(()=>o(!1)),T=q(L=>b({type:0,id:L})),S=Tn()?x===0:!1,[k,M]=Yw(),z={get current(){var L;return(L=y.panelRef.current)!=null?L:g.current}},O=iu(),{resolveContainers:$}=eb({mainTreeNode:O,portals:k,defaultContainers:[z]}),D=m!==null?(m&he.Closing)===he.Closing:!1;uw(u||D?!1:S,{allowed:q(()=>{var L,ke;return[(ke=(L=g.current)==null?void 0:L.closest("[data-headlessui-portal]"))!=null?ke:null]}),disallowed:q(()=>{var L;return[(L=O?.closest("body > *:not(#headlessui-portal-root)"))!=null?L:null]})});let F=ql.get(null);J(()=>{if(S)return F.actions.push(r),()=>F.actions.pop(r)},[F,r,S]);let I=Yl(F,d.useCallback(L=>F.selectors.isTop(L,r),[F,r]));Ew(I,$,L=>{L.preventDefault(),E()}),Qw(I,v?.defaultView,L=>{L.preventDefault(),L.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),E()}),Nw(u||D?!1:S,v,$),dw(S,g,E);let[H,U]=$0(),V=d.useMemo(()=>[{dialogState:x,close:E,setTitleId:T,unmount:f},y],[x,y,E,T,f]),j=d.useMemo(()=>({open:x===0}),[x]),W={ref:w,id:r,role:l,tabIndex:-1,"aria-modal":u?void 0:x===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":H,unmount:f},K=!Zw(),ne=mt.None;S&&!u&&(ne|=mt.RestoreFocus,ne|=mt.TabLock,c&&(ne|=mt.AutoFocus),K&&(ne|=mt.InitialFocus));let Ne=ue();return N.createElement(Uw,null,N.createElement(Wi,{force:!0},N.createElement(Xw,null,N.createElement(Co.Provider,{value:V},N.createElement(su,{target:g},N.createElement(Wi,{force:!1},N.createElement(U,{slot:j},N.createElement(M,null,N.createElement(ob,{initialFocus:i,initialFocusFallback:g,containers:$,features:ne},N.createElement(B0,{value:E},Ne({ourProps:W,theirProps:h,slot:j,defaultTag:bb,features:xb,visible:x===0,name:"Dialog"})))))))))))}),bb="div",xb=or.RenderStrategy|or.Static;function Eb(t,e){let{transition:n=!1,open:r,...s}=t,o=Ar(),i=t.hasOwnProperty("open")||o!==null,l=t.hasOwnProperty("onClose");if(!i&&!l)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!i)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!l)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!s.static?N.createElement(Bi,null,N.createElement(et,{show:r,transition:n,unmount:s.unmount},N.createElement(qi,{ref:e,...s}))):N.createElement(Bi,null,N.createElement(qi,{ref:e,open:r,...s}))}let Tb="div";function _b(t,e){let n=d.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...o}=t,[{dialogState:i,unmount:l},c]=Rr("Dialog.Panel"),u=Ae(e,c.panelRef),f=d.useMemo(()=>({open:i===0}),[i]),h=q(v=>{v.stopPropagation()}),p={ref:u,id:r,onClick:h},m=s?X:d.Fragment,g=s?{unmount:l}:{},w=ue();return N.createElement(m,{...g},w({ourProps:p,theirProps:o,slot:f,defaultTag:Tb,name:"Dialog.Panel"}))}let Sb="div";function Ib(t,e){let{transition:n=!1,...r}=t,[{dialogState:s,unmount:o}]=Rr("Dialog.Backdrop"),i=d.useMemo(()=>({open:s===0}),[s]),l={ref:e,"aria-hidden":!0},c=n?X:d.Fragment,u=n?{unmount:o}:{},f=ue();return N.createElement(c,{...u},f({ourProps:l,theirProps:r,slot:i,defaultTag:Sb,name:"Dialog.Backdrop"}))}let Cb="h2";function Pb(t,e){let n=d.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:o,setTitleId:i}]=Rr("Dialog.Title"),l=Ae(e);d.useEffect(()=>(i(r),()=>i(null)),[r,i]);let c=d.useMemo(()=>({open:o===0}),[o]),u={ref:l,id:r};return ue()({ourProps:u,theirProps:s,slot:c,defaultTag:Cb,name:"Dialog.Title"})}let Ab=te(Eb),tt=te(_b);te(Ib);let _n=te(Pb),wt=Object.assign(Ab,{Panel:tt,Title:_n,Description:H0});const Nb=ur("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),Q=d.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const i=r?zu:"button";return a.jsx(i,{"data-slot":"button",className:G(Nb({variant:e,size:n,className:t})),ref:o,...s})});Q.displayName="Button";const kb="/assets/bitties-CY93OoX2.png";function jb({isOpen:t,setIsOpen:e,onSignIn:n,onSignUp:r,action:s="access this feature"}){return a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>e(!1),children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center px-4",children:a.jsxs(tt,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-900/95 to-black/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all",children:[a.jsx("div",{className:"relative p-6 pb-0",children:a.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:a.jsx(Bt,{className:"h-2.5 w-2.5 text-gray-400"})})}),a.jsxs("div",{className:"px-6 pb-6",children:[a.jsx("div",{className:"flex justify-center mb-6",children:a.jsxs("div",{className:"relative",children:[a.jsx("img",{src:kb,alt:"MedusaVR Premium",className:"w-32 h-32 rounded-full object-cover border-4 border-gradient-to-r from-orange-400 to-orange-600 shadow-lg"}),a.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-orange-400 to-orange-600 rounded-full p-2",children:a.jsx(Ao,{className:"h-5 w-5 text-white"})})]})}),a.jsx(_n,{className:"text-3xl font-bold text-center mb-4",children:a.jsx("span",{className:"bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Join MedusaVR"})}),a.jsxs("p",{className:"text-center text-zinc-300 mb-6 text-lg",children:["Sign up to ",s," and unlock exclusive features"]}),a.jsxs("div",{className:"space-y-3 mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[a.jsx(Ku,{className:"h-5 w-5 text-red-500"}),a.jsx("span",{children:"Save your favorite characters"})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[a.jsx(Yu,{className:"h-5 w-5 text-yellow-500"}),a.jsx("span",{children:"Unlimited conversations"})]}),a.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[a.jsx(Ao,{className:"h-5 w-5 text-orange-500"}),a.jsx("span",{children:"Premium character access"})]})]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx(Q,{onClick:()=>{e(!1),r()},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg shadow-orange-500/25",children:"Get Started Free"}),a.jsx(Q,{onClick:()=>{e(!1),n()},variant:"outline",className:"w-full border-zinc-600 text-zinc-300 hover:bg-zinc-800 hover:text-white font-semibold py-3 rounded-xl transition-all duration-200",children:"Already have an account? Sign In"})]}),a.jsx("p",{className:"text-center text-zinc-500 text-sm mt-4",children:"Join thousands of users enjoying premium AI conversations"})]})]})})]})})}const pu=d.createContext(void 0);function mu(){const t=d.useContext(pu);if(!t)throw new Error("useSubscriptionModal must be used within a SubscriptionModalProvider");return t}function Rb({children:t,onSignIn:e,onSignUp:n}){const[r,s]=d.useState(!1),[o,i]=d.useState("access this feature"),u={showSubscriptionModal:f=>{f&&i(f),s(!0)},hideSubscriptionModal:()=>{s(!1)},isSubscriptionModalOpen:r};return a.jsxs(pu.Provider,{value:u,children:[t,a.jsx(jb,{isOpen:r,setIsOpen:s,onSignIn:e,onSignUp:n,action:o})]})}class Ob extends d.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?a.jsx("div",{className:"p-6 text-center",children:a.jsx("h2",{className:"text-lg font-semibold",children:"Something went wrong while loading the page."})}):this.props.children}}class Db{async getCharacters(e){const n=new URLSearchParams;return e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),e?.sort&&n.set("sort",e.sort),e?.filter&&n.set("filter",e.filter),e?.category&&n.set("category",e.category),await(await _("GET",`/api/characters?${n.toString()}`)).json()}async getCharacter(e){return await(await _("GET",`/api/characters/${e}`)).json()}async createCharacter(e){return await(await _("POST","/api/characters",e)).json()}async updateCharacter(e,n){return await(await _("PUT",`/api/characters/${e}`,n)).json()}async deleteCharacter(e){await _("DELETE",`/api/characters/${e}`)}async uploadCharacterAvatar(e,n){const r=new FormData;r.append("file",n);const s=await fetch(`/api/characters/${e}/avatar`,{method:"POST",body:r,headers:{Authorization:`Bearer ${await re.ensureValidToken()}`}});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);return await s.json()}async deleteCharacterAvatar(e){await _("DELETE",`/api/characters/${e}/avatar`)}async getUserConversations(){return await(await _("GET","/api/conversations")).json()}async sendMessage(e,n){return await(await _("POST",`/api/chat/${e}/message`,n)).json()}async getConversation(e){return await(await _("GET",`/api/chat/${e}`)).json()}async getChatHistory(e){const n=new URLSearchParams;return e?.characterId&&n.set("characterId",e.characterId),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await _("GET",`/api/chat/history?${n.toString()}`)).json()}async deleteConversation(e){await _("DELETE",`/api/conversations/${e}`)}async deleteMessage(e,n){await _("DELETE",`/api/chat/${e}/message/${n}`)}async generateImage(e){return await(await _("POST","/api/image-generation/generate",e)).json()}async getImageModels(){return(await(await _("GET","/api/images/models")).json()).data}async getImages(e){const n=new URLSearchParams;return e?.userId&&n.set("userId",e.userId),e?.characterId&&n.set("characterId",e.characterId),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await _("GET",`/api/images?${n.toString()}`)).json()}async deleteImage(e){await _("DELETE",`/api/images/${e}`)}async search(e){const n=new URLSearchParams;return n.set("q",e.q),e.type&&e.type.forEach(s=>n.append("type[]",s)),e.page&&n.set("page",e.page.toString()),e.limit&&n.set("limit",e.limit.toString()),await(await _("GET",`/api/search?${n.toString()}`)).json()}async getCategories(){return await(await _("GET","/api/categories")).json()}async getCategoryCharacters(e,n){const r=new URLSearchParams;return n?.page&&r.set("page",n.page.toString()),n?.limit&&r.set("limit",n.limit.toString()),await(await _("GET",`/api/categories/${e}/characters?${r.toString()}`)).json()}async getTags(e){const n=new URLSearchParams;return e?.limit!==void 0&&n.set("limit",e.limit.toString()),await(await _("GET",`/api/tags?${n.toString()}`)).json()}async getFollowing(e){return await(await _("GET",`/api/users/${e}/following`)).json()}async getFollowers(e){return await(await _("GET",`/api/users/${e}/followers`)).json()}async followUser(e){return await(await _("POST",`/api/follows/users/${e}/follow`)).json()}async unfollowUser(e){return await(await _("DELETE",`/api/follows/users/${e}/follow`)).json()}async checkFollowStatus(e){return await(await _("GET",`/api/follows/users/${e}/follow-status`)).json()}async getTopCreators(e="month"){return await(await _("GET",`/api/creators/top?period=${e}`)).json()}async subscribe(e,n){return await(await _("POST","/api/payments/subscribe",{planId:e,paymentMethodId:n})).json()}async upgradeSubscription(e,n,r){return await(await _("POST","/api/subscriptions/upgrade",{plan:e,coinsToAward:n,billingPeriod:r})).json()}async getSubscriptionPlans(){return await(await _("GET","/api/subscriptions/plans")).json()}async cancelSubscription(e){return await(await _("POST","/api/subscriptions/cancel",e?{subscriptionId:e}:{})).json()}async getSubscriptionStatus(){try{const n=await(await _("GET","/api/subscriptions/status")).json();return{success:!0,tier:n.tier||"free",subscription:n.subscription||null,permissions:n.permissions||{}}}catch{return console.warn("Subscription status endpoint error, returning defaults"),{success:!1,tier:"free",subscription:null,permissions:{}}}}async getPaymentStatus(){return await(await _("GET","/api/payments/status")).json()}async getInvoices(){try{return await(await _("GET","/api/payments/invoices")).json()}catch{return console.warn("Invoices endpoint not implemented, returning empty array"),{invoices:[]}}}async createPortalSession(){return await(await _("POST","/api/payments/portal-session")).json()}async updatePaymentMethod(){try{return await(await _("POST","/api/payments/update-payment-method")).json()}catch{return console.error("Payment method update not implemented, falling back to portal"),{success:!1,message:"Feature not yet implemented"}}}async updateUserTier(e){try{return await(await _("POST","/api/users/update-tier",{tier:e})).json()}catch(n){return console.error("User tier update error:",n),{success:!0,message:"Tier updated locally",tier:e}}}async getNotifications(e){const n=new URLSearchParams;return e&&n.set("unreadOnly","true"),await(await _("GET",`/api/notifications?${n.toString()}`)).json()}async markNotificationRead(e){await _("PUT",`/api/notifications/${e}/read`)}async deleteNotification(e){await _("DELETE",`/api/notifications/${e}`)}async createSupportTicket(e){return await(await _("POST","/api/support/tickets",e)).json()}async getSupportTickets(e){const n=new URLSearchParams;return e?.status&&n.set("status",e.status),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await _("GET",`/api/support/tickets?${n.toString()}`)).json()}async getSupportTicket(e){return await(await _("GET",`/api/support/tickets/${e}`)).json()}async requestContentRemoval(e){return await(await _("POST","/api/content-removal/request",e)).json()}async updateUserSettings(e){const n=re.getUser();if(!n)throw new Error("User not authenticated");return await(await _("PUT",`/api/users/${n.id}/settings`,e)).json()}async updateUserPreferences(e){const n=re.getUser();if(!n)throw new Error("User not authenticated");const r=await _("PUT",`/api/users/${n.id}/preferences`,e);if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update preferences")}return await r.json()}async getFavorites(){return await(await _("GET","/api/favorites")).json()}async addFavorite(e){await _("POST","/api/favorites",{characterId:e})}async removeFavorite(e){await _("DELETE",`/api/favorites/${e}`)}async toggleFavorite(e){return await(await _("POST","/api/favorites/toggle",{characterId:e})).json()}async likeCharacter(e){await _("POST",`/api/characters/${e}/likes`)}async unlikeCharacter(e){await _("DELETE",`/api/characters/${e}/likes`)}async toggleLike(e){return await(await _("PUT",`/api/characters/${e}/likes`)).json()}async getLikedCharacters(e){return(await(await _("GET",`/api/users/${e}/likedCharacters`)).json()).likedCharacters}async getTermsOfService(){return await(await _("GET","/api/legal/terms")).json()}async getPrivacyPolicy(){return await(await _("GET","/api/legal/privacy")).json()}async getFAQ(){return await(await _("GET","/api/faq")).json()}async getAvailableCryptoCurrencies(){return{currencies:[]}}async createCryptoPayment(e,n){throw new Error("Crypto payments are no longer supported")}async createTrustPayPayment(e){throw new Error("TrustPay payments are no longer supported")}async addCoinsManually(e){return await(await _("POST","/api/auth/add-coins",{amount:100})).json()}async mockCoinPurchase(e,n){return await(await _("POST","/api/auth/add-coins",{amount:n})).json()}async getCoinInfo(){return await(await _("GET","/api/coins/info")).json()}async claimMonthlyCoins(){return await(await _("POST","/api/coins/claim-monthly")).json()}}const bt=new Db,gu=d.createContext(void 0);function CE(){const t=d.useContext(gu);if(!t)throw new Error("useLikes must be used within a LikesProvider");return t}function Lb({children:t}){const{user:e,isAuthenticated:n}=kt(),{showSubscriptionModal:r}=mu(),s=lr(),[o,i]=d.useState([]),[l,c]=d.useState(!1),{data:u=[],isLoading:f}=Ms({queryKey:["likedCharacters",e?.id],queryFn:()=>bt.getLikedCharacters(e?.id),enabled:n&&!!e,staleTime:5*60*1e3});d.useEffect(()=>{if(!n){const g=localStorage.getItem("medusavr-liked-characters");if(g)try{const w=JSON.parse(g);i(w)}catch(w){console.error("Error loading liked characters from localStorage:",w)}}},[n]),d.useEffect(()=>{n||localStorage.setItem("medusavr-liked-characters",JSON.stringify(o))},[o,n]);const m={likedCharacters:n?u:o,isLoading:n&&f||l,isLiked:g=>(n?u:o).includes(g),toggleLike:async g=>{if(l)return console.info("Like toggle already in progress, skipping..."),null;c(!0);try{if(n&&e){const w=await _("PUT",`/api/characters/${g}/likes`,{},{},"high");if(w.ok){const v=await w.json();return s.setQueryData(["likedCharacters",e.id],(x=[])=>v.isLiked?[...x,g]:x.filter(y=>y!==g)),s.invalidateQueries({queryKey:["character",g.toString()]}),s.invalidateQueries({queryKey:["characters"]}),{likes:v.likes,isLiked:v.isLiked}}else{const v=await w.json();return console.error("Toggle like failed:",v),null}}else{const v=o.includes(g);return i(v?x=>x.filter(y=>y!==g):x=>[...x,g]),{likes:0,isLiked:!v}}}catch(w){return w?.isRateLimit||console.error("Failed to toggle like:",w),null}finally{c(!1)}}};return a.jsx(gu.Provider,{value:m,children:t})}const yu=d.createContext(void 0);function PE(){const t=d.useContext(yu);if(!t)throw new Error("useFavorites must be used within a FavoritesProvider");return t}function Fb({children:t}){const{user:e,isAuthenticated:n}=kt(),{showSubscriptionModal:r}=mu(),s=lr(),[o,i]=d.useState([]),{data:l=[],isLoading:c}=Ms({queryKey:["favorites",e?.id],queryFn:bt.getFavorites,enabled:n&&!!e,staleTime:5*60*1e3}),u=l.map(y=>({id:y.id,name:y.name,persona:y.persona||y.description||"",description:y.description,avatar:y.avatar,avatarUrl:y.avatarUrl,isUserCreated:y.isUserCreated||!1,nsfw:y.nsfw,chatCount:y.chatCount,selectedTags:y.selectedTags,tags:y.tags,tagNames:y.tagNames,rating:y.rating}));d.useEffect(()=>{if(!n){const y=localStorage.getItem("medusavr-favorites");if(y)try{const b=JSON.parse(y);i(b)}catch(b){console.error("Error loading favorites from localStorage:",b)}}},[n]),d.useEffect(()=>{n||localStorage.setItem("medusavr-favorites",JSON.stringify(o))},[o,n]);const f=Ot({mutationFn:y=>bt.addFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),h=Ot({mutationFn:y=>bt.removeFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),p=Ot({mutationFn:y=>bt.toggleFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),x={favorites:n?u:o,isLoading:n?c:!1,addToFavorites:async y=>{n&&e?await f.mutateAsync(y.id):r(`add ${y.name} to your favorites`)},removeFromFavorites:async y=>{n&&e?await h.mutateAsync(y):r("manage your favorites")},isFavorite:y=>(n?u:o).some(E=>E.id===y),toggleFavorite:async y=>{n&&e?await p.mutateAsync(y.id):r(`add ${y.name} to your favorites`)}};return a.jsx(yu.Provider,{value:x,children:t})}const jn={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"};function Mb({size:t="md",className:e,showText:n=!0,text:r="Loading..."}){return a.jsxs("div",{className:G("flex flex-col items-center justify-center",e),children:[a.jsxs("div",{className:"relative",children:[a.jsx("div",{className:G("absolute inset-0 rounded-full blur-xl opacity-60 animate-pulse","bg-gradient-to-r from-red-500 via-orange-500 to-red-500",jn[t]),style:{transform:"scale(1.2)",animationDuration:"2s"}}),a.jsx("div",{className:G("absolute inset-0 rounded-full blur-lg opacity-40 animate-pulse","bg-gradient-to-r from-orange-400 via-red-400 to-orange-400",jn[t]),style:{transform:"scale(1.4)",animationDuration:"2.5s",animationDelay:"0.5s"}}),a.jsx("div",{className:G("absolute inset-0 rounded-full bg-gradient-to-r from-orange-500 via-amber-500 to-orange-500 blur-md opacity-20 animate-spin",jn[t]),style:{animationDuration:"3s"}}),a.jsx("div",{className:G("relative rounded-full bg-gradient-to-br from-zinc-800 to-zinc-900 border-2 border-orange-500/20 flex items-center justify-center","shadow-2xl shadow-orange-500/10 animate-slow-spin",jn[t]),children:a.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR",className:"w-3/4 h-3/4 object-contain opacity-90",onError:s=>{const o=s.target;o.style.display="none",o.parentElement.innerHTML='<div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>'}})})]}),n&&a.jsx("p",{className:"mt-6 text-sm text-zinc-300 animate-pulse font-medium",children:r})]})}const Gi=d.lazy(()=>A(()=>import("./ForYouPage-Cb8Pdg-P.js"),__vite__mapDeps([7,1,2,3,8,4,6,9,5]))),$b=d.lazy(()=>A(()=>import("./following-C7JEhe5P.js"),__vite__mapDeps([10,1,2,3,8,4,6,11,5]))),Ub=d.lazy(()=>A(()=>import("./creators-gYXoofE9.js"),__vite__mapDeps([12,1,2,3,4,13,6,11,5]))),zb=d.lazy(()=>A(()=>import("./creator-profile-CkDh1IcN.js"),__vite__mapDeps([14,1,2,3,4,8,6,11,5]))),Ki=d.lazy(()=>A(()=>import("./recent-chats-ZHJ4OfdK.js"),__vite__mapDeps([15,1,2,3,4,11,6,5]))),Vb=d.lazy(()=>A(()=>import("./SubscribePage-D1y6IbdD.js"),__vite__mapDeps([16,1,2,3,6,4,5]))),Hb=d.lazy(()=>A(()=>import("./SubscriptionManagePage-CJtZQ8Ub.js"),__vite__mapDeps([17,1,2,3,6,4,5]))),Wb=d.lazy(()=>A(()=>import("./SubscriptionSuccessPage-DFY9Ml88.js"),__vite__mapDeps([18,1,2,3,13,6,4,5]))),Bb=d.lazy(()=>A(()=>import("./SubscriptionCancelPage-a2GvJoCq.js"),__vite__mapDeps([19,1,2,3,13,6,4,5]))),qb=d.lazy(()=>A(()=>import("./CoinsPage-uNOfIQ2W.js"),__vite__mapDeps([20,1,2,3,13,6,4,5]))),Gb=d.lazy(()=>A(()=>import("./SettingsPage-BTTO9bV5.js"),__vite__mapDeps([21,1,2,3,4,22,5,6])));d.lazy(()=>A(()=>import("./not-found-1SwJj7mB.js"),__vite__mapDeps([23,1,2,3,13,6,4,5])));const Yi=d.lazy(()=>A(()=>import("./ChatPage-CiJmMgPs.js"),__vite__mapDeps([24,1,2,3,6,25,26,27,4,28,5])));d.lazy(()=>A(()=>import("./CharacterProfile-DlpZIbnS.js"),__vite__mapDeps([29,1,2,3,30,4,31,6,27,13,9,32,5])));const Kb=d.lazy(()=>A(()=>import("./CharacterPage-B3H4UaeE.js"),__vite__mapDeps([30,1,2,3,4,31,6,27,13,9,32,5]))),Yb=d.lazy(()=>A(()=>import("./FavoritesPage-DxeOgUoW.js"),__vite__mapDeps([33,1,2,3,8,4,6,5]))),Ji=d.lazy(()=>A(()=>import("./NotFoundPage-DVh_ZfGy.js"),__vite__mapDeps([34,1,2,3,6]))),Xi=d.lazy(()=>A(()=>import("./UserProfilePage-CXKJsaST.js"),__vite__mapDeps([35,1,2,3,4,8,6,36,22,5])).then(t=>({default:t.default}))),Qi=d.lazy(()=>A(()=>import("./UserGalleryPage-CsPSH9rA.js"),__vite__mapDeps([37,1,2,3,4,6,5]))),Jb=d.lazy(()=>A(()=>import("./CharacterGallery-BxvQpcIr.js"),__vite__mapDeps([38,1,2,3,39,31,6,5,4,8]))),Xb=d.lazy(()=>A(()=>import("./UserCharacterGalleryPage-CLQ7yWAA.js"),__vite__mapDeps([40,1,2,3,4,6,5]))),Qb=d.lazy(()=>A(()=>import("./AllUserImagesPage-mLPi1Bzk.js"),__vite__mapDeps([41,1,2,3,4,13,5,6]))),Zb=d.lazy(()=>A(()=>import("./ShowcasePage-CnF_KthO.js"),__vite__mapDeps([42,1,2,3,8,4,6,5]))),ex=d.lazy(()=>A(()=>import("./EmailVerificationPage-CvqqzlOa.js"),__vite__mapDeps([43,1,2,3,13,6,4,5]))),tx=d.lazy(()=>A(()=>import("./CreateCharacter-DwIwyxhk.js"),__vite__mapDeps([44,1,2,3,27,13,26,6,4,5]))),nx=d.lazy(()=>A(()=>import("./CreateCharacterEnhanced-DDYw5Yy8.js"),__vite__mapDeps([45,1,2,3,27,13,6,26,4,5]))),rx=d.lazy(()=>A(()=>import("./UserCharacters-BD2YQiUz.js"),__vite__mapDeps([46,1,2,3,36,6,4,8,5]))),sx=d.lazy(()=>A(()=>import("./TestPage-DmRFAbez.js"),__vite__mapDeps([47,1,2,3]))),ox=d.lazy(()=>A(()=>import("./TagPage-B3oBeYwJ.js"),__vite__mapDeps([48,1,2,3,4,8,6,5]))),ix=d.lazy(()=>A(()=>import("./SearchPage-HmQjPy_n.js"),__vite__mapDeps([49,1,2,3,4,8,6,9,5]))),ax=d.lazy(()=>A(()=>import("./AuthDebugPage-BtyO1Z2Q.js"),__vite__mapDeps([50,1,2,3,28,5,13,4,6]))),cx=d.lazy(()=>A(()=>import("./PaymentSuccessPage-BY-EgYxR.js"),__vite__mapDeps([51,1,2,3,13,6,4,5]))),lx=d.lazy(()=>A(()=>import("./PaymentCancelPage-RcutToyi.js"),__vite__mapDeps([52,1,2,3,13,6,4,5]))),ux=d.lazy(()=>A(()=>import("./GenerateImagesPage-CXnJ_Iba.js"),__vite__mapDeps([53,1,2,3,13,27,39,6,4,25,5]))),dx=d.lazy(()=>A(()=>import("./CharacterGalleryPage-MgwBzRNF.js"),__vite__mapDeps([54,1,2,3,13,4,6,5]))),fx=d.lazy(()=>A(()=>import("./FeaturesPage-DmfvTOe_.js"),__vite__mapDeps([55,1,2,3,9,6,4,5]))),hx=d.lazy(()=>A(()=>import("./LegalPage-Di8ekTLT.js"),__vite__mapDeps([56,1,2,3]))),px=d.lazy(()=>A(()=>import("./CommunityGuidelinesPage-B0boAmA-.js"),__vite__mapDeps([57,1,2,3,58]))),mx=d.lazy(()=>A(()=>import("./PrivacyPolicyPage-btlwHiyj.js"),__vite__mapDeps([59,1,2,3,58]))),gx=d.lazy(()=>A(()=>import("./TermsOfServicePage-DASp72Pi.js"),__vite__mapDeps([60,1,2,3,58]))),yx=d.lazy(()=>A(()=>import("./ContentPolicyPage-zhsx4CQU.js"),__vite__mapDeps([61,1,2,3,58]))),vx=d.lazy(()=>A(()=>import("./BlockedContentPolicyPage-BM3hMm8f.js"),__vite__mapDeps([62,1,2,3,58]))),wx=d.lazy(()=>A(()=>import("./CookiePolicyPage-DBApG3SJ.js"),__vite__mapDeps([63,1,2,3,58]))),bx=d.lazy(()=>A(()=>import("./DMCANoticePage-DCuIBi2m.js"),__vite__mapDeps([64,1,2,3,58]))),xx=d.lazy(()=>A(()=>import("./ExemptionStatementPage-y5oG3G4M.js"),__vite__mapDeps([65,1,2,3,58]))),Ex=d.lazy(()=>A(()=>import("./AgeVerificationPolicyPage-ac9fYri4.js"),__vite__mapDeps([66,1,2,3,58]))),Tx=d.lazy(()=>A(()=>import("./ContentProviderCompliancePage-DYAgZnJd.js"),__vite__mapDeps([67,1,2,3,58]))),_x=d.lazy(()=>A(()=>import("./ContentSafetyCompliancePage-Dib7zlZ0.js"),__vite__mapDeps([68,1,2,3,58]))),Sx=d.lazy(()=>A(()=>import("./LiabilityDisclaimerPage-Kj9p30C-.js"),__vite__mapDeps([69,1,2,3,58]))),Ix=d.lazy(()=>A(()=>import("./GuidesPage-WnMccrS1.js"),__vite__mapDeps([70,1,2,3,9,32,6,4,5]))),Cx=d.lazy(()=>A(()=>import("./BlogPostPage-CDraHEDo.js"),__vite__mapDeps([71,1,2,3,9,32,6,4,5]))),Px=()=>a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-orange-900/20 text-white flex items-center justify-center",children:a.jsx(Mb,{size:"xl",text:"Loading page..."})}),P=({Component:t})=>a.jsx(Ob,{children:a.jsx(d.Suspense,{fallback:a.jsx(Px,{}),children:a.jsx(t,{})})});function Ax(){const[t]=$s();return d.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function Nx(){return a.jsx(Lb,{children:a.jsxs(Fb,{children:[a.jsx(Ax,{}),a.jsxs(yd,{children:[a.jsx(C,{path:"/verify-email",component:()=>a.jsx(P,{Component:ex})}),a.jsx(C,{path:"/",component:()=>a.jsx(P,{Component:Gi})}),a.jsx(C,{path:"/test-chat",component:()=>a.jsx(P,{Component:Yi})}),a.jsx(C,{path:"/chat",component:()=>a.jsx(P,{Component:Ki})}),a.jsx(C,{path:"/ForYouPage",component:()=>a.jsx(P,{Component:Gi})}),a.jsx(C,{path:"/following",component:()=>a.jsx(P,{Component:$b})}),a.jsx(C,{path:"/creators",component:()=>a.jsx(P,{Component:Ub})}),a.jsx(C,{path:"/creators/:id",component:()=>a.jsx(P,{Component:zb})}),a.jsx(C,{path:"/characters/:id",component:()=>a.jsx(P,{Component:Kb})}),a.jsx(C,{path:"/generate-images",component:()=>a.jsx(P,{Component:ux})}),a.jsx(C,{path:"/character-gallery/:characterId",component:()=>a.jsx(P,{Component:dx})}),a.jsx(C,{path:"/chat/:characterId",component:()=>a.jsx(P,{Component:Yi})}),a.jsx(C,{path:"/recent-chats",component:()=>a.jsx(P,{Component:Ki})}),a.jsx(C,{path:"/subscribe",component:()=>a.jsx(P,{Component:Vb})}),a.jsx(C,{path:"/subscription/manage",component:()=>a.jsx(P,{Component:Hb})}),a.jsx(C,{path:"/subscription/success",component:()=>a.jsx(P,{Component:Wb})}),a.jsx(C,{path:"/subscription/cancel",component:()=>a.jsx(P,{Component:Bb})}),a.jsx(C,{path:"/coins",component:()=>a.jsx(P,{Component:qb})}),a.jsx(C,{path:"/payment/success",component:()=>a.jsx(P,{Component:cx})}),a.jsx(C,{path:"/payment/cancel",component:()=>a.jsx(P,{Component:lx})}),a.jsx(C,{path:"/settings",component:()=>a.jsx(P,{Component:Gb})}),a.jsx(C,{path:"/showcase",component:()=>a.jsx(P,{Component:Zb})}),a.jsx(C,{path:"/gallery",component:()=>a.jsx(P,{Component:Jb})}),a.jsx(C,{path:"/user-gallery",component:()=>a.jsx(P,{Component:Qi})}),a.jsx(C,{path:"/user-gallery/character/:characterId",component:()=>a.jsx(P,{Component:Xb})}),a.jsx(C,{path:"/all-user-images",component:()=>a.jsx(P,{Component:Qb})}),a.jsx(C,{path:"/search",component:()=>a.jsx(P,{Component:ix})}),a.jsx(C,{path:"/features",component:()=>a.jsx(P,{Component:fx})}),a.jsx(C,{path:"/tags/:tagName",component:()=>a.jsx(P,{Component:ox})}),a.jsx(C,{path:"/favorites",component:()=>a.jsx(P,{Component:Yb})}),a.jsx(C,{path:"/not-found",component:()=>a.jsx(P,{Component:Ji})}),a.jsx(C,{path:"/user-profile",component:()=>a.jsx(P,{Component:Xi})}),a.jsx(C,{path:"/user-profile/:id",component:()=>a.jsx(P,{Component:Xi})}),a.jsx(C,{path:"/user-gallery",component:()=>a.jsx(P,{Component:Qi})}),a.jsx(C,{path:"/create-character",component:()=>a.jsx(P,{Component:nx})}),a.jsx(C,{path:"/create-character-old",component:()=>a.jsx(P,{Component:tx})}),a.jsx(C,{path:"/user-characters",component:()=>a.jsx(P,{Component:rx})}),a.jsx(C,{path:"/test",component:()=>a.jsx(P,{Component:sx})}),a.jsx(C,{path:"/auth-debug",component:()=>a.jsx(P,{Component:ax})}),a.jsx(C,{path:"/guides",component:()=>a.jsx(P,{Component:Ix})}),a.jsx(C,{path:"/guides/:slug",component:()=>a.jsx(P,{Component:Cx})}),a.jsx(C,{path:"/legal",component:()=>a.jsx(P,{Component:hx})}),a.jsx(C,{path:"/legal/community-guidelines",component:()=>a.jsx(P,{Component:px})}),a.jsx(C,{path:"/legal/privacy-policy",component:()=>a.jsx(P,{Component:mx})}),a.jsx(C,{path:"/legal/terms-of-service",component:()=>a.jsx(P,{Component:gx})}),a.jsx(C,{path:"/legal/content-policy",component:()=>a.jsx(P,{Component:yx})}),a.jsx(C,{path:"/legal/blocked-content-policy",component:()=>a.jsx(P,{Component:vx})}),a.jsx(C,{path:"/legal/cookie-policy",component:()=>a.jsx(P,{Component:wx})}),a.jsx(C,{path:"/legal/dmca-notice",component:()=>a.jsx(P,{Component:bx})}),a.jsx(C,{path:"/legal/2257-exemption-statement",component:()=>a.jsx(P,{Component:xx})}),a.jsx(C,{path:"/legal/age-verification-policy",component:()=>a.jsx(P,{Component:Ex})}),a.jsx(C,{path:"/legal/content-provider-compliance",component:()=>a.jsx(P,{Component:Tx})}),a.jsx(C,{path:"/legal/content-safety-compliance",component:()=>a.jsx(P,{Component:_x})}),a.jsx(C,{path:"/legal/liability-disclaimer",component:()=>a.jsx(P,{Component:Sx})}),a.jsx(C,{path:"*",component:()=>a.jsx(P,{Component:Ji})})]})]})})}const kx=[{icon:a.jsx(Ju,{size:20}),text:"For You",route:"/"},{icon:a.jsx(Xu,{size:20}),text:"Profile",route:"/user-profile"},{icon:a.jsx(la,{size:20}),text:"Chat",route:"/chat"},{icon:a.jsx(Qu,{size:20}),text:"Characters",route:"/user-characters"},{icon:a.jsx(ua,{size:20}),text:"Gallery",route:"/showcase"},{icon:a.jsx(No,{size:20}),text:"User Gallery",route:"/user-gallery"},{icon:a.jsx(Zu,{size:20}),text:"Favorites",route:"/favorites"},{icon:a.jsx(ed,{size:20}),text:"Guides",route:"/guides"},{icon:a.jsx(td,{size:20}),text:"Coins",route:"/coins"},{icon:a.jsx(nd,{size:20}),text:"Membership",route:"/subscribe"},{divider:!0},{icon:a.jsx(rd,{size:20}),text:"Create a Model",route:"/create-character"},{icon:a.jsx(No,{size:20}),text:"Generate images",route:"/generate-images"}],jx=d.createContext({expanded:!0});function Rx({isOpen:t,isCollapsed:e,onClose:n,onToggleCollapse:r}){const{user:s}=kt();return a.jsxs("aside",{className:`
        fixed top-0 left-0 bottom-0
        ${e?"w-16":"w-64"} 
        bg-zinc-900/95 backdrop-blur-md border-r border-orange-500/20
        shadow-2xl shadow-orange-500/10
        z-40 
        transform 
        ${t?"translate-x-0":"-translate-x-full"} 
        transition-all duration-300 ease-in-out
        flex flex-col
      `,children:[a.jsx("div",{className:`${e?"p-2":"p-4 pb-2"} flex ${e?"justify-center":"justify-between"} items-center ${e?"":"border-b border-orange-500/20"}`,children:e?a.jsx(Xe,{href:"/",onClick:n,className:"group",children:a.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR Logo",className:"w-8 h-8 transition-all duration-300 ease-out cursor-pointer group-hover:scale-110"})}):a.jsx(Xe,{href:"/",onClick:n,children:a.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR Logo",className:"w-20 h-20 transition-all duration-300 ease-out cursor-pointer hover:scale-105"})})}),a.jsx(jx.Provider,{value:{expanded:!e},children:a.jsx("ul",{className:`flex-1 ${e?"px-1 py-2":"px-3"} overflow-y-auto`,children:kx.map((o,i)=>{if(o.divider)return e?null:a.jsx("hr",{className:"my-3 border-orange-500/20"},i);if(o.route){const l=o.text==="Profile"&&s?.id?`/user-profile/${s.id}`:o.route;return a.jsx("li",{className:"w-full",children:a.jsxs(Xe,{href:l,"data-sidebar-item":o.text,className:ft("relative flex items-center rounded-md transition-all group w-full cursor-pointer text-zinc-300 hover:text-orange-400 duration-150 no-underline",e?"p-2 justify-center mb-1 mx-auto w-12 h-12":"px-3 py-2 gap-2","hover:bg-orange-500/10"),onClick:()=>{console.log("Sidebar link clicked:",l,o.text),e||n()},children:[a.jsx("div",{className:ft("flex-shrink-0 transition-colors",e&&"justify-center items-center"),children:o.icon}),!e&&a.jsx("span",{className:"flex-1 text-sm font-medium whitespace-nowrap transition-colors",children:o.text}),e&&a.jsx("div",{className:ft("absolute left-full ml-2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50","invisible opacity-0 group-hover:visible group-hover:opacity-100"),children:o.text})]})},i)}else return a.jsx("li",{className:"w-full",children:a.jsxs("div",{className:ft("w-full opacity-50 cursor-default relative flex items-center rounded-md transition-all group",e?"p-2 justify-center mb-1 mx-auto w-12 h-12":"px-3 py-2 gap-2"),children:[a.jsx("div",{className:ft("flex-shrink-0 transition-colors",e&&"justify-center items-center"),children:o.icon}),!e&&a.jsx("span",{className:"flex-1 text-sm font-medium whitespace-nowrap transition-colors",children:o.text}),e&&a.jsx("div",{className:ft("absolute left-full ml-2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50","invisible opacity-0 group-hover:visible group-hover:opacity-100"),children:o.text})]})},i)})})}),a.jsx("div",{className:`flex ${e?"p-2 justify-center":"p-3"} items-center ${e?"":"border-t border-orange-500/20 bg-orange-500/5"}`,children:e?a.jsxs("div",{className:"relative group",children:[a.jsx("img",{src:s?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(s?.username||"Guest")}`,alt:"User avatar",className:"w-8 h-8 rounded-md border border-orange-500/30 flex-shrink-0 cursor-pointer transition-all duration-200 group-hover:scale-110"}),a.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100",children:s?.username||"Guest User"})]}):a.jsxs(a.Fragment,{children:[a.jsx("img",{src:s?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(s?.username||"Guest")}`,alt:"User avatar",className:"w-10 h-10 rounded-md border border-orange-500/30 flex-shrink-0"}),a.jsxs("div",{className:"ml-3 leading-4 text-white flex-1 min-w-0 overflow-hidden",children:[a.jsx("h4",{className:"font-semibold text-orange-200 truncate text-sm",children:s?.username||"Guest User"}),a.jsx("span",{className:"text-xs text-orange-300/60 truncate block",children:s?.email||"Not signed in"})]}),a.jsx(sd,{size:16,className:"text-orange-400/70 hover:text-orange-400 cursor-pointer transition-colors flex-shrink-0 ml-2"})]})})]})}const Ox=({className:t="",size:e=24})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),a.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),Dx=({className:t="",size:e=24})=>a.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[a.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),a.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),nt=d.forwardRef(({className:t,type:e,...n},r)=>a.jsx("input",{type:e,className:G("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));nt.displayName="Input";var Lx="Label",vu=d.forwardRef((t,e)=>a.jsx(ae.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));vu.displayName=Lx;var wu=vu;const Fx=ur("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xt=d.forwardRef(({className:t,...e},n)=>a.jsx(wu,{ref:n,className:G(Fx(),t),...e}));xt.displayName=wu.displayName;function bu({isOpen:t,setIsOpen:e,openSignUp:n}){const{login:r,loginWithGoogle:s,isLoading:o}=kt(),[i,l]=d.useState({emailOrUsername:"",password:""}),[c,u]=d.useState(null),[f,h]=d.useState(null),[p,m]=d.useState(!1),{toast:g}=Vs(),w=async y=>{y.preventDefault(),u(null),h(null);try{await r(i),e(!1)}catch(b){const E=b instanceof Error?b.message:"Login failed";if(u(E),E.includes("verify your email")||E.includes("verification"))try{const S=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();S.requiresEmailVerification&&S.email&&h(S.email)}catch{}}},v=async()=>{if(f){m(!0);try{const b=await(await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f})})).json();b.success?(g({title:"Verification Email Sent",description:"Please check your inbox for a new verification email."}),u("Verification email sent! Please check your inbox.")):g({title:"Failed to Resend",description:b.message,variant:"destructive"})}catch(y){console.error("Resend verification error:",y),g({title:"Error",description:"Failed to resend verification email. Please try again.",variant:"destructive"})}finally{m(!1)}}},x=async()=>{try{await s(),e(!1)}catch(y){u(y instanceof Error?y.message:"Google sign-in failed")}};return a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>e(!1),children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center px-4",children:a.jsxs(tt,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-800/90 to-zinc-900/90 backdrop-blur-lg border border-orange-500/20 p-6 text-white shadow-2xl shadow-orange-500/10 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx(_n,{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Sign in to MedusaVR"}),a.jsx("button",{onClick:()=>e(!1),className:"w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:a.jsx(Bt,{className:"h-2.5 w-2.5 text-gray-400"})})]}),c&&a.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:[a.jsx("p",{className:"text-red-400 text-sm",children:c}),f&&a.jsx("div",{className:"mt-3",children:a.jsx(Q,{onClick:v,disabled:p,variant:"outline",size:"sm",className:"w-full border-orange-500/30 text-orange-400 hover:bg-orange-500/10 hover:border-orange-500/50",children:p?a.jsxs(a.Fragment,{children:[a.jsx(as,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):a.jsxs(a.Fragment,{children:[a.jsx(od,{className:"mr-2 h-4 w-4"}),"Resend Verification Email"]})})})]}),a.jsxs("form",{onSubmit:w,className:"space-y-6",children:[a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"emailOrUsername",className:"text-zinc-200 font-medium",children:"Email or Username"}),a.jsx(nt,{id:"emailOrUsername",name:"emailOrUsername",type:"text",value:i.emailOrUsername,onChange:y=>l({...i,emailOrUsername:y.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",required:!0})]}),a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"password",className:"text-zinc-200 font-medium",children:"Password"}),a.jsx(nt,{id:"password",name:"password",type:"password",value:i.password,onChange:y=>l({...i,password:y.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",required:!0})]}),a.jsx(Q,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 transform hover:scale-105 transition-all duration-200 shadow-lg shadow-orange-500/20",disabled:o,children:o?a.jsxs(a.Fragment,{children:[a.jsx(as,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),a.jsx("div",{className:"my-6 text-center",children:a.jsx(Q,{variant:"outline",className:"w-full bg-zinc-800/30 border-orange-500/30 hover:bg-orange-500/10 hover:border-orange-500/50 text-zinc-200 hover:text-orange-300",onClick:x,children:"Continue with Google"})}),a.jsxs("p",{className:"text-center text-sm text-zinc-400",children:["Don't have an account?"," ",a.jsx("button",{onClick:()=>{e(!1),n()},className:"text-orange-400 hover:text-orange-300 font-medium transition-colors duration-200",children:"Sign up"})]})]})})]})})}function xu({isOpen:t,setIsOpen:e,openSignIn:n}){const{register:r,registerWithGoogle:s,isLoading:o}=kt(),[i,l]=d.useState({email:"",username:"",password:"",confirmPassword:""}),[c,u]=d.useState(null),[f,h]=d.useState(!1),{toast:p}=Vs(),m=async v=>{if(v.preventDefault(),u(null),h(!0),i.password!==i.confirmPassword){u("Passwords do not match"),h(!1);return}if(i.password.length<6){u("Password must be at least 6 characters"),h(!1);return}try{await r({email:i.email,username:i.username,password:i.password}),e(!1),p({title:"Account Created Successfully!",description:"Welcome to MedusaVR! You're now logged in."}),l({email:"",username:"",password:"",confirmPassword:""})}catch(x){console.error("Registration error:",x),u(x.message||"Registration failed")}finally{h(!1)}},g=async()=>{try{await s(),e(!1),l({email:"",username:"",password:"",confirmPassword:""}),u(null),p({title:"Welcome to MedusaVR!",description:"Here are 15 free coins to get you started."})}catch(v){u(v instanceof Error?v.message:"Google sign-up failed")}},w=()=>{e(!1),l({email:"",username:"",password:"",confirmPassword:""}),u(null)};return a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:w,children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:a.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:a.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:a.jsxs(tt,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-800/90 to-zinc-900/90 backdrop-blur-lg border border-orange-500/20 p-6 text-white shadow-2xl shadow-orange-500/10 transition-all",children:[a.jsxs("div",{className:"flex justify-between items-center mb-6",children:[a.jsx(_n,{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Create Your Account"}),a.jsx("button",{onClick:w,className:"w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:a.jsx(Bt,{className:"h-2.5 w-2.5 text-gray-400"})})]}),c&&a.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:a.jsx("p",{className:"text-red-400 text-sm",children:c})}),a.jsxs(a.Fragment,{children:[a.jsxs("form",{onSubmit:m,className:"space-y-4",children:[a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"email",className:"text-zinc-200 font-medium",children:"Email"}),a.jsx(nt,{id:"email",type:"email",value:i.email,onChange:v=>l({...i,email:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Enter your email",required:!0})]}),a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"username",className:"text-zinc-200 font-medium",children:"Username"}),a.jsx(nt,{id:"username",type:"text",value:i.username,onChange:v=>l({...i,username:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Choose a username",required:!0})]}),a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"password",className:"text-zinc-200 font-medium",children:"Password"}),a.jsx(nt,{id:"password",type:"password",value:i.password,onChange:v=>l({...i,password:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Create a strong password",required:!0})]}),a.jsxs("div",{className:"space-y-2 text-left",children:[a.jsx(xt,{htmlFor:"confirmPassword",className:"text-zinc-200 font-medium",children:"Confirm Password"}),a.jsx(nt,{id:"confirmPassword",type:"password",value:i.confirmPassword,onChange:v=>l({...i,confirmPassword:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Confirm your password",required:!0})]}),a.jsx(Q,{type:"submit",disabled:o||f,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 transform hover:scale-105 transition-all duration-200 shadow-lg shadow-orange-500/20",children:o||f?a.jsxs(a.Fragment,{children:[a.jsx(as,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]}),a.jsx("div",{className:"my-6 text-center",children:a.jsx(Q,{variant:"outline",className:"w-full bg-zinc-800/30 border-orange-500/30 hover:bg-orange-500/10 hover:border-orange-500/50 text-zinc-200 hover:text-orange-300",onClick:g,children:"Continue with Google"})}),a.jsxs("p",{className:"text-center text-sm text-zinc-400",children:["Already have an account?"," ",a.jsx("button",{onClick:()=>{e(!1),n()},className:"text-orange-400 hover:text-orange-300 font-medium transition-colors duration-200",children:"Sign in"})]})]})]})})})})]})})}const Eu=d.createContext(void 0),Zi="medusavr_show_nsfw",Mx=({children:t})=>{const[e,n]=d.useState(!1),[r,s]=d.useState(()=>{try{const u=localStorage.getItem(Zi);return u!==null?JSON.parse(u):!1}catch{return!1}});d.useEffect(()=>{try{localStorage.setItem(Zi,JSON.stringify(r))}catch(u){console.warn("Failed to save NSFW preference to localStorage:",u)}},[r]);const o=()=>{n(u=>!u)},i=()=>{s(u=>!u)},l=u=>u&&!r,c=u=>l(u)?"filter: blur(20px); opacity: 0.6;":"";return a.jsx(Eu.Provider,{value:{isBlurred:e,toggleBlur:o,showNSFW:r,toggleNSFWFilter:i,shouldBlurNSFW:l,getNSFWBlurStyles:c},children:t})},$x=()=>{const t=d.useContext(Eu);if(t===void 0)throw new Error("useImageBlur must be used within an ImageBlurProvider");return t};function Ux({sidebarOpen:t,onToggleSidebar:e}){const[n,r]=d.useState(!1),[s,o]=d.useState(!1),[i,l]=d.useState(!1),[c,u]=d.useState(""),{user:f,isAuthenticated:h,logout:p}=kt(),{isBlurred:m,toggleBlur:g,showNSFW:w,toggleNSFWFilter:v}=$x();lr();const[x,y]=$s(),{data:b,error:E,isLoading:T}=Ms({queryKey:["user","profile"],queryFn:re.getProfile,enabled:h,staleTime:1/0,refetchInterval:!1,refetchOnWindowFocus:!1,retry:!1}),k=(b||f)?.coins||0,M=d.useRef(null);d.useEffect(()=>{const D=F=>{M.current&&!M.current.contains(F.target)&&l(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const z=async()=>{try{await p(),l(!1)}catch(D){console.error("Logout failed:",D)}},O=()=>{const D=c.trim();D&&y(`/search?q=${encodeURIComponent(D)}`)},$=D=>{D.key==="Enter"&&O()};return a.jsxs(a.Fragment,{children:[a.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-zinc-900/80 backdrop-blur-md border-b border-orange-500/20 px-2 sm:px-4 py-3 flex items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center flex-1 min-w-0 gap-1",children:[a.jsx("button",{onClick:e,className:"p-2 rounded-lg text-gray-100 hover:text-orange-400 hover:bg-orange-500/10 cursor-pointer hover:scale-110 transition-all duration-150 shrink-0",children:a.jsx(id,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),a.jsx(Xe,{href:"/ForYouPage",children:a.jsx(Q,{variant:"ghost",size:"icon",className:"cursor-pointer hover:scale-110 transition-transform duration-150 hover:bg-orange-500/10 hover:text-orange-400 shrink-0",children:a.jsx(da,{className:"w-5 h-5 sm:w-6 sm:h-6"})})}),a.jsxs("div",{className:"relative flex-1 max-w-[150px] sm:max-w-sm",children:[a.jsx("button",{onClick:O,className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 hover:text-orange-400 transition-colors cursor-pointer",children:a.jsx(ad,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-400/70"})}),a.jsx(nt,{type:"search",placeholder:"Search...",value:c,onChange:D=>u(D.target.value),onKeyPress:$,className:"w-full h-9 sm:h-10 bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 focus:border-orange-500/40 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400 text-sm pl-9 sm:pl-12 transition-all duration-200"})]})]}),a.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[a.jsx("button",{onClick:v,className:"p-2 rounded-lg text-gray-100 hover:text-orange-400 hover:bg-orange-500/10 cursor-pointer hover:scale-110 transition-all duration-150 shrink-0",children:w?a.jsx(Ox,{className:"w-5 h-5 sm:w-6 sm:h-6"}):a.jsx(Dx,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),a.jsx(Xe,{href:"/coins",children:a.jsxs(Q,{variant:"outline",size:"sm",className:"bg-orange-500/20 border-orange-500/30 hover:bg-orange-500/30 cursor-pointer hover:scale-110 transition-all duration-150 backdrop-blur-sm h-9 px-2 sm:px-3",children:[a.jsx(cd,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-400 mr-1 sm:mr-2"}),a.jsx("span",{className:"text-orange-200 text-xs sm:text-sm",children:Tf(k,7)})]})}),h?a.jsxs("div",{className:"relative",ref:M,children:[a.jsxs("button",{onClick:()=>l(!i),className:"flex items-center gap-1 sm:gap-2 cursor-pointer hover:scale-105 transition-all duration-150 p-1.5 sm:p-2 rounded-lg hover:bg-orange-500/10 bg-zinc-800/50 border border-orange-500/20",children:[a.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full overflow-hidden border border-orange-500/30 shrink-0",children:a.jsx("img",{src:f?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(f?.username||"User")}`,alt:"User profile",className:"w-full h-full object-cover"})}),a.jsx(ld,{className:`w-3 h-3 sm:w-4 sm:h-4 text-orange-400 transition-transform duration-200 shrink-0 ${i?"rotate-180":""}`})]}),i&&a.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 sm:w-64 bg-zinc-900/95 backdrop-blur-md border border-orange-500/20 rounded-lg shadow-2xl shadow-orange-500/10 py-2 z-50",children:[a.jsxs("div",{className:"px-3 sm:px-4 py-3 border-b border-orange-500/20",children:[a.jsx("h3",{className:"font-semibold text-orange-200 text-sm truncate",children:f?.username||"User"}),a.jsx("p",{className:"text-xs text-orange-300/60 truncate",children:f?.email||"user@example.com"})]}),a.jsxs("div",{className:"py-1",children:[a.jsx(Xe,{href:`/user-profile/${f?.id}`,children:a.jsxs("button",{onClick:()=>l(!1),className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-orange-500/10 hover:text-orange-400 transition-colors duration-150 cursor-pointer",children:[a.jsx(ud,{className:"w-4 h-4 mr-3 shrink-0"}),a.jsx("span",{className:"truncate",children:"Profile"})]})}),a.jsx(Xe,{href:"/settings",children:a.jsxs("button",{onClick:()=>l(!1),className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-orange-500/10 hover:text-orange-400 transition-colors duration-150 cursor-pointer",children:[a.jsx(dd,{className:"w-4 h-4 mr-3 shrink-0"}),a.jsx("span",{className:"truncate",children:"Account"})]})}),a.jsx("div",{className:"border-t border-orange-500/20 my-1"}),a.jsxs("button",{onClick:z,className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-red-500/10 hover:text-red-400 transition-colors duration-150 cursor-pointer",children:[a.jsx(fd,{className:"w-4 h-4 mr-3 shrink-0"}),a.jsx("span",{className:"truncate",children:"Sign out"})]})]})]})]}):a.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[a.jsxs(Q,{variant:"ghost",size:"sm",className:"text-zinc-300 hover:text-orange-400 hover:bg-orange-500/10 transition-all duration-150 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9",onClick:()=>o(!0),children:[a.jsx("span",{className:"hidden xs:inline",children:"Sign Up"}),a.jsx("span",{className:"xs:hidden",children:"Sign Up"})]}),a.jsxs(Q,{variant:"default",size:"sm",className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white shadow-lg shadow-orange-500/25 hover:scale-105 transition-all duration-150 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9",onClick:()=>r(!0),children:[a.jsx("span",{className:"hidden xs:inline",children:"Sign In"}),a.jsx("span",{className:"xs:hidden",children:"Sign In"})]})]})]})]}),a.jsx(bu,{isOpen:n,setIsOpen:r,openSignUp:()=>o(!0)}),a.jsx(xu,{isOpen:s,setIsOpen:o,openSignIn:()=>r(!0)})]})}const zx=[{name:"Home",href:"/ForYouPage",icon:da},{name:"Create Character",href:"/create-character",icon:hd},{name:"Create Image",href:"/generate-images",icon:ua},{name:"Chats",href:"/chat",icon:la}];function Vx(){const[t]=$s();return a.jsx("nav",{className:`
        fixed 
        bottom-0 
        left-0 
        right-0 
        h-16 
        bg-zinc-900/80 
        backdrop-blur-md 
        border-t 
        border-orange-500/20 
        z-30 
        flex 
        justify-around 
        items-center
        shadow-lg
        shadow-orange-500/10
      `,children:zx.map(e=>{const n=e.icon,r=t===e.href||t==="/"&&e.href==="/ForYouPage";return a.jsxs(Xe,{href:e.href,className:G("flex flex-col items-center space-y-1 p-3 rounded-xl transition-all duration-200",r?"text-orange-400 bg-orange-500/10 scale-105":"text-zinc-400 hover:text-orange-300 hover:bg-orange-500/5"),children:[a.jsx(n,{className:"w-5 h-5"}),a.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.name)})})}function Hx({children:t}){const[e,n]=d.useState(!1),[r,s]=d.useState(!1);return a.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-orange-900/20 text-white relative",children:[a.jsx(Rx,{isOpen:e,isCollapsed:r,onClose:()=>n(!1),onToggleCollapse:()=>s(!r)}),e&&!r&&a.jsx("div",{className:"fixed inset-0 bg-transparent z-30",onClick:()=>n(!1)}),a.jsxs("div",{className:`
          transition-all duration-500 ease-in-out
          ${e&&!r?"filter blur-sm":""}
        `,children:[a.jsx(Ux,{sidebarOpen:e,onToggleSidebar:()=>n(o=>!o)}),a.jsx("main",{className:"pt-24 pb-20 px-6 min-h-screen",children:t}),a.jsx(Vx,{})]})]})}const Wx=ur("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function ss({className:t,variant:e,...n}){return a.jsx("div",{className:G(Wx({variant:e}),t),...n})}var Bx="Separator",ea="horizontal",qx=["horizontal","vertical"],Tu=d.forwardRef((t,e)=>{const{decorative:n,orientation:r=ea,...s}=t,o=Gx(r)?r:ea,l=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return a.jsx(ae.div,{"data-orientation":o,...l,...s,ref:e})});Tu.displayName=Bx;function Gx(t){return qx.includes(t)}var _u=Tu;const Su=d.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>a.jsx(_u,{ref:s,decorative:n,orientation:e,className:G("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));Su.displayName=_u.displayName;const Kx=[{id:"character-type",name:"character-type",displayName:"Character Type",description:"Basic character identity and type",maxSelections:1,required:!0,tags:[{id:"female",name:"female",displayName:"Female",emoji:"üë©",color:"#e84393",isNSFW:!1,category:"Character Type"},{id:"male",name:"male",displayName:"Male",emoji:"üë®",color:"#0984e3",isNSFW:!1,category:"Character Type"},{id:"android",name:"android",displayName:"Android",emoji:"ü§ñ",color:"#636e72",isNSFW:!1,category:"Character Type"},{id:"alien",name:"alien",displayName:"Alien",emoji:"üëΩ",color:"#00b894",isNSFW:!1,category:"Character Type"},{id:"angel",name:"angel",displayName:"Angel",emoji:"üëº",color:"#ffeaa7",isNSFW:!1,category:"Character Type"},{id:"fairy",name:"fairy",displayName:"Fairy",emoji:"üßö",color:"#a29bfe",isNSFW:!1,category:"Character Type"},{id:"robot",name:"robot",displayName:"Robot",emoji:"ü§ñ",color:"#636e72",isNSFW:!1,category:"Character Type"},{id:"animal",name:"animal",displayName:"Animal",emoji:"üêæ",color:"#e17055",isNSFW:!1,category:"Character Type"}]},{id:"genre",name:"genre",displayName:"Genre",description:"Story genre and setting type",maxSelections:3,tags:[{id:"sci-fi",name:"sci-fi",displayName:"Sci-Fi",emoji:"üöÄ",color:"#0984e3",isNSFW:!1,category:"Genre"},{id:"fantasy",name:"fantasy",displayName:"Fantasy",emoji:"üßô",color:"#6c5ce7",isNSFW:!1,category:"Genre"},{id:"horror",name:"horror",displayName:"Horror",emoji:"üëª",color:"#2d3436",isNSFW:!1,category:"Genre"},{id:"romance",name:"romance",displayName:"Romance",emoji:"üíï",color:"#fd79a8",isNSFW:!1,category:"Genre"},{id:"adventure",name:"adventure",displayName:"Adventure",emoji:"‚öîÔ∏è",color:"#e17055",isNSFW:!1,category:"Genre"},{id:"mystery",name:"mystery",displayName:"Mystery",emoji:"üîç",color:"#636e72",isNSFW:!1,category:"Genre"},{id:"slice-of-life",name:"slice-of-life",displayName:"Slice of Life",emoji:"üå∏",color:"#ffeaa7",isNSFW:!1,category:"Genre"},{id:"cyberpunk",name:"cyberpunk",displayName:"Cyberpunk",emoji:"üåÜ",color:"#00b894",isNSFW:!1,category:"Genre"}]},{id:"personality",name:"personality",displayName:"Personality",description:"Character personality traits",maxSelections:3,tags:[{id:"confident",name:"confident",displayName:"Confident",emoji:"üí™",color:"#e84393",isNSFW:!1,category:"Personality"},{id:"shy",name:"shy",displayName:"Shy",emoji:"üòä",color:"#fd79a8",isNSFW:!1,category:"Personality"},{id:"mysterious",name:"mysterious",displayName:"Mysterious",emoji:"üé≠",color:"#636e72",isNSFW:!1,category:"Personality"},{id:"playful",name:"playful",displayName:"Playful",emoji:"üé™",color:"#ffeaa7",isNSFW:!1,category:"Personality"},{id:"serious",name:"serious",displayName:"Serious",emoji:"üéØ",color:"#2d3436",isNSFW:!1,category:"Personality"},{id:"caring",name:"caring",displayName:"Caring",emoji:"üíù",color:"#00b894",isNSFW:!1,category:"Personality"},{id:"rebellious",name:"rebellious",displayName:"Rebellious",emoji:"üî•",color:"#e17055",isNSFW:!1,category:"Personality"},{id:"intellectual",name:"intellectual",displayName:"Intellectual",emoji:"üìö",color:"#0984e3",isNSFW:!1,category:"Personality"}]},{id:"appearance",name:"appearance",displayName:"Appearance",description:"Visual appearance details",maxSelections:2,tags:[{id:"long-hair",name:"long-hair",displayName:"Long Hair",emoji:"üë±‚Äç‚ôÄÔ∏è",color:"#ffeaa7",isNSFW:!1,category:"Appearance"},{id:"short-hair",name:"short-hair",displayName:"Short Hair",emoji:"üë©‚Äçü¶±",color:"#fd79a8",isNSFW:!1,category:"Appearance"},{id:"colorful-hair",name:"colorful-hair",displayName:"Colorful Hair",emoji:"üåà",color:"#00b894",isNSFW:!1,category:"Appearance"},{id:"glasses",name:"glasses",displayName:"Glasses",emoji:"üëì",color:"#0984e3",isNSFW:!1,category:"Appearance"},{id:"hat",name:"hat",displayName:"Hat",emoji:"üé©",color:"#e17055",isNSFW:!1,category:"Appearance"},{id:"smile",name:"smile",displayName:"Friendly Smile",emoji:"üòä",color:"#636e72",isNSFW:!1,category:"Appearance"},{id:"wings",name:"wings",displayName:"Wings",emoji:"üïäÔ∏è",color:"#2d3436",isNSFW:!1,category:"Appearance"},{id:"glowing-eyes",name:"glowing-eyes",displayName:"Glowing Eyes",emoji:"üëÅÔ∏è",color:"#6c5ce7",isNSFW:!1,category:"Appearance"}]},{id:"origin",name:"origin",displayName:"Origin",description:"Character background and origin",maxSelections:1,tags:[{id:"human",name:"human",displayName:"Human",emoji:"üë§",color:"#6c5ce7",isNSFW:!1,category:"Origin"},{id:"magical",name:"magical",displayName:"Magical",emoji:"‚ú®",color:"#a29bfe",isNSFW:!1,category:"Origin"},{id:"divine",name:"divine",displayName:"Divine",emoji:"üëº",color:"#ffeaa7",isNSFW:!1,category:"Origin"},{id:"alien",name:"alien",displayName:"Alien",emoji:"üëΩ",color:"#00b894",isNSFW:!1,category:"Origin"},{id:"artificial",name:"artificial",displayName:"Artificial",emoji:"ü§ñ",color:"#636e72",isNSFW:!1,category:"Origin"},{id:"mythical",name:"mythical",displayName:"Mythical",emoji:"üêâ",color:"#fd79a8",isNSFW:!1,category:"Origin"},{id:"nature",name:"nature",displayName:"Nature",emoji:"üåø",color:"#e84393",isNSFW:!1,category:"Origin"},{id:"cosmic",name:"cosmic",displayName:"Cosmic",emoji:"‚≠ê",color:"#e17055",isNSFW:!1,category:"Origin"}]},{id:"fantasy",name:"fantasy",displayName:"Fantasy",description:"Fantasy elements and abilities",maxSelections:void 0,tags:[{id:"magic-user",name:"magic-user",displayName:"Magic User",emoji:"üßô",color:"#6c5ce7",isNSFW:!1,category:"Fantasy"},{id:"shapeshifter",name:"shapeshifter",displayName:"Shapeshifter",emoji:"ü¶ã",color:"#fd79a8",isNSFW:!1,category:"Fantasy"},{id:"immortal",name:"immortal",displayName:"Immortal",emoji:"‚ôæÔ∏è",color:"#ffeaa7",isNSFW:!1,category:"Fantasy"},{id:"telepathic",name:"telepathic",displayName:"Telepathic",emoji:"üß†",color:"#0984e3",isNSFW:!1,category:"Fantasy"},{id:"elemental-powers",name:"elemental-powers",displayName:"Elemental Powers",emoji:"üî•",color:"#e17055",isNSFW:!1,category:"Fantasy"},{id:"time-traveler",name:"time-traveler",displayName:"Time Traveler",emoji:"‚è∞",color:"#636e72",isNSFW:!1,category:"Fantasy"},{id:"superhuman",name:"superhuman",displayName:"Superhuman",emoji:"üí™",color:"#e84393",isNSFW:!1,category:"Fantasy"},{id:"cursed",name:"cursed",displayName:"Cursed",emoji:"üíÄ",color:"#2d3436",isNSFW:!1,category:"Fantasy"}]},{id:"ethnicity",name:"ethnicity",displayName:"Ethnicity",description:"Character ethnicity and cultural background",maxSelections:void 0,tags:[{id:"asian",name:"asian",displayName:"Asian",emoji:"üèØ",color:"#fd79a8",isNSFW:!1,category:"Ethnicity"},{id:"european",name:"european",displayName:"European",emoji:"üè∞",color:"#0984e3",isNSFW:!1,category:"Ethnicity"},{id:"african",name:"african",displayName:"African",emoji:"üåç",color:"#e17055",isNSFW:!1,category:"Ethnicity"},{id:"latino",name:"latino",displayName:"Latino",emoji:"üåÆ",color:"#ffeaa7",isNSFW:!1,category:"Ethnicity"},{id:"native-american",name:"native-american",displayName:"Native American",emoji:"ü™∂",color:"#e84393",isNSFW:!1,category:"Ethnicity"},{id:"middle-eastern",name:"middle-eastern",displayName:"Middle Eastern",emoji:"üïå",color:"#6c5ce7",isNSFW:!1,category:"Ethnicity"},{id:"mixed",name:"mixed",displayName:"Mixed",emoji:"üåà",color:"#00b894",isNSFW:!1,category:"Ethnicity"},{id:"other",name:"other",displayName:"Other",emoji:"üåé",color:"#636e72",isNSFW:!1,category:"Ethnicity"}]},{id:"profession",name:"profession",displayName:"Profession",description:"Character professions and careers",maxSelections:3,tags:[{id:"teacher",name:"teacher",displayName:"Teacher",emoji:"üë©‚Äçüè´",color:"#0984e3",isNSFW:!1,category:"Profession"},{id:"doctor",name:"doctor",displayName:"Doctor",emoji:"üë©‚Äç‚öïÔ∏è",color:"#e17055",isNSFW:!1,category:"Profession"},{id:"scientist",name:"scientist",displayName:"Scientist",emoji:"üë©‚Äçüî¨",color:"#6c5ce7",isNSFW:!1,category:"Profession"},{id:"artist",name:"artist",displayName:"Artist",emoji:"üé®",color:"#fd79a8",isNSFW:!1,category:"Profession"},{id:"musician",name:"musician",displayName:"Musician",emoji:"üéµ",color:"#ffeaa7",isNSFW:!1,category:"Profession"},{id:"writer",name:"writer",displayName:"Writer",emoji:"‚úçÔ∏è",color:"#00b894",isNSFW:!1,category:"Profession"},{id:"engineer",name:"engineer",displayName:"Engineer",emoji:"‚öôÔ∏è",color:"#636e72",isNSFW:!1,category:"Profession"},{id:"chef",name:"chef",displayName:"Chef",emoji:"üë®‚Äçüç≥",color:"#e84393",isNSFW:!1,category:"Profession"},{id:"pilot",name:"pilot",displayName:"Pilot",emoji:"‚úàÔ∏è",color:"#2d3436",isNSFW:!1,category:"Profession"},{id:"astronaut",name:"astronaut",displayName:"Astronaut",emoji:"üöÄ",color:"#0984e3",isNSFW:!1,category:"Profession"},{id:"detective",name:"detective",displayName:"Detective",emoji:"üîç",color:"#6c5ce7",isNSFW:!1,category:"Profession"},{id:"librarian",name:"librarian",displayName:"Librarian",emoji:"üìö",color:"#fd79a8",isNSFW:!1,category:"Profession"},{id:"gardener",name:"gardener",displayName:"Gardener",emoji:"üå±",color:"#00b894",isNSFW:!1,category:"Profession"},{id:"photographer",name:"photographer",displayName:"Photographer",emoji:"üì∏",color:"#e17055",isNSFW:!1,category:"Profession"},{id:"veterinarian",name:"veterinarian",displayName:"Veterinarian",emoji:"üêæ",color:"#ffeaa7",isNSFW:!1,category:"Profession"},{id:"architect",name:"architect",displayName:"Architect",emoji:"üèóÔ∏è",color:"#636e72",isNSFW:!1,category:"Profession"},{id:"dancer",name:"dancer",displayName:"Dancer",emoji:"üíÉ",color:"#e84393",isNSFW:!1,category:"Profession"},{id:"athlete",name:"athlete",displayName:"Athlete",emoji:"üèÉ‚Äç‚ôÄÔ∏è",color:"#2d3436",isNSFW:!1,category:"Profession"},{id:"magician",name:"magician",displayName:"Magician",emoji:"üé©",color:"#6c5ce7",isNSFW:!1,category:"Profession"},{id:"explorer",name:"explorer",displayName:"Explorer",emoji:"üó∫Ô∏è",color:"#00b894",isNSFW:!1,category:"Profession"}]}],os=Kx.map(t=>({category:t.displayName,tags:t.tags.map(e=>({name:e.name,displayName:e.displayName,color:e.color||"#636e72",emoji:e.emoji||"üè∑Ô∏è",isNSFW:e.isNSFW||!1,category:t.displayName}))}));function Yx(){const[t,e]=d.useState([]),[n,r]=d.useState(!0),[s,o]=d.useState(null);d.useEffect(()=>{(async()=>{try{const c=await bt.getTags({limit:0});let u;if(Array.isArray(c))u=c;else if(c&&c.items)u=c.items;else throw new Error("Invalid API response format");const f=u.reduce((p,m)=>{const g=p.find(w=>w.category===m.category);return g?g.tags.push(m):p.push({category:m.category,tags:[m]}),p},[]),h=f.reduce((p,m)=>p+m.tags.length,0);h<50?(console.log(`API returned only ${h} tags, using fallback data with ${os.reduce((p,m)=>p+m.tags.length,0)} tags`),e(os)):e(f)}catch(c){console.error("Error fetching tags:",c),e(os),o(c)}finally{r(!1)}})()},[]);const i=t.flatMap(l=>l.tags).reduce((l,c)=>(l[c.name]=c,l),{});return{tagCategories:t,isLoading:n,error:s,tagMap:i}}function Jx({isOpen:t,setIsOpen:e,onSave:n,initialSelectedTags:r=[],isFirstTimeSetup:s=!1}){const{tagCategories:o,isLoading:i,error:l}=Yx(),[c,u]=d.useState([]),[f,h]=d.useState(!1),[p,m]=d.useState(!1),[g,w]=d.useState(!1);if(d.useEffect(()=>{t&&!g?(u([...r]),w(!0)):t||w(!1)},[t,g]),i)return a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:a.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-semibold text-orange-200 mb-2",children:"Loading Your Preferences"}),a.jsx("p",{className:"text-zinc-300",children:"Fetching available tags..."})]})})})})]})});if(l)return a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:a.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-red-900/95 to-red-800/95 backdrop-blur-lg border border-red-500/30 text-white shadow-2xl shadow-red-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-red-400 mb-4",children:"‚ö†Ô∏è"}),a.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Unable to Load Tags"}),a.jsx("p",{className:"text-red-300 mb-4",children:l.message}),a.jsx("p",{className:"text-red-400 text-sm",children:"Please try refreshing the page or contact support."})]})})})})]})});const v=y=>{console.log("toggleTag called with:",y),console.log("Current selectedTags:",c),u(b=>b.includes(y)?(console.log("Removing tag:",y),b.filter(E=>E!==y)):(console.log("Adding tag:",y,"Current length:",b.length),b.length<8?[...b,y]:b))},x=()=>{s&&(!f||!p||c.length<5)||!s&&c.length<5||(n(c),e(!1))};return!i&&!l&&o.length===0?a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:a.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-yellow-900/95 to-yellow-800/95 backdrop-blur-lg border border-yellow-500/30 text-white shadow-2xl shadow-yellow-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:a.jsxs("div",{className:"p-8 text-center",children:[a.jsx("div",{className:"text-yellow-400 mb-4",children:"üì¶"}),a.jsx("h3",{className:"text-lg font-semibold text-yellow-200 mb-2",children:"No Tags Available"}),a.jsx("p",{className:"text-yellow-300 mb-4",children:"The tag database appears to be empty."}),a.jsx("p",{className:"text-yellow-400 text-sm",children:"Please contact support to set up your preferences."})]})})})})]})}):a.jsx(et,{appear:!0,show:t,as:d.Fragment,children:a.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),a.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:a.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:a.jsxs(tt,{className:"w-full max-w-xl max-h-[90vh] transform rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500 flex flex-col overflow-hidden",children:[a.jsx("div",{className:"relative p-4 pb-3 border-b border-orange-500/20",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"animate-in slide-in-from-left-4 duration-700",children:[a.jsx(_n,{className:"text-lg font-semibold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent animate-in fade-in duration-1000",children:s?"Welcome Aboard":"Update Your Preferences"}),a.jsx("p",{className:"text-zinc-300 text-sm mt-1 animate-in slide-in-from-left-4 duration-700 delay-200",children:s?"Pick between 5-8 things you like. It'll help you find the characters you love to talk with.":"Update your tag preferences to discover new characters and content that match your interests."})]}),a.jsxs(ss,{variant:"outline",className:`animate-in slide-in-from-right-4 duration-700 delay-300 ${c.length<5?"text-red-400 border-red-500/30 animate-pulse":c.length>=5&&c.length<=8?"text-green-400 border-green-500/30 animate-bounce":"text-orange-400 border-orange-500/30"}`,children:["(",c.length,"/8) ",c.length<5&&"Need "+(5-c.length)+" more"]})]})}),a.jsx("div",{className:"flex-1 overflow-y-auto",children:a.jsxs("div",{className:"p-4 pt-3",children:[a.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-4 duration-700 delay-400",children:[a.jsx("h3",{className:"text-base font-semibold text-orange-200 mb-2",children:"Selected Tags"}),a.jsx("div",{className:"min-h-[40px] p-2 bg-zinc-600/30 rounded-lg border border-orange-500/20 transition-all duration-300",children:c.length===0?a.jsx("p",{className:"text-zinc-500 text-xs animate-pulse",children:"No tags selected yet..."}):a.jsx("div",{className:"flex flex-wrap gap-1",children:c.map((y,b)=>{const E=o.flatMap(T=>T.tags).find(T=>T.name===y);return E?a.jsxs(ss,{className:"flex items-center gap-1 px-1.5 py-0.5 text-white border-0 text-xs animate-in slide-in-from-bottom-2 duration-300 hover:scale-105 transition-transform",style:{backgroundColor:E.color,animationDelay:`${b*100}ms`},children:[a.jsx("span",{className:"text-xs",children:E.emoji}),a.jsx("span",{className:"text-xs",children:E.displayName}),a.jsx(Bt,{className:"h-2.5 w-2.5 ml-0.5 cursor-pointer hover:bg-black/20 rounded-full transition-all duration-200",onClick:()=>v(y)})]},y):null})})})]}),a.jsx("div",{className:"space-y-4",children:o.map((y,b)=>a.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-700",style:{animationDelay:`${600+b*100}ms`},children:[a.jsx("h4",{className:"text-sm font-medium text-orange-200 mb-2",children:y.category}),a.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:y.tags.map((E,T)=>{const S=c.includes(E.name);return a.jsxs("button",{onClick:k=>{k.stopPropagation(),v(E.name)},disabled:!S&&c.length>=8,className:G("relative flex items-center gap-1 p-1.5 rounded-md border text-left text-xs transition-all duration-300 hover:scale-105 hover:shadow-lg group animate-in slide-in-from-bottom-2",S?"border-orange-500/50 bg-orange-500/20 text-white shadow-orange-500/20 shadow-lg animate-pulse":c.length>=8?"border-zinc-600/30 bg-zinc-700/20 text-zinc-500 cursor-not-allowed":"border-zinc-600/50 bg-zinc-700/30 text-zinc-300 hover:border-orange-500/30 hover:bg-zinc-600/50 hover:text-orange-200 hover:shadow-orange-500/10",!S&&c.length<5&&c.length>0&&"animate-pulse border-green-500/30"),style:{animationDelay:`${800+b*100+T*50}ms`,boxShadow:S?`0 0 10px ${E.color}40`:void 0},children:[a.jsx("span",{className:"text-xs transition-transform duration-200 group-hover:scale-110",children:E.emoji}),a.jsx("span",{className:"flex-1 truncate text-xs font-medium",children:E.displayName}),E.isNSFW&&a.jsx(ss,{variant:"outline",className:"text-[8px] px-0.5 py-0 h-2.5 text-red-400 border-red-500/30",children:"NSFW"}),S&&a.jsx(Dr,{className:"h-2.5 w-2.5 text-orange-400 absolute -top-0.5 -right-0.5 bg-zinc-900 rounded-full"})]},E.name)})}),y.category!=="Sexuality"&&a.jsx(Su,{className:"mt-4 bg-zinc-600/50"})]},y.category))})]})}),a.jsxs("div",{className:"p-3 pt-2 border-t border-orange-500/20 space-y-2 animate-in slide-in-from-bottom-4 duration-700 delay-1000",children:[s&&a.jsxs("div",{className:"space-y-1",children:[a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group transition-all duration-200 hover:bg-zinc-700/20 p-1 rounded-lg",children:[a.jsx("input",{type:"checkbox",checked:f,onChange:y=>h(y.target.checked),className:"rounded border-zinc-600 text-orange-500 focus:ring-orange-500 focus:ring-offset-0 transition-all duration-200"}),a.jsx("span",{className:`text-xs transition-all duration-200 ${f?"text-green-300":"text-zinc-300"} group-hover:text-orange-300`,children:"I confirm that I am 18 years old or older"}),f&&a.jsx(Dr,{className:"h-3 w-3 text-green-400"})]}),a.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group transition-all duration-200 hover:bg-zinc-700/20 p-1 rounded-lg",children:[a.jsx("input",{type:"checkbox",checked:p,onChange:y=>m(y.target.checked),className:"rounded border-zinc-600 text-orange-500 focus:ring-orange-500 focus:ring-offset-0 transition-all duration-200"}),a.jsxs("span",{className:`text-xs transition-all duration-200 ${p?"text-green-300":"text-zinc-300"} group-hover:text-orange-300`,children:["I have read and agree to the"," ",a.jsx("a",{href:"/legal/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 underline transition-colors duration-200",children:"Terms of Service"})," ","and"," ",a.jsx("a",{href:"/legal/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 underline transition-colors duration-200",children:"Privacy Policy"})]}),p&&a.jsx(Dr,{className:"h-3 w-3 text-green-400"})]})]}),a.jsx("div",{className:"flex justify-center pt-1",children:a.jsx(Q,{onClick:x,disabled:s&&(!f||!p)||c.length<5,className:`px-8 py-2 text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-orange-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${s&&(!f||!p)||c.length<5?"animate-pulse":""}`,children:c.length<5?`${s?"Complete Setup":"Update Preferences"} (Need ${5-c.length} more tags)`:s?"Complete Setup ‚ú®":"Update Preferences ‚ú®"})})]})]})})})]})})}function Xx(){const{user:t,isAuthenticated:e,refreshUser:n}=kt(),[r,s]=d.useState(!1),[o,i]=d.useState(!1),[l,c]=d.useState(!1);d.useEffect(()=>{if(e&&t&&!l){if(!o){n().then(()=>{i(!0)});return}const h=t.preferences?.completedOnboarding??!1;!h&&!r?s(!0):h&&r&&s(!1)}},[e,t,n,o,l,r]);const u=async h=>{c(!0);try{await bt.updateUserPreferences({selectedTags:h,completedOnboarding:!0,nsfwEnabled:h.some(p=>["nsfw","hentai","breeding","femdom","bdsm","bondage","cnc","ntr","chastity","hypno","voyeur","cheating","cuckold","feet","worship","futa","bbw","succubus","pregnant","shortstack"].includes(p))}),s(!1),await n()}catch(p){console.error("OnboardingCheck: Failed to save preferences:",p)}finally{c(!1)}},f=h=>{!h&&t&&!t.preferences?.completedOnboarding||s(h)};return a.jsx(Jx,{isOpen:r,setIsOpen:f,onSave:u,isFirstTimeSetup:!0})}const Qx=Vu,AE=Hu,Zx=Wu,NE=sa,Iu=d.forwardRef(({className:t,...e},n)=>a.jsx(ca,{ref:n,className:G("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...e}));Iu.displayName=ca.displayName;const eE=d.forwardRef(({className:t,children:e,...n},r)=>a.jsxs(Zx,{children:[a.jsx(Iu,{}),a.jsxs(oa,{ref:r,className:G("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...n,children:[e,a.jsxs(sa,{className:"absolute right-3 top-3 w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none focus:ring-1 focus:ring-gray-400/50",children:[a.jsx(Bt,{className:"h-2.5 w-2.5 text-gray-400"}),a.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));eE.displayName=oa.displayName;const tE=({className:t,...e})=>a.jsx("div",{className:G("flex flex-col space-y-1.5 text-center sm:text-left",t),...e});tE.displayName="DialogHeader";const nE=({className:t,...e})=>a.jsx("div",{className:G("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...e});nE.displayName="DialogFooter";const rE=d.forwardRef(({className:t,...e},n)=>a.jsx(ia,{ref:n,className:G("text-lg font-semibold leading-none tracking-tight",t),...e}));rE.displayName=ia.displayName;const sE=d.forwardRef(({className:t,...e},n)=>a.jsx(aa,{ref:n,className:G("text-sm text-muted-foreground",t),...e}));sE.displayName=aa.displayName;function oE({isOpen:t,onVerified:e}){const[n,r]=d.useState(!1),s=()=>{r(!0),setTimeout(()=>{e()},300)},o=()=>{r(!0),setTimeout(()=>{window.location.href="https://google.com"},300)};return a.jsx(Qx,{open:t,onOpenChange:()=>{},children:a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 min-h-screen",children:[a.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"}),a.jsx("div",{className:`
            relative w-full max-w-sm sm:max-w-md mx-auto my-auto
            transition-all duration-500 ease-out
            ${n?"scale-95 opacity-0":"scale-100 opacity-100"}
          `,style:{maxHeight:"calc(100vh - 2rem)",overflow:"auto"},children:a.jsxs("div",{className:"relative overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-900 via-zinc-800 to-black border border-orange-500/20 shadow-2xl",children:[a.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-orange-500/10 via-transparent to-purple-500/10 animate-pulse"}),a.jsx("div",{className:"absolute inset-0 opacity-5",style:{backgroundImage:"radial-gradient(circle at 25% 25%, orange 1px, transparent 1px)",backgroundSize:"24px 24px"}}),a.jsxs("div",{className:"relative z-10 p-4 sm:p-8",children:[a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsxs("div",{className:"relative inline-block mb-3 sm:mb-4",children:[a.jsx("div",{className:"absolute inset-0 bg-orange-500/30 rounded-full blur-xl animate-pulse"}),a.jsx("div",{className:"relative w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-orange-500 to-amber-500 rounded-full flex items-center justify-center shadow-lg",children:a.jsx(pd,{className:"w-6 h-6 sm:w-8 sm:h-8 text-white"})})]}),a.jsx("h2",{className:"text-xl sm:text-2xl font-bold mb-2 bg-gradient-to-r from-orange-400 to-amber-400 bg-clip-text text-transparent",children:"Age Verification"}),a.jsxs("div",{className:"flex items-center justify-center gap-2 text-amber-400 text-xs sm:text-sm font-medium mb-3 sm:mb-4",children:[a.jsx(md,{className:"w-3 h-3 sm:w-4 sm:h-4"}),a.jsx("span",{children:"Adult Content Verification Required"})]})]}),a.jsxs("div",{className:"text-center mb-6 sm:mb-8",children:[a.jsxs("p",{className:"text-gray-300 text-base sm:text-lg leading-relaxed mb-3 sm:mb-4",children:["You must be ",a.jsx("span",{className:"text-orange-400 font-semibold",children:"18 years or older"})," to access this website."]}),a.jsx("p",{className:"text-gray-400 text-xs sm:text-sm leading-relaxed",children:"This website contains adult content and AI-generated material intended for mature audiences only. By continuing, you confirm that you are of legal age in your jurisdiction."})]}),a.jsxs("div",{className:"space-y-2 sm:space-y-3",children:[a.jsx(Q,{onClick:s,className:"w-full py-3 sm:py-4 text-base sm:text-lg font-semibold bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white border-0 rounded-xl transition-all duration-300 transform hover:scale-[1.02] hover:shadow-xl hover:shadow-orange-500/25",children:"Yes, I am 18 or older"}),a.jsxs(Q,{onClick:o,variant:"outline",className:"w-full py-3 sm:py-4 text-base sm:text-lg font-semibold bg-transparent border-2 border-zinc-600 text-zinc-300 hover:bg-zinc-800 hover:border-zinc-500 rounded-xl transition-all duration-300 transform hover:scale-[1.02] group",children:[a.jsx("span",{children:"No, I am under 18"}),a.jsx(gd,{className:"w-3 h-3 sm:w-4 sm:h-4 ml-2 group-hover:translate-x-1 transition-transform duration-200"})]})]}),a.jsx("div",{className:"mt-4 sm:mt-6 pt-4 sm:pt-6 border-t border-zinc-700/50",children:a.jsxs("p",{className:"text-xs text-zinc-500 text-center leading-relaxed",children:['By clicking "Yes", you certify that you are 18+ years old and agree to our'," ",a.jsx("a",{href:"/legal/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 cursor-pointer underline",children:"Terms of Service"})," ","and"," ",a.jsx("a",{href:"/legal/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 cursor-pointer underline",children:"Privacy Policy"}),"."]})})]}),a.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-bl from-orange-500/20 to-transparent rounded-full blur-3xl"}),a.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-gradient-to-tr from-purple-500/20 to-transparent rounded-full blur-2xl"})]})})]})})}const Rn="ageVerified",Qt="ageVerifiedTimestamp",On="ageVerificationVersion",ta=30,na="v3",Dn={isAgeVerified(){try{const t=localStorage.getItem(Rn),e=localStorage.getItem(Qt),n=localStorage.getItem(On);if(t!=="true"||!e||n!==na)return this.clearVerification(),!1;const r=new Date(parseInt(e)),s=new Date(r.getTime()+ta*24*60*60*1e3);return new Date>s?(this.clearVerification(),!1):!0}catch(t){return console.warn("Error checking age verification:",t),!1}},setAgeVerified(){try{localStorage.setItem(Rn,"true"),localStorage.setItem(Qt,Date.now().toString()),localStorage.setItem(On,na)}catch(t){console.warn("Error setting age verification:",t)}},clearVerification(){try{localStorage.removeItem(Rn),localStorage.removeItem(Qt),localStorage.removeItem(On)}catch(t){console.warn("Error clearing age verification:",t)}},getVerificationTimestamp(){try{const t=localStorage.getItem(Qt);return t?new Date(parseInt(t)):null}catch(t){return console.warn("Error getting verification timestamp:",t),null}},getVerificationStatus(){try{const t=localStorage.getItem(Rn),e=localStorage.getItem(Qt),n=localStorage.getItem(On),r=e?new Date(parseInt(e)):null,s=r?r.getTime()+ta*24*60*60*1e3-Date.now():null;return{isVerified:t==="true",timestamp:r,version:n,timeUntilExpiry:s}}catch(t){return console.warn("Error getting verification status:",t),{isVerified:!1,timestamp:null,version:null,timeUntilExpiry:null}}}};function iE(){const[t,e]=d.useState(null),[n,r]=d.useState(!1);d.useEffect(()=>{console.log("üîç Checking age verification status...");const l=Dn.isAgeVerified(),c=Dn.getVerificationStatus();console.log("üìä Age verification status:",{isVerified:l,timestamp:c.timestamp,version:c.version,timeUntilExpiry:c.timeUntilExpiry,hoursUntilExpiry:c.timeUntilExpiry?Math.round(c.timeUntilExpiry/(1e3*60*60)*100)/100:null}),l?(console.log("‚úÖ Age verification valid, hiding modal"),e(!0),r(!1),console.log("üîß showModal state set to false")):(console.log("‚ùå Age verification required, will show modal"),e(!1),setTimeout(()=>{console.log("üîß showModal state set to true after timeout"),r(!0)},500))},[]);const i={isVerified:t,showModal:n,handleVerification:()=>{console.log("‚úÖ User verified age, storing verification"),Dn.setAgeVerified(),e(!0),r(!1)},resetVerification:()=>{console.log("üîÑ Resetting age verification"),Dn.clearVerification(),e(!1),r(!0)}};return console.log("üîß useAgeVerification returning:",{isVerified:i.isVerified,showModal:i.showModal}),i}const Cu=d.memo(()=>{const[t,e]=d.useState(!1),[n,r]=d.useState(!1),{isVerified:s,showModal:o,handleVerification:i}=iE();console.log(`üè† App.tsx - isVerified: ${s}, showModal: ${o}`);const l=()=>{r(!1),e(!0)},c=()=>{e(!1),r(!0)};return a.jsx(zs,{children:a.jsx(qu,{client:ga,children:a.jsx(T0,{children:a.jsxs(Rb,{onSignIn:l,onSignUp:c,children:[a.jsxs(hp,{children:[s&&!o&&a.jsxs(a.Fragment,{children:[a.jsx(Hx,{children:a.jsx(Nx,{})}),a.jsx(Cf,{})]}),!s&&!o&&a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-black flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full animate-spin mx-auto mb-4"}),a.jsx("p",{className:"text-zinc-400",children:"Loading..."})]})})]}),s&&!o&&a.jsxs(a.Fragment,{children:[a.jsx(bu,{isOpen:t,setIsOpen:e,openSignUp:c}),a.jsx(xu,{isOpen:n,setIsOpen:r,openSignIn:l}),a.jsx(Xx,{})]}),o&&a.jsx(oE,{isOpen:!0,onVerified:i})]})})})})});Cu.displayName="App";const aE=()=>{if(typeof window<"u"&&"performance"in window){const t=performance.getEntriesByType("navigation")[0];return{ttfb:t.responseStart-t.fetchStart,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,loadComplete:t.loadEventEnd-t.loadEventStart,totalLoadTime:t.loadEventEnd-t.fetchStart,dnsLookup:t.domainLookupEnd-t.domainLookupStart,tcpConnection:t.connectEnd-t.connectStart}}return null},cE=()=>{if(!(typeof window>"u")&&"PerformanceObserver"in window)try{new PerformanceObserver(n=>{const r=n.getEntries(),s=r[r.length-1]}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(n=>{n.getEntries().forEach(s=>{const o=s})}).observe({entryTypes:["first-input"]})}catch(t){console.warn("Performance Observer not supported:",t)}},lE=()=>{if(typeof window>"u")return;["/api/characters"].forEach(e=>{const n=document.createElement("link");n.rel="prefetch",n.href=e,document.head.appendChild(n)})};cE();lE();window.addEventListener("error",t=>{if(t.error&&t.error.message){const e=t.error.message.toLowerCase();if(e.includes("insertbefore")||e.includes("removechild")||e.includes("not a child of this node"))return console.warn("üõ°Ô∏è Suppressed React DOM manipulation error:",t.error.message),t.preventDefault(),!1}});window.addEventListener("unhandledrejection",t=>{console.error("üö® Unhandled promise rejection:",t.reason)});window.addEventListener("load",()=>{setTimeout(()=>{aE()},0)});cs.createRoot(document.getElementById("root")).render(a.jsx(N.StrictMode,{children:a.jsx(zs,{children:a.jsx(vd,{children:a.jsx(Mx,{children:a.jsx(Cu,{})})})})}));export{xt as A,Q as B,x0 as C,Qx as D,ic as E,X as F,Gh as G,vE as H,nt as I,Kh as J,Yh as K,Mb as L,Ox as M,yE as N,bE as R,Su as S,tf as V,A as _,ss as a,_ as b,G as c,Vs as d,bt as e,re as f,Tf as g,Yx as h,wt as i,_n as j,Nb as k,$x as l,eE as m,tE as n,rE as o,sE as p,tt as q,nE as r,mu as s,PE as t,kt as u,CE as v,AE as w,NE as x,Uh as y,et as z};
