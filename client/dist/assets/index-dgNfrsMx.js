const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/csrfProtection-K_K8SFs5.js","assets/ui-vendor-wCvZxCWV.js","assets/react-vendor-CgzYKCvO.js","assets/routing-DoJeAdmJ.js","assets/query-vendor-BCFDQDjj.js","assets/utils--BulIq_u.js","assets/icons-BCb4Ufys.js","assets/ForYouPage-sRUoJZIu.js","assets/cards-Dd6d3zSl.js","assets/SEOHead-BiTLg2GW.js","assets/following-C7EqKHal.js","assets/skeleton-B4aaGUBY.js","assets/creators-yhjgDajk.js","assets/card-DtvDGZ2J.js","assets/creator-profile-cGLiw81y.js","assets/recent-chats-a8137f5_.js","assets/SubscribePage-zVAqfAzU.js","assets/SubscriptionManagePage-CSBUFY0D.js","assets/SubscriptionSuccessPage-C1uCmIvn.js","assets/SubscriptionCancelPage-B9_oCOkY.js","assets/CoinsPage-B98yQZY0.js","assets/SettingsPage-DjIz3aKp.js","assets/ProfilePictureUpload-BGV9eZg1.js","assets/not-found-CGIQ6rlr.js","assets/ChatPage-I8Xz1UgD.js","assets/violation-tracker-OqhfsEjM.js","assets/prohibitedWordsFilter-C7sCMSWg.js","assets/textarea-Bd0eMlpJ.js","assets/alert-Crk7BYMY.js","assets/dialog-P5bXHoXo.js","assets/CharacterProfile-DivmTo9k.js","assets/CharacterPage-NjMil5O0.js","assets/tag-CmjmMJLD.js","assets/Breadcrumb-Dz1eOKAg.js","assets/FavoritesPage-BBRZIn8U.js","assets/NotFoundPage-Cy_A5J-2.js","assets/UserProfilePage-C2Cl2njy.js","assets/BrandingFooter-Z0ksdxIJ.js","assets/UserGalleryPage-DvbSpVed.js","assets/CharacterGallery-CXz8vp9y.js","assets/index-Bk2AHYaC.js","assets/UserCharacterGalleryPage-CTYxrMWK.js","assets/AllUserImagesPage-CCs_TazY.js","assets/ShowcasePage-9uTe3kJh.js","assets/EmailVerificationPage-JEh05gXC.js","assets/CreateCharacter-C7omC6lB.js","assets/CreateCharacterEnhanced-GvWgLZxf.js","assets/UserCharacters-7IdC9XE4.js","assets/TestPage-DwOLuLCr.js","assets/TagPage-DBXtVR6R.js","assets/SearchPage-vnnzKiJj.js","assets/AuthDebugPage-Cc3u9h6a.js","assets/PaymentSuccessPage-bZLFYEWK.js","assets/PaymentCancelPage-DFQpseeF.js","assets/GenerateImagesPage-A18jldqa.js","assets/CharacterGalleryPage-B1XGOAX5.js","assets/FeaturesPage-BJ8Pheqq.js","assets/LegalPage-DhAEugyT.js","assets/CommunityGuidelinesPage-_a-6uxj8.js","assets/LegalPolicyPage-iDE5tH3Y.js","assets/PrivacyPolicyPage-BuvwfUjh.js","assets/TermsOfServicePage-C_qVu_c9.js","assets/ContentPolicyPage-jSHMgNLL.js","assets/BlockedContentPolicyPage-Bj2vfHLx.js","assets/CookiePolicyPage-BLCde9dl.js","assets/DMCANoticePage-CHKX_eMz.js","assets/ExemptionStatementPage-Cd7hPLQI.js","assets/ContentProviderCompliancePage-BLYRISel.js","assets/ContentSafetyCompliancePage-CJjqQ4mu.js","assets/LiabilityDisclaimerPage-BWAASHJJ.js","assets/GuidesPage-C-e0WuCN.js","assets/BlogPostPage-C5h7y1T5.js"])))=>i.map(i=>d[i]);
var wu=Object.defineProperty;var bu=(t,e,n)=>e in t?wu(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var je=(t,e,n)=>bu(t,typeof e!="symbol"?e+"":e,n);import{j as l,P as ae,c as Rs,a as xu,u as Bt,B as Tu,b as Eu,d as Xi,e as Y,f as an,R as _u,g as Su,h as zn,i as Iu,D as Cu,k as Pu,_ as Ns,S as Au}from"./ui-vendor-wCvZxCWV.js";import{b as sr,g as js,r as d,a as A,R as _o}from"./react-vendor-CgzYKCvO.js";import{Q as ku,u as or,a as Ot,b as Os,c as Ru}from"./query-vendor-BCFDQDjj.js";import{t as Nu,c as ft,a as ir}from"./utils--BulIq_u.js";import{X as fn,C as So,H as ju,S as Ou,B as Du,U as Lu,M as Qi,a as Mu,I as Zi,F as Io,b as Fu,c as $u,d as Uu,G as zu,e as Vu,E as Hu,L as rs,f as Bu,g as Wu,h as ea,i as qu,j as Gu,k as Ku,l as Yu,m as Ju,n as Xu,P as Qu,o as Rr}from"./icons-BCb4Ufys.js";import{S as Zu,R as C,u as Ds,L as Xe,B as ed}from"./routing-DoJeAdmJ.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function n(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=n(s);fetch(s.href,o)}})();var ss={},Co=sr;ss.createRoot=Co.createRoot,ss.hydrateRoot=Co.hydrateRoot;const td={medium:{maxRequests:6,windowMs:1e3,backoffMultiplier:1.5,maxBackoffMs:3e3,priority:"medium"}};class nd{constructor(){this.requestHistory=new Map,this.requestQueue=[],this.processingQueue=!1,this.backoffDelays=new Map,this.consecutiveRateLimits=new Map}async executeRequest(e,n,r=td.medium){if(this.canExecuteNow(e,r))try{const s=await this.executeWithBackoff(e,n,r);return this.recordSuccess(e),s}catch(s){if(s.isRateLimit)return this.queueRequest(e,n,r);throw s}else return this.queueRequest(e,n,r)}canExecuteNow(e,n){const r=Date.now(),o=(this.requestHistory.get(e)||[]).filter(i=>r-i<n.windowMs);return this.requestHistory.set(e,o),o.length<n.maxRequests}async executeWithBackoff(e,n,r){const s=this.backoffDelays.get(e)||0;s>0&&(this.showProgressIndicator(e,s),await this.sleep(s));try{const o=await n();return this.recordRequestSuccess(e),o}catch(o){throw o.isRateLimit&&this.handleRateLimit(e,r),o}}queueRequest(e,n,r){return new Promise((s,o)=>{const i={id:`${e}-${Date.now()}-${Math.random()}`,request:n,priority:r.priority,timestamp:Date.now(),retryCount:0,resolve:s,reject:o};this.insertByPriority(i),this.showQueuedMessage(r.priority),this.processingQueue||this.processQueue()})}insertByPriority(e){const n={high:0,medium:1,low:2},r=this.requestQueue.findIndex(s=>n[s.priority]>n[e.priority]);r===-1?this.requestQueue.push(e):this.requestQueue.splice(r,0,e)}async processQueue(){if(!this.processingQueue){for(this.processingQueue=!0;this.requestQueue.length>0;){const e=this.requestQueue.shift();try{await this.sleep(100);const n=await e.request();e.resolve(n),this.recordRequestSuccess(e.id)}catch(n){n.isRateLimit&&e.retryCount<3?(e.retryCount++,await this.sleep(Math.min(1e3*Math.pow(2,e.retryCount),5e3)),this.requestQueue.unshift(e)):e.reject(n)}}this.processingQueue=!1}}handleRateLimit(e,n){const r=this.backoffDelays.get(e)||0,s=this.consecutiveRateLimits.get(e)||0,o=Math.min(Math.max(r*n.backoffMultiplier,500),n.maxBackoffMs);this.backoffDelays.set(e,o),this.consecutiveRateLimits.set(e,s+1),setTimeout(()=>{const i=this.backoffDelays.get(e)||0;this.backoffDelays.set(e,Math.max(i*.8,0))},n.windowMs)}recordRequestSuccess(e){const n=Date.now(),r=this.requestHistory.get(e)||[];r.push(n),this.requestHistory.set(e,r)}recordSuccess(e){this.backoffDelays.set(e,0),this.consecutiveRateLimits.set(e,0)}showProgressIndicator(e,n){typeof window<"u"&&window.toast&&window.toast({title:"Processing...",description:`Please wait ${Math.ceil(n/1e3)}s - managing request rate`,variant:"default"})}showQueuedMessage(e){const n={high:"Request queued - processing shortly",medium:"Request queued - processing in order",low:"Request queued - will process when possible"};typeof window<"u"&&window.toast&&window.toast({title:"Request Queued",description:n[e],variant:"default"})}sleep(e){return new Promise(n=>setTimeout(n,e))}getQueueStatus(){return{queueLength:this.requestQueue.length,processingQueue:this.processingQueue,backoffDelays:Object.fromEntries(this.backoffDelays),consecutiveRateLimits:Object.fromEntries(this.consecutiveRateLimits)}}}const ta=new nd;function rd(){const t=window.location.hostname;return t.includes("vercel.app")||t.includes("medusa-vrfriendly.vercel.app"),""}const na=rd();async function ra(t){if(!t.ok){const e=await t.text()||t.statusText;if(t.status===401&&(e.includes("Invalid or expired token")||e.includes("invalid signature"))&&(console.warn("üîí JWT error detected, clearing tokens and refreshing page"),localStorage.removeItem("medusavr_access_token"),localStorage.removeItem("medusavr_refresh_token"),localStorage.removeItem("medusavr_user"),window.location.reload()),t.status===429){const r=new Error("Rate limit exceeded");throw r.isRateLimit=!0,r.originalResponse=t,r.status=429,console.info("‚è≥ Rate limit encountered - request will be queued"),r}const n=new Error(`${t.status}: ${e}`);throw n.status=t.status,n.response=t,n}}async function E(t,e,n,r={},s="medium"){const o=`${na}${e}`,i=localStorage.getItem("medusavr_access_token"),c={method:t,credentials:"include",headers:{...i?{Authorization:`Bearer ${i}`}:{},...r}};n!==void 0?n instanceof FormData?c.body=n:(c.headers={"Content-Type":"application/json",...c.headers},c.body=JSON.stringify(n)):c.headers={"Content-Type":"application/json",...c.headers};const a=`${t}-${e}`;return await ta.executeRequest(a,async()=>{const f=await fetch(o,c);return await ra(f),f},{maxRequests:s==="high"?10:s==="medium"?6:3,windowMs:1e3,backoffMultiplier:s==="high"?1.2:s==="medium"?1.5:2,maxBackoffMs:s==="high"?2e3:s==="medium"?3e3:5e3,priority:s})}const sa=({on401:t,priority:e="medium"})=>async({queryKey:n})=>{const r=n[0],s=`${na}${r}`,o=localStorage.getItem("medusavr_access_token"),i=o?{Authorization:`Bearer ${o}`}:{},c=`GET-${r}`;return await ta.executeRequest(c,async()=>{const u=await fetch(s,{headers:i,credentials:"include"});return await ra(u),u.json()},{maxRequests:e==="high"?10:e==="medium"?6:3,windowMs:1e3,backoffMultiplier:e==="high"?1.2:e==="medium"?1.5:2,maxBackoffMs:e==="high"?2e3:e==="medium"?3e3:5e3,priority:e})},oa=new ku({defaultOptions:{queries:{queryFn:sa({on401:"throw",priority:"medium"}),refetchInterval:!1,refetchOnWindowFocus:!1,refetchOnReconnect:!1,staleTime:5*6e4,retry:(t,e)=>e?.isRateLimit||e?.status===429||e?.status>=400&&e?.status<500&&e?.status!==408?!1:t<1,retryDelay:t=>{const e=Math.min(3e3*2**t,3e4),n=Math.random()*.3*e;return e+n}},mutations:{retry:(t,e)=>(e?.isRateLimit||e?.status===429||e?.status>=400&&e?.status<500,!1)}}});typeof window<"u"&&window.addEventListener("unhandledrejection",t=>{t.reason?.isRateLimit&&(t.preventDefault(),console.info("‚è≥ Rate limit error handled gracefully"))});const Vx=Object.freeze(Object.defineProperty({__proto__:null,apiRequest:E,getQueryFn:sa,queryClient:oa},Symbol.toStringTag,{value:"Module"}));var sd=typeof Element<"u",od=typeof Map=="function",id=typeof Set=="function",ad=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function Nn(t,e){if(t===e)return!0;if(t&&e&&typeof t=="object"&&typeof e=="object"){if(t.constructor!==e.constructor)return!1;var n,r,s;if(Array.isArray(t)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(!Nn(t[r],e[r]))return!1;return!0}var o;if(od&&t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;for(o=t.entries();!(r=o.next()).done;)if(!Nn(r.value[1],e.get(r.value[0])))return!1;return!0}if(id&&t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(o=t.entries();!(r=o.next()).done;)if(!e.has(r.value[0]))return!1;return!0}if(ad&&ArrayBuffer.isView(t)&&ArrayBuffer.isView(e)){if(n=t.length,n!=e.length)return!1;for(r=n;r--!==0;)if(t[r]!==e[r])return!1;return!0}if(t.constructor===RegExp)return t.source===e.source&&t.flags===e.flags;if(t.valueOf!==Object.prototype.valueOf&&typeof t.valueOf=="function"&&typeof e.valueOf=="function")return t.valueOf()===e.valueOf();if(t.toString!==Object.prototype.toString&&typeof t.toString=="function"&&typeof e.toString=="function")return t.toString()===e.toString();if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(e,s[r]))return!1;if(sd&&t instanceof Element)return!1;for(r=n;r--!==0;)if(!((s[r]==="_owner"||s[r]==="__v"||s[r]==="__o")&&t.$$typeof)&&!Nn(t[s[r]],e[s[r]]))return!1;return!0}return t!==t&&e!==e}var cd=function(e,n){try{return Nn(e,n)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}};const ld=js(cd);var ud=function(t,e,n,r,s,o,i,c){if(!t){var a;if(e===void 0)a=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,r,s,o,i,c],f=0;a=new Error(e.replace(/%s/g,function(){return u[f++]})),a.name="Invariant Violation"}throw a.framesToPop=1,a}},dd=ud;const Po=js(dd);var fd=function(e,n,r,s){var o=r?r.call(s,e,n):void 0;if(o!==void 0)return!!o;if(e===n)return!0;if(typeof e!="object"||!e||typeof n!="object"||!n)return!1;var i=Object.keys(e),c=Object.keys(n);if(i.length!==c.length)return!1;for(var a=Object.prototype.hasOwnProperty.bind(n),u=0;u<i.length;u++){var f=i[u];if(!a(f))return!1;var h=e[f],p=n[f];if(o=r?r.call(s,h,p,f):void 0,o===!1||o===void 0&&h!==p)return!1}return!0};const hd=js(fd);var ia=(t=>(t.BASE="base",t.BODY="body",t.HEAD="head",t.HTML="html",t.LINK="link",t.META="meta",t.NOSCRIPT="noscript",t.SCRIPT="script",t.STYLE="style",t.TITLE="title",t.FRAGMENT="Symbol(react.fragment)",t))(ia||{}),Nr={link:{rel:["amphtml","canonical","alternate"]},script:{type:["application/ld+json"]},meta:{charset:"",name:["generator","robots","description"],property:["og:type","og:title","og:url","og:image","og:image:alt","og:description","twitter:url","twitter:title","twitter:description","twitter:image","twitter:image:alt","twitter:card","twitter:site"]}},Ao=Object.values(ia),Ls={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pd=Object.entries(Ls).reduce((t,[e,n])=>(t[n]=e,t),{}),de="data-rh",Dt={DEFAULT_TITLE:"defaultTitle",DEFER:"defer",ENCODE_SPECIAL_CHARACTERS:"encodeSpecialCharacters",ON_CHANGE_CLIENT_STATE:"onChangeClientState",TITLE_TEMPLATE:"titleTemplate",PRIORITIZE_SEO_TAGS:"prioritizeSeoTags"},Lt=(t,e)=>{for(let n=t.length-1;n>=0;n-=1){const r=t[n];if(Object.prototype.hasOwnProperty.call(r,e))return r[e]}return null},md=t=>{let e=Lt(t,"title");const n=Lt(t,Dt.TITLE_TEMPLATE);if(Array.isArray(e)&&(e=e.join("")),n&&e)return n.replace(/%s/g,()=>e);const r=Lt(t,Dt.DEFAULT_TITLE);return e||r||void 0},gd=t=>Lt(t,Dt.ON_CHANGE_CLIENT_STATE)||(()=>{}),jr=(t,e)=>e.filter(n=>typeof n[t]<"u").map(n=>n[t]).reduce((n,r)=>({...n,...r}),{}),yd=(t,e)=>e.filter(n=>typeof n.base<"u").map(n=>n.base).reverse().reduce((n,r)=>{if(!n.length){const s=Object.keys(r);for(let o=0;o<s.length;o+=1){const c=s[o].toLowerCase();if(t.indexOf(c)!==-1&&r[c])return n.concat(r)}}return n},[]),vd=t=>console&&typeof console.warn=="function"&&console.warn(t),Yt=(t,e,n)=>{const r={};return n.filter(s=>Array.isArray(s[t])?!0:(typeof s[t]<"u"&&vd(`Helmet: ${t} should be of type "Array". Instead found type "${typeof s[t]}"`),!1)).map(s=>s[t]).reverse().reduce((s,o)=>{const i={};o.filter(a=>{let u;const f=Object.keys(a);for(let p=0;p<f.length;p+=1){const m=f[p],g=m.toLowerCase();e.indexOf(g)!==-1&&!(u==="rel"&&a[u].toLowerCase()==="canonical")&&!(g==="rel"&&a[g].toLowerCase()==="stylesheet")&&(u=g),e.indexOf(m)!==-1&&(m==="innerHTML"||m==="cssText"||m==="itemprop")&&(u=m)}if(!u||!a[u])return!1;const h=a[u].toLowerCase();return r[u]||(r[u]={}),i[u]||(i[u]={}),r[u][h]?!1:(i[u][h]=!0,!0)}).reverse().forEach(a=>s.push(a));const c=Object.keys(i);for(let a=0;a<c.length;a+=1){const u=c[a],f={...r[u],...i[u]};r[u]=f}return s},[]).reverse()},wd=(t,e)=>{if(Array.isArray(t)&&t.length){for(let n=0;n<t.length;n+=1)if(t[n][e])return!0}return!1},bd=t=>({baseTag:yd(["href"],t),bodyAttributes:jr("bodyAttributes",t),defer:Lt(t,Dt.DEFER),encode:Lt(t,Dt.ENCODE_SPECIAL_CHARACTERS),htmlAttributes:jr("htmlAttributes",t),linkTags:Yt("link",["rel","href"],t),metaTags:Yt("meta",["name","charset","http-equiv","property","itemprop"],t),noscriptTags:Yt("noscript",["innerHTML"],t),onChangeClientState:gd(t),scriptTags:Yt("script",["src","innerHTML"],t),styleTags:Yt("style",["cssText"],t),title:md(t),titleAttributes:jr("titleAttributes",t),prioritizeSeoTags:wd(t,Dt.PRIORITIZE_SEO_TAGS)}),aa=t=>Array.isArray(t)?t.join(""):t,xd=(t,e)=>{const n=Object.keys(t);for(let r=0;r<n.length;r+=1)if(e[n[r]]&&e[n[r]].includes(t[n[r]]))return!0;return!1},Or=(t,e)=>Array.isArray(t)?t.reduce((n,r)=>(xd(r,e)?n.priority.push(r):n.default.push(r),n),{priority:[],default:[]}):{default:t,priority:[]},ko=(t,e)=>({...t,[e]:void 0}),Td=["noscript","script","style"],os=(t,e=!0)=>e===!1?String(t):String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;"),ca=t=>Object.keys(t).reduce((e,n)=>{const r=typeof t[n]<"u"?`${n}="${t[n]}"`:`${n}`;return e?`${e} ${r}`:r},""),Ed=(t,e,n,r)=>{const s=ca(n),o=aa(e);return s?`<${t} ${de}="true" ${s}>${os(o,r)}</${t}>`:`<${t} ${de}="true">${os(o,r)}</${t}>`},_d=(t,e,n=!0)=>e.reduce((r,s)=>{const o=s,i=Object.keys(o).filter(u=>!(u==="innerHTML"||u==="cssText")).reduce((u,f)=>{const h=typeof o[f]>"u"?f:`${f}="${os(o[f],n)}"`;return u?`${u} ${h}`:h},""),c=o.innerHTML||o.cssText||"",a=Td.indexOf(t)===-1;return`${r}<${t} ${de}="true" ${i}${a?"/>":`>${c}</${t}>`}`},""),la=(t,e={})=>Object.keys(t).reduce((n,r)=>{const s=Ls[r];return n[s||r]=t[r],n},e),Sd=(t,e,n)=>{const r={key:e,[de]:!0},s=la(n,r);return[A.createElement("title",s,e)]},jn=(t,e)=>e.map((n,r)=>{const s={key:r,[de]:!0};return Object.keys(n).forEach(o=>{const c=Ls[o]||o;if(c==="innerHTML"||c==="cssText"){const a=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:a}}else s[c]=n[o]}),A.createElement(t,s)}),le=(t,e,n=!0)=>{switch(t){case"title":return{toComponent:()=>Sd(t,e.title,e.titleAttributes),toString:()=>Ed(t,e.title,e.titleAttributes,n)};case"bodyAttributes":case"htmlAttributes":return{toComponent:()=>la(e),toString:()=>ca(e)};default:return{toComponent:()=>jn(t,e),toString:()=>_d(t,e,n)}}},Id=({metaTags:t,linkTags:e,scriptTags:n,encode:r})=>{const s=Or(t,Nr.meta),o=Or(e,Nr.link),i=Or(n,Nr.script);return{priorityMethods:{toComponent:()=>[...jn("meta",s.priority),...jn("link",o.priority),...jn("script",i.priority)],toString:()=>`${le("meta",s.priority,r)} ${le("link",o.priority,r)} ${le("script",i.priority,r)}`},metaTags:s.default,linkTags:o.default,scriptTags:i.default}},Cd=t=>{const{baseTag:e,bodyAttributes:n,encode:r=!0,htmlAttributes:s,noscriptTags:o,styleTags:i,title:c="",titleAttributes:a,prioritizeSeoTags:u}=t;let{linkTags:f,metaTags:h,scriptTags:p}=t,m={toComponent:()=>{},toString:()=>""};return u&&({priorityMethods:m,linkTags:f,metaTags:h,scriptTags:p}=Id(t)),{priority:m,base:le("base",e,r),bodyAttributes:le("bodyAttributes",n,r),htmlAttributes:le("htmlAttributes",s,r),link:le("link",f,r),meta:le("meta",h,r),noscript:le("noscript",o,r),script:le("script",p,r),style:le("style",i,r),title:le("title",{title:c,titleAttributes:a},r)}},is=Cd,Sn=[],ua=!!(typeof window<"u"&&window.document&&window.document.createElement),as=class{constructor(t,e){je(this,"instances",[]);je(this,"canUseDOM",ua);je(this,"context");je(this,"value",{setHelmet:t=>{this.context.helmet=t},helmetInstances:{get:()=>this.canUseDOM?Sn:this.instances,add:t=>{(this.canUseDOM?Sn:this.instances).push(t)},remove:t=>{const e=(this.canUseDOM?Sn:this.instances).indexOf(t);(this.canUseDOM?Sn:this.instances).splice(e,1)}}});this.context=t,this.canUseDOM=e||!1,e||(t.helmet=is({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}}))}},Pd={},da=A.createContext(Pd),Tt,Ms=(Tt=class extends d.Component{constructor(n){super(n);je(this,"helmetData");this.helmetData=new as(this.props.context||{},Tt.canUseDOM)}render(){return A.createElement(da.Provider,{value:this.helmetData.value},this.props.children)}},je(Tt,"canUseDOM",ua),Tt),jt=(t,e)=>{const n=document.head||document.querySelector("head"),r=n.querySelectorAll(`${t}[${de}]`),s=[].slice.call(r),o=[];let i;return e&&e.length&&e.forEach(c=>{const a=document.createElement(t);for(const u in c)if(Object.prototype.hasOwnProperty.call(c,u))if(u==="innerHTML")a.innerHTML=c.innerHTML;else if(u==="cssText")a.styleSheet?a.styleSheet.cssText=c.cssText:a.appendChild(document.createTextNode(c.cssText));else{const f=u,h=typeof c[f]>"u"?"":c[f];a.setAttribute(u,h)}a.setAttribute(de,"true"),s.some((u,f)=>(i=f,a.isEqualNode(u)))?s.splice(i,1):o.push(a)}),s.forEach(c=>c.parentNode?.removeChild(c)),o.forEach(c=>n.appendChild(c)),{oldTags:s,newTags:o}},cs=(t,e)=>{const n=document.getElementsByTagName(t)[0];if(!n)return;const r=n.getAttribute(de),s=r?r.split(","):[],o=[...s],i=Object.keys(e);for(const c of i){const a=e[c]||"";n.getAttribute(c)!==a&&n.setAttribute(c,a),s.indexOf(c)===-1&&s.push(c);const u=o.indexOf(c);u!==-1&&o.splice(u,1)}for(let c=o.length-1;c>=0;c-=1)n.removeAttribute(o[c]);s.length===o.length?n.removeAttribute(de):n.getAttribute(de)!==i.join(",")&&n.setAttribute(de,i.join(","))},Ad=(t,e)=>{typeof t<"u"&&document.title!==t&&(document.title=aa(t)),cs("title",e)},Ro=(t,e)=>{const{baseTag:n,bodyAttributes:r,htmlAttributes:s,linkTags:o,metaTags:i,noscriptTags:c,onChangeClientState:a,scriptTags:u,styleTags:f,title:h,titleAttributes:p}=t;cs("body",r),cs("html",s),Ad(h,p);const m={baseTag:jt("base",n),linkTags:jt("link",o),metaTags:jt("meta",i),noscriptTags:jt("noscript",c),scriptTags:jt("script",u),styleTags:jt("style",f)},g={},w={};Object.keys(m).forEach(v=>{const{newTags:x,oldTags:y}=m[v];x.length&&(g[v]=x),y.length&&(w[v]=m[v].oldTags)}),e&&e(),a(t,g,w)},Jt=null,kd=t=>{Jt&&cancelAnimationFrame(Jt),t.defer?Jt=requestAnimationFrame(()=>{Ro(t,()=>{Jt=null})}):(Ro(t),Jt=null)},Rd=kd,No=class extends d.Component{constructor(){super(...arguments);je(this,"rendered",!1)}shouldComponentUpdate(e){return!hd(e,this.props)}componentDidUpdate(){this.emitChange()}componentWillUnmount(){const{helmetInstances:e}=this.props.context;e.remove(this),this.emitChange()}emitChange(){const{helmetInstances:e,setHelmet:n}=this.props.context;let r=null;const s=bd(e.get().map(o=>{const i={...o.props};return delete i.context,i}));Ms.canUseDOM?Rd(s):is&&(r=is(s)),n(r)}init(){if(this.rendered)return;this.rendered=!0;const{helmetInstances:e}=this.props.context;e.add(this),this.emitChange()}render(){return this.init(),null}},ns,Hx=(ns=class extends d.Component{shouldComponentUpdate(t){return!ld(ko(this.props,"helmetData"),ko(t,"helmetData"))}mapNestedChildrenToProps(t,e){if(!e)return null;switch(t.type){case"script":case"noscript":return{innerHTML:e};case"style":return{cssText:e};default:throw new Error(`<${t.type} /> elements are self-closing and can not contain children. Refer to our API for more information.`)}}flattenArrayTypeChildren(t,e,n,r){return{...e,[t.type]:[...e[t.type]||[],{...n,...this.mapNestedChildrenToProps(t,r)}]}}mapObjectTypeChildren(t,e,n,r){switch(t.type){case"title":return{...e,[t.type]:r,titleAttributes:{...n}};case"body":return{...e,bodyAttributes:{...n}};case"html":return{...e,htmlAttributes:{...n}};default:return{...e,[t.type]:{...n}}}}mapArrayTypeChildrenToProps(t,e){let n={...e};return Object.keys(t).forEach(r=>{n={...n,[r]:t[r]}}),n}warnOnInvalidChildren(t,e){return Po(Ao.some(n=>t.type===n),typeof t.type=="function"?"You may be attempting to nest <Helmet> components within each other, which is not allowed. Refer to our API for more information.":`Only elements types ${Ao.join(", ")} are allowed. Helmet does not support rendering <${t.type}> elements. Refer to our API for more information.`),Po(!e||typeof e=="string"||Array.isArray(e)&&!e.some(n=>typeof n!="string"),`Helmet expects a string as a child of <${t.type}>. Did you forget to wrap your children in braces? ( <${t.type}>{\`\`}</${t.type}> ) Refer to our API for more information.`),!0}mapChildrenToProps(t,e){let n={};return A.Children.forEach(t,r=>{if(!r||!r.props)return;const{children:s,...o}=r.props,i=Object.keys(o).reduce((a,u)=>(a[pd[u]||u]=o[u],a),{});let{type:c}=r;switch(typeof c=="symbol"?c=c.toString():this.warnOnInvalidChildren(r,s),c){case"Symbol(react.fragment)":e=this.mapChildrenToProps(s,e);break;case"link":case"meta":case"noscript":case"script":case"style":n=this.flattenArrayTypeChildren(r,n,i,s);break;default:e=this.mapObjectTypeChildren(r,e,i,s);break}}),this.mapArrayTypeChildrenToProps(n,e)}render(){const{children:t,...e}=this.props;let n={...e},{helmetData:r}=e;if(t&&(n=this.mapChildrenToProps(t,n)),r&&!(r instanceof as)){const s=r;r=new as(s.context,!0),delete n.helmetData}return r?A.createElement(No,{...n,context:r.value}):A.createElement(da.Consumer,null,s=>A.createElement(No,{...n,context:s}))}},je(ns,"defaultProps",{defer:!0,encodeSpecialCharacters:!0,prioritizeSeoTags:!1}),ns);const Nd=1,jd=7e3;let Dr=0;function Od(){return Dr=(Dr+1)%Number.MAX_SAFE_INTEGER,Dr.toString()}const Lr=new Map,jo=t=>{if(Lr.has(t))return;const e=setTimeout(()=>{Lr.delete(t),en({type:"REMOVE_TOAST",toastId:t})},jd);Lr.set(t,e)},Dd=(t,e)=>{switch(e.type){case"ADD_TOAST":return{...t,toasts:[e.toast,...t.toasts].slice(0,Nd)};case"UPDATE_TOAST":return{...t,toasts:t.toasts.map(n=>n.id===e.toast.id?{...n,...e.toast}:n)};case"DISMISS_TOAST":{const{toastId:n}=e;return n?jo(n):t.toasts.forEach(r=>{jo(r.id)}),{...t,toasts:t.toasts.map(r=>r.id===n||n===void 0?{...r,open:!1}:r)}}case"REMOVE_TOAST":return e.toastId===void 0?{...t,toasts:[]}:{...t,toasts:t.toasts.filter(n=>n.id!==e.toastId)}}},On=[];let Dn={toasts:[]};function en(t){Dn=Dd(Dn,t),On.forEach(e=>{e(Dn)})}function Ld({...t}){const e=Od(),n=s=>en({type:"UPDATE_TOAST",toast:{...s,id:e}}),r=()=>en({type:"DISMISS_TOAST",toastId:e});return en({type:"ADD_TOAST",toast:{...t,id:e,open:!0,onOpenChange:s=>{s||r()}}}),{id:e,dismiss:r,update:n}}function Fs(){const[t,e]=d.useState(Dn);return d.useEffect(()=>(On.push(e),()=>{const n=On.indexOf(e);n>-1&&On.splice(n,1)}),[t]),{...t,toast:Ld,dismiss:n=>en({type:"DISMISS_TOAST",toastId:n})}}var Md=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Fd="VisuallyHidden",ar=d.forwardRef((t,e)=>l.jsx(ae.span,{...t,ref:e,style:{...Md,...t.style}}));ar.displayName=Fd;var $d=ar,$s="ToastProvider",[Us,Ud,zd]=xu("Toast"),[fa,Bx]=Rs("Toast",[zd]),[Vd,cr]=fa($s),ha=t=>{const{__scopeToast:e,label:n="Notification",duration:r=5e3,swipeDirection:s="right",swipeThreshold:o=50,children:i}=t,[c,a]=d.useState(null),[u,f]=d.useState(0),h=d.useRef(!1),p=d.useRef(!1);return n.trim()||console.error(`Invalid prop \`label\` supplied to \`${$s}\`. Expected non-empty \`string\`.`),l.jsx(Us.Provider,{scope:e,children:l.jsx(Vd,{scope:e,label:n,duration:r,swipeDirection:s,swipeThreshold:o,toastCount:u,viewport:c,onViewportChange:a,onToastAdd:d.useCallback(()=>f(m=>m+1),[]),onToastRemove:d.useCallback(()=>f(m=>m-1),[]),isFocusedToastEscapeKeyDownRef:h,isClosePausedRef:p,children:i})})};ha.displayName=$s;var pa="ToastViewport",Hd=["F8"],ls="toast.viewportPause",us="toast.viewportResume",ma=d.forwardRef((t,e)=>{const{__scopeToast:n,hotkey:r=Hd,label:s="Notifications ({hotkey})",...o}=t,i=cr(pa,n),c=Ud(n),a=d.useRef(null),u=d.useRef(null),f=d.useRef(null),h=d.useRef(null),p=Bt(e,h,i.onViewportChange),m=r.join("+").replace(/Key/g,"").replace(/Digit/g,""),g=i.toastCount>0;d.useEffect(()=>{const v=x=>{r.length!==0&&r.every(b=>x[b]||x.code===b)&&h.current?.focus()};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[r]),d.useEffect(()=>{const v=a.current,x=h.current;if(g&&v&&x){const y=()=>{if(!i.isClosePausedRef.current){const S=new CustomEvent(ls);x.dispatchEvent(S),i.isClosePausedRef.current=!0}},b=()=>{if(i.isClosePausedRef.current){const S=new CustomEvent(us);x.dispatchEvent(S),i.isClosePausedRef.current=!1}},T=S=>{!v.contains(S.relatedTarget)&&b()},_=()=>{v.contains(document.activeElement)||b()};return v.addEventListener("focusin",y),v.addEventListener("focusout",T),v.addEventListener("pointermove",y),v.addEventListener("pointerleave",_),window.addEventListener("blur",y),window.addEventListener("focus",b),()=>{v.removeEventListener("focusin",y),v.removeEventListener("focusout",T),v.removeEventListener("pointermove",y),v.removeEventListener("pointerleave",_),window.removeEventListener("blur",y),window.removeEventListener("focus",b)}}},[g,i.isClosePausedRef]);const w=d.useCallback(({tabbingDirection:v})=>{const y=c().map(b=>{const T=b.ref.current,_=[T,...nf(T)];return v==="forwards"?_:_.reverse()});return(v==="forwards"?y.reverse():y).flat()},[c]);return d.useEffect(()=>{const v=h.current;if(v){const x=y=>{const b=y.altKey||y.ctrlKey||y.metaKey;if(y.key==="Tab"&&!b){const _=document.activeElement,S=y.shiftKey;if(y.target===v&&S){u.current?.focus();return}const z=w({tabbingDirection:S?"backwards":"forwards"}),O=z.findIndex($=>$===_);Mr(z.slice(O+1))?y.preventDefault():S?u.current?.focus():f.current?.focus()}};return v.addEventListener("keydown",x),()=>v.removeEventListener("keydown",x)}},[c,w]),l.jsxs(Tu,{ref:a,role:"region","aria-label":s.replace("{hotkey}",m),tabIndex:-1,style:{pointerEvents:g?void 0:"none"},children:[g&&l.jsx(ds,{ref:u,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"forwards"});Mr(v)}}),l.jsx(Us.Slot,{scope:n,children:l.jsx(ae.ol,{tabIndex:-1,...o,ref:p})}),g&&l.jsx(ds,{ref:f,onFocusFromOutsideViewport:()=>{const v=w({tabbingDirection:"backwards"});Mr(v)}})]})});ma.displayName=pa;var ga="ToastFocusProxy",ds=d.forwardRef((t,e)=>{const{__scopeToast:n,onFocusFromOutsideViewport:r,...s}=t,o=cr(ga,n);return l.jsx(ar,{tabIndex:0,...s,ref:e,style:{position:"fixed"},onFocus:i=>{const c=i.relatedTarget;!o.viewport?.contains(c)&&r()}})});ds.displayName=ga;var hn="Toast",Bd="toast.swipeStart",Wd="toast.swipeMove",qd="toast.swipeCancel",Gd="toast.swipeEnd",ya=d.forwardRef((t,e)=>{const{forceMount:n,open:r,defaultOpen:s,onOpenChange:o,...i}=t,[c,a]=Eu({prop:r,defaultProp:s??!0,onChange:o,caller:hn});return l.jsx(Xi,{present:n||c,children:l.jsx(Jd,{open:c,...i,ref:e,onClose:()=>a(!1),onPause:an(t.onPause),onResume:an(t.onResume),onSwipeStart:Y(t.onSwipeStart,u=>{u.currentTarget.setAttribute("data-swipe","start")}),onSwipeMove:Y(t.onSwipeMove,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","move"),u.currentTarget.style.setProperty("--radix-toast-swipe-move-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-move-y",`${h}px`)}),onSwipeCancel:Y(t.onSwipeCancel,u=>{u.currentTarget.setAttribute("data-swipe","cancel"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-end-y")}),onSwipeEnd:Y(t.onSwipeEnd,u=>{const{x:f,y:h}=u.detail.delta;u.currentTarget.setAttribute("data-swipe","end"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-x"),u.currentTarget.style.removeProperty("--radix-toast-swipe-move-y"),u.currentTarget.style.setProperty("--radix-toast-swipe-end-x",`${f}px`),u.currentTarget.style.setProperty("--radix-toast-swipe-end-y",`${h}px`),a(!1)})})})});ya.displayName=hn;var[Kd,Yd]=fa(hn,{onClose(){}}),Jd=d.forwardRef((t,e)=>{const{__scopeToast:n,type:r="foreground",duration:s,open:o,onClose:i,onEscapeKeyDown:c,onPause:a,onResume:u,onSwipeStart:f,onSwipeMove:h,onSwipeCancel:p,onSwipeEnd:m,...g}=t,w=cr(hn,n),[v,x]=d.useState(null),y=Bt(e,I=>x(I)),b=d.useRef(null),T=d.useRef(null),_=s||w.duration,S=d.useRef(0),R=d.useRef(_),F=d.useRef(0),{onToastAdd:z,onToastRemove:O}=w,$=an(()=>{v?.contains(document.activeElement)&&w.viewport?.focus(),i()}),D=d.useCallback(I=>{!I||I===1/0||(window.clearTimeout(F.current),S.current=new Date().getTime(),F.current=window.setTimeout($,I))},[$]);d.useEffect(()=>{const I=w.viewport;if(I){const H=()=>{D(R.current),u?.()},U=()=>{const V=new Date().getTime()-S.current;R.current=R.current-V,window.clearTimeout(F.current),a?.()};return I.addEventListener(ls,U),I.addEventListener(us,H),()=>{I.removeEventListener(ls,U),I.removeEventListener(us,H)}}},[w.viewport,_,a,u,D]),d.useEffect(()=>{o&&!w.isClosePausedRef.current&&D(_)},[o,_,w.isClosePausedRef,D]),d.useEffect(()=>(z(),()=>O()),[z,O]);const M=d.useMemo(()=>v?_a(v):null,[v]);return w.viewport?l.jsxs(l.Fragment,{children:[M&&l.jsx(Xd,{__scopeToast:n,role:"status","aria-live":r==="foreground"?"assertive":"polite",children:M}),l.jsx(Kd,{scope:n,onClose:$,children:sr.createPortal(l.jsx(Us.ItemSlot,{scope:n,children:l.jsx(_u,{asChild:!0,onEscapeKeyDown:Y(c,()=>{w.isFocusedToastEscapeKeyDownRef.current||$(),w.isFocusedToastEscapeKeyDownRef.current=!1}),children:l.jsx(ae.li,{tabIndex:0,"data-state":o?"open":"closed","data-swipe-direction":w.swipeDirection,...g,ref:y,style:{userSelect:"none",touchAction:"none",...t.style},onKeyDown:Y(t.onKeyDown,I=>{I.key==="Escape"&&(c?.(I.nativeEvent),I.nativeEvent.defaultPrevented||(w.isFocusedToastEscapeKeyDownRef.current=!0,$()))}),onPointerDown:Y(t.onPointerDown,I=>{I.button===0&&(b.current={x:I.clientX,y:I.clientY})}),onPointerMove:Y(t.onPointerMove,I=>{if(!b.current)return;const H=I.clientX-b.current.x,U=I.clientY-b.current.y,V=!!T.current,N=["left","right"].includes(w.swipeDirection),B=["left","up"].includes(w.swipeDirection)?Math.min:Math.max,K=N?B(0,H):0,te=N?0:B(0,U),ke=I.pointerType==="touch"?10:2,L={x:K,y:te},Re={originalEvent:I,delta:L};V?(T.current=L,In(Wd,h,Re,{discrete:!1})):Oo(L,w.swipeDirection,ke)?(T.current=L,In(Bd,f,Re,{discrete:!1}),I.target.setPointerCapture(I.pointerId)):(Math.abs(H)>ke||Math.abs(U)>ke)&&(b.current=null)}),onPointerUp:Y(t.onPointerUp,I=>{const H=T.current,U=I.target;if(U.hasPointerCapture(I.pointerId)&&U.releasePointerCapture(I.pointerId),T.current=null,b.current=null,H){const V=I.currentTarget,N={originalEvent:I,delta:H};Oo(H,w.swipeDirection,w.swipeThreshold)?In(Gd,m,N,{discrete:!0}):In(qd,p,N,{discrete:!0}),V.addEventListener("click",B=>B.preventDefault(),{once:!0})}})})})}),w.viewport)})]}):null}),Xd=t=>{const{__scopeToast:e,children:n,...r}=t,s=cr(hn,e),[o,i]=d.useState(!1),[c,a]=d.useState(!1);return ef(()=>i(!0)),d.useEffect(()=>{const u=window.setTimeout(()=>a(!0),1e3);return()=>window.clearTimeout(u)},[]),c?null:l.jsx(Su,{asChild:!0,children:l.jsx(ar,{...r,children:o&&l.jsxs(l.Fragment,{children:[s.label," ",n]})})})},Qd="ToastTitle",va=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(ae.div,{...r,ref:e})});va.displayName=Qd;var Zd="ToastDescription",wa=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t;return l.jsx(ae.div,{...r,ref:e})});wa.displayName=Zd;var ba="ToastAction",xa=d.forwardRef((t,e)=>{const{altText:n,...r}=t;return n.trim()?l.jsx(Ea,{altText:n,asChild:!0,children:l.jsx(zs,{...r,ref:e})}):(console.error(`Invalid prop \`altText\` supplied to \`${ba}\`. Expected non-empty \`string\`.`),null)});xa.displayName=ba;var Ta="ToastClose",zs=d.forwardRef((t,e)=>{const{__scopeToast:n,...r}=t,s=Yd(Ta,n);return l.jsx(Ea,{asChild:!0,children:l.jsx(ae.button,{type:"button",...r,ref:e,onClick:Y(t.onClick,s.onClose)})})});zs.displayName=Ta;var Ea=d.forwardRef((t,e)=>{const{__scopeToast:n,altText:r,...s}=t;return l.jsx(ae.div,{"data-radix-toast-announce-exclude":"","data-radix-toast-announce-alt":r||void 0,...s,ref:e})});function _a(t){const e=[];return Array.from(t.childNodes).forEach(r=>{if(r.nodeType===r.TEXT_NODE&&r.textContent&&e.push(r.textContent),tf(r)){const s=r.ariaHidden||r.hidden||r.style.display==="none",o=r.dataset.radixToastAnnounceExclude==="";if(!s)if(o){const i=r.dataset.radixToastAnnounceAlt;i&&e.push(i)}else e.push(..._a(r))}}),e}function In(t,e,n,{discrete:r}){const s=n.originalEvent.currentTarget,o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n});e&&s.addEventListener(t,e,{once:!0}),r?Iu(s,o):s.dispatchEvent(o)}var Oo=(t,e,n=0)=>{const r=Math.abs(t.x),s=Math.abs(t.y),o=r>s;return e==="left"||e==="right"?o&&r>n:!o&&s>n};function ef(t=()=>{}){const e=an(t);zn(()=>{let n=0,r=0;return n=window.requestAnimationFrame(()=>r=window.requestAnimationFrame(e)),()=>{window.cancelAnimationFrame(n),window.cancelAnimationFrame(r)}},[e])}function tf(t){return t.nodeType===t.ELEMENT_NODE}function nf(t){const e=[],n=document.createTreeWalker(t,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)e.push(n.currentNode);return e}function Mr(t){const e=document.activeElement;return t.some(n=>n===e?!0:(n.focus(),document.activeElement!==e))}var rf=ha,Sa=ma,Ia=ya,Ca=va,Pa=wa,Aa=xa,ka=zs;function G(...t){return Nu(ft(t))}function sf(t,e=6){if(t===0)return"0";if(t>=1e9){const n=(t/1e9).toFixed(1)+"B";return n.length>e?`${n.slice(0,e-3)}...`:n}else if(t>=1e6){const n=(t/1e6).toFixed(1)+"M";return n.length>e?`${n.slice(0,e-3)}...`:n}else if(t>=1e4){const n=(t/1e3).toFixed(1)+"K";return n.length>e?`${n.slice(0,e-3)}...`:n}else{const n=t.toLocaleString();return n.length>e?`${n.slice(0,e-3)}...`:n}}const of=rf,Ra=d.forwardRef(({className:t,...e},n)=>l.jsx(Sa,{ref:n,className:G("fixed top-16 right-4 z-[100] flex max-h-screen w-full max-w-[280px] sm:max-w-[360px] flex-col gap-2 pointer-events-none sm:top-20",t),...e}));Ra.displayName=Sa.displayName;const af=ir("group pointer-events-auto relative flex w-full items-center justify-between space-x-3 overflow-hidden rounded-xl border p-4 pr-6 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full backdrop-blur-xl",{variants:{variant:{default:"border-orange-500/30 bg-gradient-to-r from-zinc-800/90 to-zinc-900/90 text-white shadow-orange-500/10",destructive:"destructive group border-red-500/30 bg-gradient-to-r from-red-900/80 to-red-800/80 text-red-100 shadow-red-500/10"}},defaultVariants:{variant:"default"}}),Na=d.forwardRef(({className:t,variant:e,...n},r)=>l.jsx(Ia,{ref:r,className:G(af({variant:e}),t),...n}));Na.displayName=Ia.displayName;const cf=d.forwardRef(({className:t,...e},n)=>l.jsx(Aa,{ref:n,className:G("inline-flex h-7 shrink-0 items-center justify-center rounded-md border border-orange-500/30 bg-transparent px-3 text-xs font-medium text-orange-300 transition-colors hover:bg-orange-500/20 hover:text-orange-200 focus:outline-none focus:ring-2 focus:ring-orange-500 focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-red-500/40 group-[.destructive]:hover:border-red-400/30 group-[.destructive]:hover:bg-red-500/20 group-[.destructive]:hover:text-red-100 group-[.destructive]:focus:ring-red-400",t),...e}));cf.displayName=Aa.displayName;const ja=d.forwardRef(({className:t,...e},n)=>l.jsx(ka,{ref:n,className:G("absolute right-2 top-2 rounded-md p-1 text-orange-300/50 opacity-0 transition-opacity hover:text-orange-200 focus:opacity-100 focus:outline-none focus:ring-2 focus:ring-orange-500 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",t),"toast-close":"",...e,children:l.jsx(fn,{className:"h-3 w-3"})}));ja.displayName=ka.displayName;const Oa=d.forwardRef(({className:t,...e},n)=>l.jsx(Ca,{ref:n,className:G("text-sm font-semibold text-orange-200",t),...e}));Oa.displayName=Ca.displayName;const Da=d.forwardRef(({className:t,...e},n)=>l.jsx(Pa,{ref:n,className:G("text-xs text-orange-100/80",t),...e}));Da.displayName=Pa.displayName;function lf(){const{toasts:t}=Fs();return l.jsxs(of,{children:[t.map(function({id:e,title:n,description:r,action:s,...o}){return l.jsxs(Na,{...o,children:[l.jsxs("div",{className:"grid gap-1",children:[n&&l.jsx(Oa,{children:n}),r&&l.jsx(Da,{children:r})]}),s,l.jsx(ja,{})]},e)}),l.jsx(Ra,{})]})}const uf=["top","right","bottom","left"],it=Math.min,re=Math.max,Vn=Math.round,Cn=Math.floor,be=t=>({x:t,y:t}),df={left:"right",right:"left",bottom:"top",top:"bottom"},ff={start:"end",end:"start"};function fs(t,e,n){return re(t,it(e,n))}function $e(t,e){return typeof t=="function"?t(e):t}function Ue(t){return t.split("-")[0]}function Wt(t){return t.split("-")[1]}function Vs(t){return t==="x"?"y":"x"}function Hs(t){return t==="y"?"height":"width"}const hf=new Set(["top","bottom"]);function we(t){return hf.has(Ue(t))?"y":"x"}function Bs(t){return Vs(we(t))}function pf(t,e,n){n===void 0&&(n=!1);const r=Wt(t),s=Bs(t),o=Hs(s);let i=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return e.reference[o]>e.floating[o]&&(i=Hn(i)),[i,Hn(i)]}function mf(t){const e=Hn(t);return[hs(t),e,hs(e)]}function hs(t){return t.replace(/start|end/g,e=>ff[e])}const Do=["left","right"],Lo=["right","left"],gf=["top","bottom"],yf=["bottom","top"];function vf(t,e,n){switch(t){case"top":case"bottom":return n?e?Lo:Do:e?Do:Lo;case"left":case"right":return e?gf:yf;default:return[]}}function wf(t,e,n,r){const s=Wt(t);let o=vf(Ue(t),n==="start",r);return s&&(o=o.map(i=>i+"-"+s),e&&(o=o.concat(o.map(hs)))),o}function Hn(t){return t.replace(/left|right|bottom|top/g,e=>df[e])}function bf(t){return{top:0,right:0,bottom:0,left:0,...t}}function La(t){return typeof t!="number"?bf(t):{top:t,right:t,bottom:t,left:t}}function Bn(t){const{x:e,y:n,width:r,height:s}=t;return{width:r,height:s,top:n,left:e,right:e+r,bottom:n+s,x:e,y:n}}function Mo(t,e,n){let{reference:r,floating:s}=t;const o=we(e),i=Bs(e),c=Hs(i),a=Ue(e),u=o==="y",f=r.x+r.width/2-s.width/2,h=r.y+r.height/2-s.height/2,p=r[c]/2-s[c]/2;let m;switch(a){case"top":m={x:f,y:r.y-s.height};break;case"bottom":m={x:f,y:r.y+r.height};break;case"right":m={x:r.x+r.width,y:h};break;case"left":m={x:r.x-s.width,y:h};break;default:m={x:r.x,y:r.y}}switch(Wt(e)){case"start":m[i]-=p*(n&&u?-1:1);break;case"end":m[i]+=p*(n&&u?-1:1);break}return m}const xf=async(t,e,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:o=[],platform:i}=n,c=o.filter(Boolean),a=await(i.isRTL==null?void 0:i.isRTL(e));let u=await i.getElementRects({reference:t,floating:e,strategy:s}),{x:f,y:h}=Mo(u,r,a),p=r,m={},g=0;for(let w=0;w<c.length;w++){const{name:v,fn:x}=c[w],{x:y,y:b,data:T,reset:_}=await x({x:f,y:h,initialPlacement:r,placement:p,strategy:s,middlewareData:m,rects:u,platform:i,elements:{reference:t,floating:e}});f=y??f,h=b??h,m={...m,[v]:{...m[v],...T}},_&&g<=50&&(g++,typeof _=="object"&&(_.placement&&(p=_.placement),_.rects&&(u=_.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:s}):_.rects),{x:f,y:h}=Mo(u,p,a)),w=-1)}return{x:f,y:h,placement:p,strategy:s,middlewareData:m}};async function cn(t,e){var n;e===void 0&&(e={});const{x:r,y:s,platform:o,rects:i,elements:c,strategy:a}=t,{boundary:u="clippingAncestors",rootBoundary:f="viewport",elementContext:h="floating",altBoundary:p=!1,padding:m=0}=$e(e,t),g=La(m),v=c[p?h==="floating"?"reference":"floating":h],x=Bn(await o.getClippingRect({element:(n=await(o.isElement==null?void 0:o.isElement(v)))==null||n?v:v.contextElement||await(o.getDocumentElement==null?void 0:o.getDocumentElement(c.floating)),boundary:u,rootBoundary:f,strategy:a})),y=h==="floating"?{x:r,y:s,width:i.floating.width,height:i.floating.height}:i.reference,b=await(o.getOffsetParent==null?void 0:o.getOffsetParent(c.floating)),T=await(o.isElement==null?void 0:o.isElement(b))?await(o.getScale==null?void 0:o.getScale(b))||{x:1,y:1}:{x:1,y:1},_=Bn(o.convertOffsetParentRelativeRectToViewportRelativeRect?await o.convertOffsetParentRelativeRectToViewportRelativeRect({elements:c,rect:y,offsetParent:b,strategy:a}):y);return{top:(x.top-_.top+g.top)/T.y,bottom:(_.bottom-x.bottom+g.bottom)/T.y,left:(x.left-_.left+g.left)/T.x,right:(_.right-x.right+g.right)/T.x}}const Tf=t=>({name:"arrow",options:t,async fn(e){const{x:n,y:r,placement:s,rects:o,platform:i,elements:c,middlewareData:a}=e,{element:u,padding:f=0}=$e(t,e)||{};if(u==null)return{};const h=La(f),p={x:n,y:r},m=Bs(s),g=Hs(m),w=await i.getDimensions(u),v=m==="y",x=v?"top":"left",y=v?"bottom":"right",b=v?"clientHeight":"clientWidth",T=o.reference[g]+o.reference[m]-p[m]-o.floating[g],_=p[m]-o.reference[m],S=await(i.getOffsetParent==null?void 0:i.getOffsetParent(u));let R=S?S[b]:0;(!R||!await(i.isElement==null?void 0:i.isElement(S)))&&(R=c.floating[b]||o.floating[g]);const F=T/2-_/2,z=R/2-w[g]/2-1,O=it(h[x],z),$=it(h[y],z),D=O,M=R-w[g]-$,I=R/2-w[g]/2+F,H=fs(D,I,M),U=!a.arrow&&Wt(s)!=null&&I!==H&&o.reference[g]/2-(I<D?O:$)-w[g]/2<0,V=U?I<D?I-D:I-M:0;return{[m]:p[m]+V,data:{[m]:H,centerOffset:I-H-V,...U&&{alignmentOffset:V}},reset:U}}}),Ef=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n,r;const{placement:s,middlewareData:o,rects:i,initialPlacement:c,platform:a,elements:u}=e,{mainAxis:f=!0,crossAxis:h=!0,fallbackPlacements:p,fallbackStrategy:m="bestFit",fallbackAxisSideDirection:g="none",flipAlignment:w=!0,...v}=$e(t,e);if((n=o.arrow)!=null&&n.alignmentOffset)return{};const x=Ue(s),y=we(c),b=Ue(c)===c,T=await(a.isRTL==null?void 0:a.isRTL(u.floating)),_=p||(b||!w?[Hn(c)]:mf(c)),S=g!=="none";!p&&S&&_.push(...wf(c,w,g,T));const R=[c,..._],F=await cn(e,v),z=[];let O=((r=o.flip)==null?void 0:r.overflows)||[];if(f&&z.push(F[x]),h){const I=pf(s,i,T);z.push(F[I[0]],F[I[1]])}if(O=[...O,{placement:s,overflows:z}],!z.every(I=>I<=0)){var $,D;const I=((($=o.flip)==null?void 0:$.index)||0)+1,H=R[I];if(H&&(!(h==="alignment"?y!==we(H):!1)||O.every(N=>we(N.placement)===y?N.overflows[0]>0:!0)))return{data:{index:I,overflows:O},reset:{placement:H}};let U=(D=O.filter(V=>V.overflows[0]<=0).sort((V,N)=>V.overflows[1]-N.overflows[1])[0])==null?void 0:D.placement;if(!U)switch(m){case"bestFit":{var M;const V=(M=O.filter(N=>{if(S){const B=we(N.placement);return B===y||B==="y"}return!0}).map(N=>[N.placement,N.overflows.filter(B=>B>0).reduce((B,K)=>B+K,0)]).sort((N,B)=>N[1]-B[1])[0])==null?void 0:M[0];V&&(U=V);break}case"initialPlacement":U=c;break}if(s!==U)return{reset:{placement:U}}}return{}}}};function Fo(t,e){return{top:t.top-e.height,right:t.right-e.width,bottom:t.bottom-e.height,left:t.left-e.width}}function $o(t){return uf.some(e=>t[e]>=0)}const _f=function(t){return t===void 0&&(t={}),{name:"hide",options:t,async fn(e){const{rects:n}=e,{strategy:r="referenceHidden",...s}=$e(t,e);switch(r){case"referenceHidden":{const o=await cn(e,{...s,elementContext:"reference"}),i=Fo(o,n.reference);return{data:{referenceHiddenOffsets:i,referenceHidden:$o(i)}}}case"escaped":{const o=await cn(e,{...s,altBoundary:!0}),i=Fo(o,n.floating);return{data:{escapedOffsets:i,escaped:$o(i)}}}default:return{}}}}},Ma=new Set(["left","top"]);async function Sf(t,e){const{placement:n,platform:r,elements:s}=t,o=await(r.isRTL==null?void 0:r.isRTL(s.floating)),i=Ue(n),c=Wt(n),a=we(n)==="y",u=Ma.has(i)?-1:1,f=o&&a?-1:1,h=$e(e,t);let{mainAxis:p,crossAxis:m,alignmentAxis:g}=typeof h=="number"?{mainAxis:h,crossAxis:0,alignmentAxis:null}:{mainAxis:h.mainAxis||0,crossAxis:h.crossAxis||0,alignmentAxis:h.alignmentAxis};return c&&typeof g=="number"&&(m=c==="end"?g*-1:g),a?{x:m*f,y:p*u}:{x:p*u,y:m*f}}const If=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){var n,r;const{x:s,y:o,placement:i,middlewareData:c}=e,a=await Sf(e,t);return i===((n=c.offset)==null?void 0:n.placement)&&(r=c.arrow)!=null&&r.alignmentOffset?{}:{x:s+a.x,y:o+a.y,data:{...a,placement:i}}}}},Cf=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:r,placement:s}=e,{mainAxis:o=!0,crossAxis:i=!1,limiter:c={fn:v=>{let{x,y}=v;return{x,y}}},...a}=$e(t,e),u={x:n,y:r},f=await cn(e,a),h=we(Ue(s)),p=Vs(h);let m=u[p],g=u[h];if(o){const v=p==="y"?"top":"left",x=p==="y"?"bottom":"right",y=m+f[v],b=m-f[x];m=fs(y,m,b)}if(i){const v=h==="y"?"top":"left",x=h==="y"?"bottom":"right",y=g+f[v],b=g-f[x];g=fs(y,g,b)}const w=c.fn({...e,[p]:m,[h]:g});return{...w,data:{x:w.x-n,y:w.y-r,enabled:{[p]:o,[h]:i}}}}}},Pf=function(t){return t===void 0&&(t={}),{options:t,fn(e){const{x:n,y:r,placement:s,rects:o,middlewareData:i}=e,{offset:c=0,mainAxis:a=!0,crossAxis:u=!0}=$e(t,e),f={x:n,y:r},h=we(s),p=Vs(h);let m=f[p],g=f[h];const w=$e(c,e),v=typeof w=="number"?{mainAxis:w,crossAxis:0}:{mainAxis:0,crossAxis:0,...w};if(a){const b=p==="y"?"height":"width",T=o.reference[p]-o.floating[b]+v.mainAxis,_=o.reference[p]+o.reference[b]-v.mainAxis;m<T?m=T:m>_&&(m=_)}if(u){var x,y;const b=p==="y"?"width":"height",T=Ma.has(Ue(s)),_=o.reference[h]-o.floating[b]+(T&&((x=i.offset)==null?void 0:x[h])||0)+(T?0:v.crossAxis),S=o.reference[h]+o.reference[b]+(T?0:((y=i.offset)==null?void 0:y[h])||0)-(T?v.crossAxis:0);g<_?g=_:g>S&&(g=S)}return{[p]:m,[h]:g}}}},Af=function(t){return t===void 0&&(t={}),{name:"size",options:t,async fn(e){var n,r;const{placement:s,rects:o,platform:i,elements:c}=e,{apply:a=()=>{},...u}=$e(t,e),f=await cn(e,u),h=Ue(s),p=Wt(s),m=we(s)==="y",{width:g,height:w}=o.floating;let v,x;h==="top"||h==="bottom"?(v=h,x=p===(await(i.isRTL==null?void 0:i.isRTL(c.floating))?"start":"end")?"left":"right"):(x=h,v=p==="end"?"top":"bottom");const y=w-f.top-f.bottom,b=g-f.left-f.right,T=it(w-f[v],y),_=it(g-f[x],b),S=!e.middlewareData.shift;let R=T,F=_;if((n=e.middlewareData.shift)!=null&&n.enabled.x&&(F=b),(r=e.middlewareData.shift)!=null&&r.enabled.y&&(R=y),S&&!p){const O=re(f.left,0),$=re(f.right,0),D=re(f.top,0),M=re(f.bottom,0);m?F=g-2*(O!==0||$!==0?O+$:re(f.left,f.right)):R=w-2*(D!==0||M!==0?D+M:re(f.top,f.bottom))}await a({...e,availableWidth:F,availableHeight:R});const z=await i.getDimensions(c.floating);return g!==z.width||w!==z.height?{reset:{rects:!0}}:{}}}};function lr(){return typeof window<"u"}function qt(t){return Fa(t)?(t.nodeName||"").toLowerCase():"#document"}function oe(t){var e;return(t==null||(e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Ce(t){var e;return(e=(Fa(t)?t.ownerDocument:t.document)||window.document)==null?void 0:e.documentElement}function Fa(t){return lr()?t instanceof Node||t instanceof oe(t).Node:!1}function me(t){return lr()?t instanceof Element||t instanceof oe(t).Element:!1}function _e(t){return lr()?t instanceof HTMLElement||t instanceof oe(t).HTMLElement:!1}function Uo(t){return!lr()||typeof ShadowRoot>"u"?!1:t instanceof ShadowRoot||t instanceof oe(t).ShadowRoot}const kf=new Set(["inline","contents"]);function pn(t){const{overflow:e,overflowX:n,overflowY:r,display:s}=ge(t);return/auto|scroll|overlay|hidden|clip/.test(e+r+n)&&!kf.has(s)}const Rf=new Set(["table","td","th"]);function Nf(t){return Rf.has(qt(t))}const jf=[":popover-open",":modal"];function ur(t){return jf.some(e=>{try{return t.matches(e)}catch{return!1}})}const Of=["transform","translate","scale","rotate","perspective"],Df=["transform","translate","scale","rotate","perspective","filter"],Lf=["paint","layout","strict","content"];function Ws(t){const e=qs(),n=me(t)?ge(t):t;return Of.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!e&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!e&&(n.filter?n.filter!=="none":!1)||Df.some(r=>(n.willChange||"").includes(r))||Lf.some(r=>(n.contain||"").includes(r))}function Mf(t){let e=at(t);for(;_e(e)&&!zt(e);){if(Ws(e))return e;if(ur(e))return null;e=at(e)}return null}function qs(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const Ff=new Set(["html","body","#document"]);function zt(t){return Ff.has(qt(t))}function ge(t){return oe(t).getComputedStyle(t)}function dr(t){return me(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.scrollX,scrollTop:t.scrollY}}function at(t){if(qt(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Uo(t)&&t.host||Ce(t);return Uo(e)?e.host:e}function $a(t){const e=at(t);return zt(e)?t.ownerDocument?t.ownerDocument.body:t.body:_e(e)&&pn(e)?e:$a(e)}function ln(t,e,n){var r;e===void 0&&(e=[]),n===void 0&&(n=!0);const s=$a(t),o=s===((r=t.ownerDocument)==null?void 0:r.body),i=oe(s);if(o){const c=ps(i);return e.concat(i,i.visualViewport||[],pn(s)?s:[],c&&n?ln(c):[])}return e.concat(s,ln(s,[],n))}function ps(t){return t.parent&&Object.getPrototypeOf(t.parent)?t.frameElement:null}function Ua(t){const e=ge(t);let n=parseFloat(e.width)||0,r=parseFloat(e.height)||0;const s=_e(t),o=s?t.offsetWidth:n,i=s?t.offsetHeight:r,c=Vn(n)!==o||Vn(r)!==i;return c&&(n=o,r=i),{width:n,height:r,$:c}}function Gs(t){return me(t)?t:t.contextElement}function Mt(t){const e=Gs(t);if(!_e(e))return be(1);const n=e.getBoundingClientRect(),{width:r,height:s,$:o}=Ua(e);let i=(o?Vn(n.width):n.width)/r,c=(o?Vn(n.height):n.height)/s;return(!i||!Number.isFinite(i))&&(i=1),(!c||!Number.isFinite(c))&&(c=1),{x:i,y:c}}const $f=be(0);function za(t){const e=oe(t);return!qs()||!e.visualViewport?$f:{x:e.visualViewport.offsetLeft,y:e.visualViewport.offsetTop}}function Uf(t,e,n){return e===void 0&&(e=!1),!n||e&&n!==oe(t)?!1:e}function _t(t,e,n,r){e===void 0&&(e=!1),n===void 0&&(n=!1);const s=t.getBoundingClientRect(),o=Gs(t);let i=be(1);e&&(r?me(r)&&(i=Mt(r)):i=Mt(t));const c=Uf(o,n,r)?za(o):be(0);let a=(s.left+c.x)/i.x,u=(s.top+c.y)/i.y,f=s.width/i.x,h=s.height/i.y;if(o){const p=oe(o),m=r&&me(r)?oe(r):r;let g=p,w=ps(g);for(;w&&r&&m!==g;){const v=Mt(w),x=w.getBoundingClientRect(),y=ge(w),b=x.left+(w.clientLeft+parseFloat(y.paddingLeft))*v.x,T=x.top+(w.clientTop+parseFloat(y.paddingTop))*v.y;a*=v.x,u*=v.y,f*=v.x,h*=v.y,a+=b,u+=T,g=oe(w),w=ps(g)}}return Bn({width:f,height:h,x:a,y:u})}function fr(t,e){const n=dr(t).scrollLeft;return e?e.left+n:_t(Ce(t)).left+n}function Va(t,e){const n=t.getBoundingClientRect(),r=n.left+e.scrollLeft-fr(t,n),s=n.top+e.scrollTop;return{x:r,y:s}}function zf(t){let{elements:e,rect:n,offsetParent:r,strategy:s}=t;const o=s==="fixed",i=Ce(r),c=e?ur(e.floating):!1;if(r===i||c&&o)return n;let a={scrollLeft:0,scrollTop:0},u=be(1);const f=be(0),h=_e(r);if((h||!h&&!o)&&((qt(r)!=="body"||pn(i))&&(a=dr(r)),_e(r))){const m=_t(r);u=Mt(r),f.x=m.x+r.clientLeft,f.y=m.y+r.clientTop}const p=i&&!h&&!o?Va(i,a):be(0);return{width:n.width*u.x,height:n.height*u.y,x:n.x*u.x-a.scrollLeft*u.x+f.x+p.x,y:n.y*u.y-a.scrollTop*u.y+f.y+p.y}}function Vf(t){return Array.from(t.getClientRects())}function Hf(t){const e=Ce(t),n=dr(t),r=t.ownerDocument.body,s=re(e.scrollWidth,e.clientWidth,r.scrollWidth,r.clientWidth),o=re(e.scrollHeight,e.clientHeight,r.scrollHeight,r.clientHeight);let i=-n.scrollLeft+fr(t);const c=-n.scrollTop;return ge(r).direction==="rtl"&&(i+=re(e.clientWidth,r.clientWidth)-s),{width:s,height:o,x:i,y:c}}const zo=25;function Bf(t,e){const n=oe(t),r=Ce(t),s=n.visualViewport;let o=r.clientWidth,i=r.clientHeight,c=0,a=0;if(s){o=s.width,i=s.height;const f=qs();(!f||f&&e==="fixed")&&(c=s.offsetLeft,a=s.offsetTop)}const u=fr(r);if(u<=0){const f=r.ownerDocument,h=f.body,p=getComputedStyle(h),m=f.compatMode==="CSS1Compat"&&parseFloat(p.marginLeft)+parseFloat(p.marginRight)||0,g=Math.abs(r.clientWidth-h.clientWidth-m);g<=zo&&(o-=g)}else u<=zo&&(o+=u);return{width:o,height:i,x:c,y:a}}const Wf=new Set(["absolute","fixed"]);function qf(t,e){const n=_t(t,!0,e==="fixed"),r=n.top+t.clientTop,s=n.left+t.clientLeft,o=_e(t)?Mt(t):be(1),i=t.clientWidth*o.x,c=t.clientHeight*o.y,a=s*o.x,u=r*o.y;return{width:i,height:c,x:a,y:u}}function Vo(t,e,n){let r;if(e==="viewport")r=Bf(t,n);else if(e==="document")r=Hf(Ce(t));else if(me(e))r=qf(e,n);else{const s=za(t);r={x:e.x-s.x,y:e.y-s.y,width:e.width,height:e.height}}return Bn(r)}function Ha(t,e){const n=at(t);return n===e||!me(n)||zt(n)?!1:ge(n).position==="fixed"||Ha(n,e)}function Gf(t,e){const n=e.get(t);if(n)return n;let r=ln(t,[],!1).filter(c=>me(c)&&qt(c)!=="body"),s=null;const o=ge(t).position==="fixed";let i=o?at(t):t;for(;me(i)&&!zt(i);){const c=ge(i),a=Ws(i);!a&&c.position==="fixed"&&(s=null),(o?!a&&!s:!a&&c.position==="static"&&!!s&&Wf.has(s.position)||pn(i)&&!a&&Ha(t,i))?r=r.filter(f=>f!==i):s=c,i=at(i)}return e.set(t,r),r}function Kf(t){let{element:e,boundary:n,rootBoundary:r,strategy:s}=t;const i=[...n==="clippingAncestors"?ur(e)?[]:Gf(e,this._c):[].concat(n),r],c=i[0],a=i.reduce((u,f)=>{const h=Vo(e,f,s);return u.top=re(h.top,u.top),u.right=it(h.right,u.right),u.bottom=it(h.bottom,u.bottom),u.left=re(h.left,u.left),u},Vo(e,c,s));return{width:a.right-a.left,height:a.bottom-a.top,x:a.left,y:a.top}}function Yf(t){const{width:e,height:n}=Ua(t);return{width:e,height:n}}function Jf(t,e,n){const r=_e(e),s=Ce(e),o=n==="fixed",i=_t(t,!0,o,e);let c={scrollLeft:0,scrollTop:0};const a=be(0);function u(){a.x=fr(s)}if(r||!r&&!o)if((qt(e)!=="body"||pn(s))&&(c=dr(e)),r){const m=_t(e,!0,o,e);a.x=m.x+e.clientLeft,a.y=m.y+e.clientTop}else s&&u();o&&!r&&s&&u();const f=s&&!r&&!o?Va(s,c):be(0),h=i.left+c.scrollLeft-a.x-f.x,p=i.top+c.scrollTop-a.y-f.y;return{x:h,y:p,width:i.width,height:i.height}}function Fr(t){return ge(t).position==="static"}function Ho(t,e){if(!_e(t)||ge(t).position==="fixed")return null;if(e)return e(t);let n=t.offsetParent;return Ce(t)===n&&(n=n.ownerDocument.body),n}function Ba(t,e){const n=oe(t);if(ur(t))return n;if(!_e(t)){let s=at(t);for(;s&&!zt(s);){if(me(s)&&!Fr(s))return s;s=at(s)}return n}let r=Ho(t,e);for(;r&&Nf(r)&&Fr(r);)r=Ho(r,e);return r&&zt(r)&&Fr(r)&&!Ws(r)?n:r||Mf(t)||n}const Xf=async function(t){const e=this.getOffsetParent||Ba,n=this.getDimensions,r=await n(t.floating);return{reference:Jf(t.reference,await e(t.floating),t.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Qf(t){return ge(t).direction==="rtl"}const Zf={convertOffsetParentRelativeRectToViewportRelativeRect:zf,getDocumentElement:Ce,getClippingRect:Kf,getOffsetParent:Ba,getElementRects:Xf,getClientRects:Vf,getDimensions:Yf,getScale:Mt,isElement:me,isRTL:Qf};function Wa(t,e){return t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height}function eh(t,e){let n=null,r;const s=Ce(t);function o(){var c;clearTimeout(r),(c=n)==null||c.disconnect(),n=null}function i(c,a){c===void 0&&(c=!1),a===void 0&&(a=1),o();const u=t.getBoundingClientRect(),{left:f,top:h,width:p,height:m}=u;if(c||e(),!p||!m)return;const g=Cn(h),w=Cn(s.clientWidth-(f+p)),v=Cn(s.clientHeight-(h+m)),x=Cn(f),b={rootMargin:-g+"px "+-w+"px "+-v+"px "+-x+"px",threshold:re(0,it(1,a))||1};let T=!0;function _(S){const R=S[0].intersectionRatio;if(R!==a){if(!T)return i();R?i(!1,R):r=setTimeout(()=>{i(!1,1e-7)},1e3)}R===1&&!Wa(u,t.getBoundingClientRect())&&i(),T=!1}try{n=new IntersectionObserver(_,{...b,root:s.ownerDocument})}catch{n=new IntersectionObserver(_,b)}n.observe(t)}return i(!0),o}function th(t,e,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:o=!0,elementResize:i=typeof ResizeObserver=="function",layoutShift:c=typeof IntersectionObserver=="function",animationFrame:a=!1}=r,u=Gs(t),f=s||o?[...u?ln(u):[],...ln(e)]:[];f.forEach(x=>{s&&x.addEventListener("scroll",n,{passive:!0}),o&&x.addEventListener("resize",n)});const h=u&&c?eh(u,n):null;let p=-1,m=null;i&&(m=new ResizeObserver(x=>{let[y]=x;y&&y.target===u&&m&&(m.unobserve(e),cancelAnimationFrame(p),p=requestAnimationFrame(()=>{var b;(b=m)==null||b.observe(e)})),n()}),u&&!a&&m.observe(u),m.observe(e));let g,w=a?_t(t):null;a&&v();function v(){const x=_t(t);w&&!Wa(w,x)&&n(),w=x,g=requestAnimationFrame(v)}return n(),()=>{var x;f.forEach(y=>{s&&y.removeEventListener("scroll",n),o&&y.removeEventListener("resize",n)}),h?.(),(x=m)==null||x.disconnect(),m=null,a&&cancelAnimationFrame(g)}}const nh=If,rh=Cf,sh=Ef,oh=Af,ih=_f,Bo=Tf,ah=Pf,ch=(t,e,n)=>{const r=new Map,s={platform:Zf,...n},o={...s.platform,_c:r};return xf(t,e,{...s,platform:o})};var lh=typeof document<"u",uh=function(){},Ln=lh?d.useLayoutEffect:uh;function Wn(t,e){if(t===e)return!0;if(typeof t!=typeof e)return!1;if(typeof t=="function"&&t.toString()===e.toString())return!0;let n,r,s;if(t&&e&&typeof t=="object"){if(Array.isArray(t)){if(n=t.length,n!==e.length)return!1;for(r=n;r--!==0;)if(!Wn(t[r],e[r]))return!1;return!0}if(s=Object.keys(t),n=s.length,n!==Object.keys(e).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(e,s[r]))return!1;for(r=n;r--!==0;){const o=s[r];if(!(o==="_owner"&&t.$$typeof)&&!Wn(t[o],e[o]))return!1}return!0}return t!==t&&e!==e}function qa(t){return typeof window>"u"?1:(t.ownerDocument.defaultView||window).devicePixelRatio||1}function Wo(t,e){const n=qa(t);return Math.round(e*n)/n}function $r(t){const e=d.useRef(t);return Ln(()=>{e.current=t}),e}function dh(t){t===void 0&&(t={});const{placement:e="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:o,floating:i}={},transform:c=!0,whileElementsMounted:a,open:u}=t,[f,h]=d.useState({x:0,y:0,strategy:n,placement:e,middlewareData:{},isPositioned:!1}),[p,m]=d.useState(r);Wn(p,r)||m(r);const[g,w]=d.useState(null),[v,x]=d.useState(null),y=d.useCallback(N=>{N!==S.current&&(S.current=N,w(N))},[]),b=d.useCallback(N=>{N!==R.current&&(R.current=N,x(N))},[]),T=o||g,_=i||v,S=d.useRef(null),R=d.useRef(null),F=d.useRef(f),z=a!=null,O=$r(a),$=$r(s),D=$r(u),M=d.useCallback(()=>{if(!S.current||!R.current)return;const N={placement:e,strategy:n,middleware:p};$.current&&(N.platform=$.current),ch(S.current,R.current,N).then(B=>{const K={...B,isPositioned:D.current!==!1};I.current&&!Wn(F.current,K)&&(F.current=K,sr.flushSync(()=>{h(K)}))})},[p,e,n,$,D]);Ln(()=>{u===!1&&F.current.isPositioned&&(F.current.isPositioned=!1,h(N=>({...N,isPositioned:!1})))},[u]);const I=d.useRef(!1);Ln(()=>(I.current=!0,()=>{I.current=!1}),[]),Ln(()=>{if(T&&(S.current=T),_&&(R.current=_),T&&_){if(O.current)return O.current(T,_,M);M()}},[T,_,M,O,z]);const H=d.useMemo(()=>({reference:S,floating:R,setReference:y,setFloating:b}),[y,b]),U=d.useMemo(()=>({reference:T,floating:_}),[T,_]),V=d.useMemo(()=>{const N={position:n,left:0,top:0};if(!U.floating)return N;const B=Wo(U.floating,f.x),K=Wo(U.floating,f.y);return c?{...N,transform:"translate("+B+"px, "+K+"px)",...qa(U.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:B,top:K}},[n,c,U.floating,f.x,f.y]);return d.useMemo(()=>({...f,update:M,refs:H,elements:U,floatingStyles:V}),[f,M,H,U,V])}const fh=t=>{function e(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:t,fn(n){const{element:r,padding:s}=typeof t=="function"?t(n):t;return r&&e(r)?r.current!=null?Bo({element:r.current,padding:s}).fn(n):{}:r?Bo({element:r,padding:s}).fn(n):{}}}},hh=(t,e)=>({...nh(t),options:[t,e]}),ph=(t,e)=>({...rh(t),options:[t,e]}),mh=(t,e)=>({...ah(t),options:[t,e]}),gh=(t,e)=>({...sh(t),options:[t,e]}),yh=(t,e)=>({...oh(t),options:[t,e]}),vh=(t,e)=>({...ih(t),options:[t,e]}),wh=(t,e)=>({...fh(t),options:[t,e]});var bh="Arrow",Ga=d.forwardRef((t,e)=>{const{children:n,width:r=10,height:s=5,...o}=t;return l.jsx(ae.svg,{...o,ref:e,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:t.asChild?n:l.jsx("polygon",{points:"0,0 30,0 15,10"})})});Ga.displayName=bh;var xh=Ga;function Th(t){const[e,n]=d.useState(void 0);return zn(()=>{if(t){n({width:t.offsetWidth,height:t.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const o=s[0];let i,c;if("borderBoxSize"in o){const a=o.borderBoxSize,u=Array.isArray(a)?a[0]:a;i=u.inlineSize,c=u.blockSize}else i=t.offsetWidth,c=t.offsetHeight;n({width:i,height:c})});return r.observe(t,{box:"border-box"}),()=>r.unobserve(t)}else n(void 0)},[t]),e}var Ks="Popper",[Ka,Ya]=Rs(Ks),[Eh,Ja]=Ka(Ks),Xa=t=>{const{__scopePopper:e,children:n}=t,[r,s]=d.useState(null);return l.jsx(Eh,{scope:e,anchor:r,onAnchorChange:s,children:n})};Xa.displayName=Ks;var Qa="PopperAnchor",Za=d.forwardRef((t,e)=>{const{__scopePopper:n,virtualRef:r,...s}=t,o=Ja(Qa,n),i=d.useRef(null),c=Bt(e,i),a=d.useRef(null);return d.useEffect(()=>{const u=a.current;a.current=r?.current||i.current,u!==a.current&&o.onAnchorChange(a.current)}),r?null:l.jsx(ae.div,{...s,ref:c})});Za.displayName=Qa;var Ys="PopperContent",[_h,Sh]=Ka(Ys),ec=d.forwardRef((t,e)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:o="center",alignOffset:i=0,arrowPadding:c=0,avoidCollisions:a=!0,collisionBoundary:u=[],collisionPadding:f=0,sticky:h="partial",hideWhenDetached:p=!1,updatePositionStrategy:m="optimized",onPlaced:g,...w}=t,v=Ja(Ys,n),[x,y]=d.useState(null),b=Bt(e,Ne=>y(Ne)),[T,_]=d.useState(null),S=Th(T),R=S?.width??0,F=S?.height??0,z=r+(o!=="center"?"-"+o:""),O=typeof f=="number"?f:{top:0,right:0,bottom:0,left:0,...f},$=Array.isArray(u)?u:[u],D=$.length>0,M={padding:O,boundary:$.filter(Ch),altBoundary:D},{refs:I,floatingStyles:H,placement:U,isPositioned:V,middlewareData:N}=dh({strategy:"fixed",placement:z,whileElementsMounted:(...Ne)=>th(...Ne,{animationFrame:m==="always"}),elements:{reference:v.anchor},middleware:[hh({mainAxis:s+F,alignmentAxis:i}),a&&ph({mainAxis:!0,crossAxis:!1,limiter:h==="partial"?mh():void 0,...M}),a&&gh({...M}),yh({...M,apply:({elements:Ne,rects:ut,availableWidth:dt,availableHeight:gu})=>{const{width:yu,height:vu}=ut.reference,_n=Ne.floating.style;_n.setProperty("--radix-popper-available-width",`${dt}px`),_n.setProperty("--radix-popper-available-height",`${gu}px`),_n.setProperty("--radix-popper-anchor-width",`${yu}px`),_n.setProperty("--radix-popper-anchor-height",`${vu}px`)}}),T&&wh({element:T,padding:c}),Ph({arrowWidth:R,arrowHeight:F}),p&&vh({strategy:"referenceHidden",...M})]}),[B,K]=rc(U),te=an(g);zn(()=>{V&&te?.()},[V,te]);const ke=N.arrow?.x,L=N.arrow?.y,Re=N.arrow?.centerOffset!==0,[lt,kr]=d.useState();return zn(()=>{x&&kr(window.getComputedStyle(x).zIndex)},[x]),l.jsx("div",{ref:I.setFloating,"data-radix-popper-content-wrapper":"",style:{...H,transform:V?H.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:lt,"--radix-popper-transform-origin":[N.transformOrigin?.x,N.transformOrigin?.y].join(" "),...N.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:t.dir,children:l.jsx(_h,{scope:n,placedSide:B,onArrowChange:_,arrowX:ke,arrowY:L,shouldHideArrow:Re,children:l.jsx(ae.div,{"data-side":B,"data-align":K,...w,ref:b,style:{...w.style,animation:V?void 0:"none"}})})})});ec.displayName=Ys;var tc="PopperArrow",Ih={top:"bottom",right:"left",bottom:"top",left:"right"},nc=d.forwardRef(function(e,n){const{__scopePopper:r,...s}=e,o=Sh(tc,r),i=Ih[o.placedSide];return l.jsx("span",{ref:o.onArrowChange,style:{position:"absolute",left:o.arrowX,top:o.arrowY,[i]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[o.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[o.placedSide],visibility:o.shouldHideArrow?"hidden":void 0},children:l.jsx(xh,{...s,ref:n,style:{...s.style,display:"block"}})})});nc.displayName=tc;function Ch(t){return t!==null}var Ph=t=>({name:"transformOrigin",options:t,fn(e){const{placement:n,rects:r,middlewareData:s}=e,i=s.arrow?.centerOffset!==0,c=i?0:t.arrowWidth,a=i?0:t.arrowHeight,[u,f]=rc(n),h={start:"0%",center:"50%",end:"100%"}[f],p=(s.arrow?.x??0)+c/2,m=(s.arrow?.y??0)+a/2;let g="",w="";return u==="bottom"?(g=i?h:`${p}px`,w=`${-a}px`):u==="top"?(g=i?h:`${p}px`,w=`${r.floating.height+a}px`):u==="right"?(g=`${-a}px`,w=i?h:`${m}px`):u==="left"&&(g=`${r.floating.width+a}px`,w=i?h:`${m}px`),{data:{x:g,y:w}}}});function rc(t){const[e,n="center"]=t.split("-");return[e,n]}var Wx=Xa,Ah=Za,kh=ec,Rh=nc,[hr,qx]=Rs("Tooltip",[Ya]),Js=Ya(),sc="TooltipProvider",Nh=700,qo="tooltip.open",[jh,oc]=hr(sc),ic=t=>{const{__scopeTooltip:e,delayDuration:n=Nh,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:o}=t,i=d.useRef(!0),c=d.useRef(!1),a=d.useRef(0);return d.useEffect(()=>{const u=a.current;return()=>window.clearTimeout(u)},[]),l.jsx(jh,{scope:e,isOpenDelayedRef:i,delayDuration:n,onOpen:d.useCallback(()=>{window.clearTimeout(a.current),i.current=!1},[]),onClose:d.useCallback(()=>{window.clearTimeout(a.current),a.current=window.setTimeout(()=>i.current=!0,r)},[r]),isPointerInTransitRef:c,onPointerInTransitChange:d.useCallback(u=>{c.current=u},[]),disableHoverableContent:s,children:o})};ic.displayName=sc;var ac="Tooltip",[Gx,pr]=hr(ac),ms="TooltipTrigger",Oh=d.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=pr(ms,n),o=oc(ms,n),i=Js(n),c=d.useRef(null),a=Bt(e,c,s.onTriggerChange),u=d.useRef(!1),f=d.useRef(!1),h=d.useCallback(()=>u.current=!1,[]);return d.useEffect(()=>()=>document.removeEventListener("pointerup",h),[h]),l.jsx(Ah,{asChild:!0,...i,children:l.jsx(ae.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:a,onPointerMove:Y(t.onPointerMove,p=>{p.pointerType!=="touch"&&!f.current&&!o.isPointerInTransitRef.current&&(s.onTriggerEnter(),f.current=!0)}),onPointerLeave:Y(t.onPointerLeave,()=>{s.onTriggerLeave(),f.current=!1}),onPointerDown:Y(t.onPointerDown,()=>{s.open&&s.onClose(),u.current=!0,document.addEventListener("pointerup",h,{once:!0})}),onFocus:Y(t.onFocus,()=>{u.current||s.onOpen()}),onBlur:Y(t.onBlur,s.onClose),onClick:Y(t.onClick,s.onClose)})})});Oh.displayName=ms;var Dh="TooltipPortal",[Kx,Lh]=hr(Dh,{forceMount:void 0}),Vt="TooltipContent",cc=d.forwardRef((t,e)=>{const n=Lh(Vt,t.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...o}=t,i=pr(Vt,t.__scopeTooltip);return l.jsx(Xi,{present:r||i.open,children:i.disableHoverableContent?l.jsx(lc,{side:s,...o,ref:e}):l.jsx(Mh,{side:s,...o,ref:e})})}),Mh=d.forwardRef((t,e)=>{const n=pr(Vt,t.__scopeTooltip),r=oc(Vt,t.__scopeTooltip),s=d.useRef(null),o=Bt(e,s),[i,c]=d.useState(null),{trigger:a,onClose:u}=n,f=s.current,{onPointerInTransitChange:h}=r,p=d.useCallback(()=>{c(null),h(!1)},[h]),m=d.useCallback((g,w)=>{const v=g.currentTarget,x={x:g.clientX,y:g.clientY},y=Vh(x,v.getBoundingClientRect()),b=Hh(x,y),T=Bh(w.getBoundingClientRect()),_=qh([...b,...T]);c(_),h(!0)},[h]);return d.useEffect(()=>()=>p(),[p]),d.useEffect(()=>{if(a&&f){const g=v=>m(v,f),w=v=>m(v,a);return a.addEventListener("pointerleave",g),f.addEventListener("pointerleave",w),()=>{a.removeEventListener("pointerleave",g),f.removeEventListener("pointerleave",w)}}},[a,f,m,p]),d.useEffect(()=>{if(i){const g=w=>{const v=w.target,x={x:w.clientX,y:w.clientY},y=a?.contains(v)||f?.contains(v),b=!Wh(x,i);y?p():b&&(p(),u())};return document.addEventListener("pointermove",g),()=>document.removeEventListener("pointermove",g)}},[a,f,i,u,p]),l.jsx(lc,{...t,ref:o})}),[Fh,$h]=hr(ac,{isInside:!1}),Uh=Pu("TooltipContent"),lc=d.forwardRef((t,e)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:o,onPointerDownOutside:i,...c}=t,a=pr(Vt,n),u=Js(n),{onClose:f}=a;return d.useEffect(()=>(document.addEventListener(qo,f),()=>document.removeEventListener(qo,f)),[f]),d.useEffect(()=>{if(a.trigger){const h=p=>{p.target?.contains(a.trigger)&&f()};return window.addEventListener("scroll",h,{capture:!0}),()=>window.removeEventListener("scroll",h,{capture:!0})}},[a.trigger,f]),l.jsx(Cu,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:o,onPointerDownOutside:i,onFocusOutside:h=>h.preventDefault(),onDismiss:f,children:l.jsxs(kh,{"data-state":a.stateAttribute,...u,...c,ref:e,style:{...c.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[l.jsx(Uh,{children:r}),l.jsx(Fh,{scope:n,isInside:!0,children:l.jsx($d,{id:a.contentId,role:"tooltip",children:s||r})})]})})});cc.displayName=Vt;var uc="TooltipArrow",zh=d.forwardRef((t,e)=>{const{__scopeTooltip:n,...r}=t,s=Js(n);return $h(uc,n).isInside?null:l.jsx(Rh,{...s,...r,ref:e})});zh.displayName=uc;function Vh(t,e){const n=Math.abs(e.top-t.y),r=Math.abs(e.bottom-t.y),s=Math.abs(e.right-t.x),o=Math.abs(e.left-t.x);switch(Math.min(n,r,s,o)){case o:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function Hh(t,e,n=5){const r=[];switch(e){case"top":r.push({x:t.x-n,y:t.y+n},{x:t.x+n,y:t.y+n});break;case"bottom":r.push({x:t.x-n,y:t.y-n},{x:t.x+n,y:t.y-n});break;case"left":r.push({x:t.x+n,y:t.y-n},{x:t.x+n,y:t.y+n});break;case"right":r.push({x:t.x-n,y:t.y-n},{x:t.x-n,y:t.y+n});break}return r}function Bh(t){const{top:e,right:n,bottom:r,left:s}=t;return[{x:s,y:e},{x:n,y:e},{x:n,y:r},{x:s,y:r}]}function Wh(t,e){const{x:n,y:r}=t;let s=!1;for(let o=0,i=e.length-1;o<e.length;i=o++){const c=e[o],a=e[i],u=c.x,f=c.y,h=a.x,p=a.y;f>r!=p>r&&n<(h-u)*(r-f)/(p-f)+u&&(s=!s)}return s}function qh(t){const e=t.slice();return e.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),Gh(e)}function Gh(t){if(t.length<=1)return t.slice();const e=[];for(let r=0;r<t.length;r++){const s=t[r];for(;e.length>=2;){const o=e[e.length-1],i=e[e.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))e.pop();else break}e.push(s)}e.pop();const n=[];for(let r=t.length-1;r>=0;r--){const s=t[r];for(;n.length>=2;){const o=n[n.length-1],i=n[n.length-2];if((o.x-i.x)*(s.y-i.y)>=(o.y-i.y)*(s.x-i.x))n.pop();else break}n.push(s)}return n.pop(),e.length===1&&n.length===1&&e[0].x===n[0].x&&e[0].y===n[0].y?e:e.concat(n)}var Kh=ic,dc=cc;const Yh=Kh,Jh=d.forwardRef(({className:t,sideOffset:e=4,...n},r)=>l.jsx(dc,{ref:r,sideOffset:e,className:G("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]",t),...n}));Jh.displayName=dc.displayName;const Xh="modulepreload",Qh=function(t){return"/"+t},Go={},k=function(e,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const i=document.querySelector("meta[property=csp-nonce]"),c=i?.nonce||i?.getAttribute("nonce");s=Promise.allSettled(n.map(a=>{if(a=Qh(a),a in Go)return;Go[a]=!0;const u=a.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${f}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":Xh,u||(h.as="script"),h.crossOrigin="",h.href=a,c&&h.setAttribute("nonce",c),document.head.appendChild(h),u)return new Promise((p,m)=>{h.addEventListener("load",p),h.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})}))}function o(i){const c=new Event("vite:preloadError",{cancelable:!0});if(c.payload=i,window.dispatchEvent(c),!c.defaultPrevented)throw i}return s.then(i=>{for(const c of i||[])c.status==="rejected"&&o(c.reason);return e().catch(o)})},Zh=()=>{};var Ko={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fc=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let s=t.charCodeAt(r);s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128)}return e},ep=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const s=t[n++];if(s<128)e[r++]=String.fromCharCode(s);else if(s>191&&s<224){const o=t[n++];e[r++]=String.fromCharCode((s&31)<<6|o&63)}else if(s>239&&s<365){const o=t[n++],i=t[n++],c=t[n++],a=((s&7)<<18|(o&63)<<12|(i&63)<<6|c&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const o=t[n++],i=t[n++];e[r++]=String.fromCharCode((s&15)<<12|(o&63)<<6|i&63)}}return e.join("")},hc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<t.length;s+=3){const o=t[s],i=s+1<t.length,c=i?t[s+1]:0,a=s+2<t.length,u=a?t[s+2]:0,f=o>>2,h=(o&3)<<4|c>>4;let p=(c&15)<<2|u>>6,m=u&63;a||(m=64,i||(p=64)),r.push(n[f],n[h],n[p],n[m])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(fc(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ep(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<t.length;){const o=n[t.charAt(s++)],c=s<t.length?n[t.charAt(s)]:0;++s;const u=s<t.length?n[t.charAt(s)]:64;++s;const h=s<t.length?n[t.charAt(s)]:64;if(++s,o==null||c==null||u==null||h==null)throw new tp;const p=o<<2|c>>4;if(r.push(p),u!==64){const m=c<<4&240|u>>2;if(r.push(m),h!==64){const g=u<<6&192|h;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class tp extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const np=function(t){const e=fc(t);return hc.encodeByteArray(e,!0)},pc=function(t){return np(t).replace(/\./g,"")},mc=function(t){try{return hc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp=()=>rp().__FIREBASE_DEFAULTS__,op=()=>{if(typeof process>"u"||typeof Ko>"u")return;const t=Ko.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},ip=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&mc(t[1]);return e&&JSON.parse(e)},Xs=()=>{try{return Zh()||sp()||op()||ip()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},ap=t=>{var e,n;return(n=(e=Xs())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},gc=()=>{var t;return(t=Xs())===null||t===void 0?void 0:t.config},yc=t=>{var e;return(e=Xs())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mr(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function lp(t){return(await fetch(t,{credentials:"include"})).ok}const tn={};function up(){const t={prod:[],emulator:[]};for(const e of Object.keys(tn))tn[e]?t.emulator.push(e):t.prod.push(e);return t}function dp(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Yo=!1;function fp(t,e){if(typeof window>"u"||typeof document>"u"||!mr(window.location.host)||tn[t]===e||tn[t]||Yo)return;tn[t]=e;function n(p){return`__firebase__banner__${p}`}const r="__firebase__banner",o=up().prod.length>0;function i(){const p=document.getElementById(r);p&&p.remove()}function c(p){p.style.display="flex",p.style.background="#7faaf0",p.style.position="fixed",p.style.bottom="5px",p.style.left="5px",p.style.padding=".5em",p.style.borderRadius="5px",p.style.alignItems="center"}function a(p,m){p.setAttribute("width","24"),p.setAttribute("id",m),p.setAttribute("height","24"),p.setAttribute("viewBox","0 0 24 24"),p.setAttribute("fill","none"),p.style.marginLeft="-6px"}function u(){const p=document.createElement("span");return p.style.cursor="pointer",p.style.marginLeft="16px",p.style.fontSize="24px",p.innerHTML=" &times;",p.onclick=()=>{Yo=!0,i()},p}function f(p,m){p.setAttribute("id",m),p.innerText="Learn more",p.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",p.setAttribute("target","__blank"),p.style.paddingLeft="5px",p.style.textDecoration="underline"}function h(){const p=dp(r),m=n("text"),g=document.getElementById(m)||document.createElement("span"),w=n("learnmore"),v=document.getElementById(w)||document.createElement("a"),x=n("preprendIcon"),y=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(p.created){const b=p.element;c(b),f(v,w);const T=u();a(y,x),b.append(y,g,v,T),document.body.appendChild(b)}o?(g.innerText="Preview backend disconnected.",y.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(y.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,g.innerText="Preview backend running in this workspace."),g.setAttribute("id",m)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",h):h()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function hp(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Q())}function pp(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Qs(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function mp(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function gp(){const t=Q();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Zs(){try{return typeof indexedDB=="object"}catch{return!1}}function eo(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var o;e(((o=s.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}function vc(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="FirebaseError";class Pe extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=yp,Object.setPrototypeOf(this,Pe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,kt.prototype.create)}}class kt{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},s=`${this.service}/${e}`,o=this.errors[e],i=o?vp(o,r):"Error",c=`${this.serviceName}: ${i} (${s}).`;return new Pe(s,c,r)}}function vp(t,e){return t.replace(wp,(n,r)=>{const s=e[r];return s!=null?String(s):`<${r}?>`})}const wp=/\{\$([^}]+)}/g;function bp(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function St(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const s of n){if(!r.includes(s))return!1;const o=t[s],i=e[s];if(Jo(o)&&Jo(i)){if(!St(o,i))return!1}else if(o!==i)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function Jo(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mn(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(s=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(s))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function xp(t,e){const n=new Tp(t,e);return n.subscribe.bind(n)}class Tp{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let s;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Ep(e,["next","error","complete"])?s=e:s={next:e,error:n,complete:r},s.next===void 0&&(s.next=Ur),s.error===void 0&&(s.error=Ur),s.complete===void 0&&(s.complete=Ur);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?s.error(this.finalError):s.complete()}catch{}}),this.observers.push(s),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Ep(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Ur(){}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _p=1e3,Sp=2,Ip=4*60*60*1e3,Cp=.5;function Xo(t,e=_p,n=Sp){const r=e*Math.pow(n,t),s=Math.round(Cp*r*(Math.random()-.5)*2);return Math.min(Ip,r+s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ct(t){return t&&t._delegate?t._delegate:t}class Se{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ht="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pp{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new cp;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e?.identifier),s=(n=e?.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(kp(e))try{this.getOrInitializeService({instanceIdentifier:ht})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:s});r.resolve(o)}catch{}}}}clearInstance(e=ht){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ht){return this.instances.has(e)}getOptions(e=ht){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,i]of this.instancesDeferred.entries()){const c=this.normalizeInstanceIdentifier(o);r===c&&i.resolve(s)}return s}onInit(e,n){var r;const s=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(s,o);const i=this.instances.get(s);return i&&e(i,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Ap(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=ht){return this.component?this.component.multipleInstances?e:ht:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ap(t){return t===ht?void 0:t}function kp(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Pp(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var W;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(W||(W={}));const Np={debug:W.DEBUG,verbose:W.VERBOSE,info:W.INFO,warn:W.WARN,error:W.ERROR,silent:W.SILENT},jp=W.INFO,Op={[W.DEBUG]:"log",[W.VERBOSE]:"log",[W.INFO]:"info",[W.WARN]:"warn",[W.ERROR]:"error"},Dp=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),s=Op[e];if(s)console[s](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class to{constructor(e){this.name=e,this._logLevel=jp,this._logHandler=Dp,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in W))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Np[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,W.DEBUG,...e),this._logHandler(this,W.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,W.VERBOSE,...e),this._logHandler(this,W.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,W.INFO,...e),this._logHandler(this,W.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,W.WARN,...e),this._logHandler(this,W.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,W.ERROR,...e),this._logHandler(this,W.ERROR,...e)}}const Lp=(t,e)=>e.some(n=>t instanceof n);let Qo,Zo;function Mp(){return Qo||(Qo=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fp(){return Zo||(Zo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const wc=new WeakMap,gs=new WeakMap,bc=new WeakMap,zr=new WeakMap,no=new WeakMap;function $p(t){const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("success",o),t.removeEventListener("error",i)},o=()=>{n(rt(t.result)),s()},i=()=>{r(t.error),s()};t.addEventListener("success",o),t.addEventListener("error",i)});return e.then(n=>{n instanceof IDBCursor&&wc.set(n,t)}).catch(()=>{}),no.set(e,t),e}function Up(t){if(gs.has(t))return;const e=new Promise((n,r)=>{const s=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",i),t.removeEventListener("abort",i)},o=()=>{n(),s()},i=()=>{r(t.error||new DOMException("AbortError","AbortError")),s()};t.addEventListener("complete",o),t.addEventListener("error",i),t.addEventListener("abort",i)});gs.set(t,e)}let ys={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return gs.get(t);if(e==="objectStoreNames")return t.objectStoreNames||bc.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return rt(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zp(t){ys=t(ys)}function Vp(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Vr(this),e,...n);return bc.set(r,e.sort?e.sort():[e]),rt(r)}:Fp().includes(t)?function(...e){return t.apply(Vr(this),e),rt(wc.get(this))}:function(...e){return rt(t.apply(Vr(this),e))}}function Hp(t){return typeof t=="function"?Vp(t):(t instanceof IDBTransaction&&Up(t),Lp(t,Mp())?new Proxy(t,ys):t)}function rt(t){if(t instanceof IDBRequest)return $p(t);if(zr.has(t))return zr.get(t);const e=Hp(t);return e!==t&&(zr.set(t,e),no.set(e,t)),e}const Vr=t=>no.get(t);function xc(t,e,{blocked:n,upgrade:r,blocking:s,terminated:o}={}){const i=indexedDB.open(t,e),c=rt(i);return r&&i.addEventListener("upgradeneeded",a=>{r(rt(i.result),a.oldVersion,a.newVersion,rt(i.transaction),a)}),n&&i.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),c.then(a=>{o&&a.addEventListener("close",()=>o()),s&&a.addEventListener("versionchange",u=>s(u.oldVersion,u.newVersion,u))}).catch(()=>{}),c}const Bp=["get","getKey","getAll","getAllKeys","count"],Wp=["put","add","delete","clear"],Hr=new Map;function ei(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Hr.get(e))return Hr.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,s=Wp.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||Bp.includes(n)))return;const o=async function(i,...c){const a=this.transaction(i,s?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(c.shift())),(await Promise.all([u[n](...c),s&&a.done]))[0]};return Hr.set(e,o),o}zp(t=>({...t,get:(e,n,r)=>ei(e,n)||t.get(e,n,r),has:(e,n)=>!!ei(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qp{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Gp(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Gp(t){const e=t.getComponent();return e?.type==="VERSION"}const vs="@firebase/app",ti="0.13.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ze=new to("@firebase/app"),Kp="@firebase/app-compat",Yp="@firebase/analytics-compat",Jp="@firebase/analytics",Xp="@firebase/app-check-compat",Qp="@firebase/app-check",Zp="@firebase/auth",em="@firebase/auth-compat",tm="@firebase/database",nm="@firebase/data-connect",rm="@firebase/database-compat",sm="@firebase/functions",om="@firebase/functions-compat",im="@firebase/installations",am="@firebase/installations-compat",cm="@firebase/messaging",lm="@firebase/messaging-compat",um="@firebase/performance",dm="@firebase/performance-compat",fm="@firebase/remote-config",hm="@firebase/remote-config-compat",pm="@firebase/storage",mm="@firebase/storage-compat",gm="@firebase/firestore",ym="@firebase/ai",vm="@firebase/firestore-compat",wm="firebase",bm="11.10.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws="[DEFAULT]",xm={[vs]:"fire-core",[Kp]:"fire-core-compat",[Jp]:"fire-analytics",[Yp]:"fire-analytics-compat",[Qp]:"fire-app-check",[Xp]:"fire-app-check-compat",[Zp]:"fire-auth",[em]:"fire-auth-compat",[tm]:"fire-rtdb",[nm]:"fire-data-connect",[rm]:"fire-rtdb-compat",[sm]:"fire-fn",[om]:"fire-fn-compat",[im]:"fire-iid",[am]:"fire-iid-compat",[cm]:"fire-fcm",[lm]:"fire-fcm-compat",[um]:"fire-perf",[dm]:"fire-perf-compat",[fm]:"fire-rc",[hm]:"fire-rc-compat",[pm]:"fire-gcs",[mm]:"fire-gcs-compat",[gm]:"fire-fst",[vm]:"fire-fst-compat",[ym]:"fire-vertex","fire-js":"fire-js",[wm]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qn=new Map,Tm=new Map,bs=new Map;function ni(t,e){try{t.container.addComponent(e)}catch(n){ze.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ve(t){const e=t.name;if(bs.has(e))return ze.debug(`There were multiple attempts to register component ${e}.`),!1;bs.set(e,t);for(const n of qn.values())ni(n,t);for(const n of Tm.values())ni(n,t);return!0}function Gt(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ve(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Em={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},st=new kt("app","Firebase",Em);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _m{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Se("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw st.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn=bm;function Tc(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:ws,automaticDataCollectionEnabled:!0},e),s=r.name;if(typeof s!="string"||!s)throw st.create("bad-app-name",{appName:String(s)});if(n||(n=gc()),!n)throw st.create("no-options");const o=qn.get(s);if(o){if(St(n,o.options)&&St(r,o.config))return o;throw st.create("duplicate-app",{appName:s})}const i=new Rp(s);for(const a of bs.values())i.addComponent(a);const c=new _m(n,r,i);return qn.set(s,c),c}function Ec(t=ws){const e=qn.get(t);if(!e&&t===ws&&gc())return Tc();if(!e)throw st.create("no-app",{appName:t});return e}function xe(t,e,n){var r;let s=(r=xm[t])!==null&&r!==void 0?r:t;n&&(s+=`-${n}`);const o=s.match(/\s|\//),i=e.match(/\s|\//);if(o||i){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&i&&c.push("and"),i&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),ze.warn(c.join(" "));return}Ve(new Se(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sm="firebase-heartbeat-database",Im=1,un="firebase-heartbeat-store";let Br=null;function _c(){return Br||(Br=xc(Sm,Im,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(un)}catch(n){console.warn(n)}}}}).catch(t=>{throw st.create("idb-open",{originalErrorMessage:t.message})})),Br}async function Cm(t){try{const n=(await _c()).transaction(un),r=await n.objectStore(un).get(Sc(t));return await n.done,r}catch(e){if(e instanceof Pe)ze.warn(e.message);else{const n=st.create("idb-get",{originalErrorMessage:e?.message});ze.warn(n.message)}}}async function ri(t,e){try{const r=(await _c()).transaction(un,"readwrite");await r.objectStore(un).put(e,Sc(t)),await r.done}catch(n){if(n instanceof Pe)ze.warn(n.message);else{const r=st.create("idb-set",{originalErrorMessage:n?.message});ze.warn(r.message)}}}function Sc(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pm=1024,Am=30;class km{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nm(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),o=si();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===o||this._heartbeatsCache.heartbeats.some(i=>i.date===o))return;if(this._heartbeatsCache.heartbeats.push({date:o,agent:s}),this._heartbeatsCache.heartbeats.length>Am){const i=jm(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(i,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){ze.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=si(),{heartbeatsToSend:r,unsentEntries:s}=Rm(this._heartbeatsCache.heartbeats),o=pc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(n){return ze.warn(n),""}}}function si(){return new Date().toISOString().substring(0,10)}function Rm(t,e=Pm){const n=[];let r=t.slice();for(const s of t){const o=n.find(i=>i.agent===s.agent);if(o){if(o.dates.push(s.date),oi(n)>e){o.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),oi(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nm{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Zs()?eo().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Cm(this.app);return n?.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ri(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return ri(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function oi(t){return pc(JSON.stringify({version:2,heartbeats:t})).length}function jm(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Om(t){Ve(new Se("platform-logger",e=>new qp(e),"PRIVATE")),Ve(new Se("heartbeat",e=>new km(e),"PRIVATE")),xe(vs,ti,t),xe(vs,ti,"esm2017"),xe("fire-js","")}Om("");function Ic(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Dm=Ic,Cc=new kt("auth","Firebase",Ic());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gn=new to("@firebase/auth");function Lm(t,...e){Gn.logLevel<=W.WARN&&Gn.warn(`Auth (${gn}): ${t}`,...e)}function Mn(t,...e){Gn.logLevel<=W.ERROR&&Gn.error(`Auth (${gn}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ie(t,...e){throw so(t,...e)}function pe(t,...e){return so(t,...e)}function ro(t,e,n){const r=Object.assign(Object.assign({},Dm()),{[e]:n});return new kt("auth","Firebase",r).create(e,{appName:t.name})}function Et(t){return ro(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Mm(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Ie(t,"argument-error"),ro(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function so(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Cc.create(t,...e)}function j(t,e,...n){if(!t)throw so(e,...n)}function Le(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Mn(e),new Error(e)}function He(t,e){t||Le(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xs(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Fm(){return ii()==="http:"||ii()==="https:"}function ii(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $m(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fm()||Qs()||"connection"in navigator)?navigator.onLine:!0}function Um(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yn{constructor(e,n){this.shortDelay=e,this.longDelay=n,He(n>e,"Short delay should be less than long delay!"),this.isMobile=hp()||mp()}get(){return $m()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(t,e){He(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Le("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Le("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Le("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vm=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],Hm=new yn(3e4,6e4);function io(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Kt(t,e,n,r,s={}){return Ac(t,s,async()=>{let o={},i={};r&&(e==="GET"?i=r:o={body:JSON.stringify(r)});const c=mn(Object.assign({key:t.config.apiKey},i)).slice(1),a=await t._getAdditionalHeaders();a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode);const u=Object.assign({method:e,headers:a},o);return pp()||(u.referrerPolicy="no-referrer"),t.emulatorConfig&&mr(t.emulatorConfig.host)&&(u.credentials="include"),Pc.fetch()(await kc(t,t.config.apiHost,n,c),u)})}async function Ac(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},zm),e);try{const s=new Wm(t),o=await Promise.race([n(),s.promise]);s.clearNetworkTimeout();const i=await o.json();if("needConfirmation"in i)throw Pn(t,"account-exists-with-different-credential",i);if(o.ok&&!("errorMessage"in i))return i;{const c=o.ok?i.errorMessage:i.error.message,[a,u]=c.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Pn(t,"credential-already-in-use",i);if(a==="EMAIL_EXISTS")throw Pn(t,"email-already-in-use",i);if(a==="USER_DISABLED")throw Pn(t,"user-disabled",i);const f=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(u)throw ro(t,f,u);Ie(t,f)}}catch(s){if(s instanceof Pe)throw s;Ie(t,"network-request-failed",{message:String(s)})}}async function Bm(t,e,n,r,s={}){const o=await Kt(t,e,n,r,s);return"mfaPendingCredential"in o&&Ie(t,"multi-factor-auth-required",{_serverResponse:o}),o}async function kc(t,e,n,r){const s=`${e}${n}?${r}`,o=t,i=o.config.emulator?oo(t.config,s):`${t.config.apiScheme}://${s}`;return Vm.includes(n)&&(await o._persistenceManagerAvailable,o._getPersistenceType()==="COOKIE")?o._getPersistence()._getFinalTarget(i).toString():i}class Wm{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(pe(this.auth,"network-request-failed")),Hm.get())})}}function Pn(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const s=pe(t,e,r);return s.customData._tokenResponse=n,s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qm(t,e){return Kt(t,"POST","/v1/accounts:delete",e)}async function Kn(t,e){return Kt(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gm(t,e=!1){const n=ct(t),r=await n.getIdToken(e),s=ao(r);j(s&&s.exp&&s.auth_time&&s.iat,n.auth,"internal-error");const o=typeof s.firebase=="object"?s.firebase:void 0,i=o?.sign_in_provider;return{claims:s,token:r,authTime:nn(Wr(s.auth_time)),issuedAtTime:nn(Wr(s.iat)),expirationTime:nn(Wr(s.exp)),signInProvider:i||null,signInSecondFactor:o?.sign_in_second_factor||null}}function Wr(t){return Number(t)*1e3}function ao(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Mn("JWT malformed, contained fewer than 3 sections"),null;try{const s=mc(n);return s?JSON.parse(s):(Mn("Failed to decode base64 JWT payload"),null)}catch(s){return Mn("Caught error parsing JWT payload as JSON",s?.toString()),null}}function ai(t){const e=ao(t);return j(e,"internal-error"),j(typeof e.exp<"u","internal-error"),j(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dn(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Pe&&Km(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Km({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const s=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=nn(this.lastLoginAt),this.creationTime=nn(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yn(t){var e;const n=t.auth,r=await t.getIdToken(),s=await dn(t,Kn(n,{idToken:r}));j(s?.users.length,n,"internal-error");const o=s.users[0];t._notifyReloadListener(o);const i=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?Rc(o.providerUserInfo):[],c=Xm(t.providerData,i),a=t.isAnonymous,u=!(t.email&&o.passwordHash)&&!c?.length,f=a?u:!1,h={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Ts(o.createdAt,o.lastLoginAt),isAnonymous:f};Object.assign(t,h)}async function Jm(t){const e=ct(t);await Yn(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Xm(t,e){return[...t.filter(r=>!e.some(s=>s.providerId===r.providerId)),...e]}function Rc(t){return t.map(e=>{var{providerId:n}=e,r=Ns(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qm(t,e){const n=await Ac(t,{},async()=>{const r=mn({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:s,apiKey:o}=t.config,i=await kc(t,s,"/v1/token",`key=${o}`),c=await t._getAdditionalHeaders();c["Content-Type"]="application/x-www-form-urlencoded";const a={method:"POST",headers:c,body:r};return t.emulatorConfig&&mr(t.emulatorConfig.host)&&(a.credentials="include"),Pc.fetch()(i,a)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function Zm(t,e){return Kt(t,"POST","/v2/accounts:revokeToken",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){j(e.idToken,"internal-error"),j(typeof e.idToken<"u","internal-error"),j(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ai(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){j(e.length!==0,"internal-error");const n=ai(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(j(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:s,expiresIn:o}=await Qm(e,n);this.updateTokensAndExpiration(r,s,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:s,expirationTime:o}=n,i=new Ft;return r&&(j(typeof r=="string","internal-error",{appName:e}),i.refreshToken=r),s&&(j(typeof s=="string","internal-error",{appName:e}),i.accessToken=s),o&&(j(typeof o=="number","internal-error",{appName:e}),i.expirationTime=o),i}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ft,this.toJSON())}_performRefresh(){return Le("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qe(t,e){j(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class fe{constructor(e){var{uid:n,auth:r,stsTokenManager:s}=e,o=Ns(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Ym(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Ts(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await dn(this,this.stsTokenManager.getToken(this.auth,e));return j(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gm(this,e)}reload(){return Jm(this)}_assign(e){this!==e&&(j(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new fe(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){j(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Yn(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ve(this.auth.app))return Promise.reject(Et(this.auth));const e=await this.getIdToken();return await dn(this,qm(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,s,o,i,c,a,u,f;const h=(r=n.displayName)!==null&&r!==void 0?r:void 0,p=(s=n.email)!==null&&s!==void 0?s:void 0,m=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,g=(i=n.photoURL)!==null&&i!==void 0?i:void 0,w=(c=n.tenantId)!==null&&c!==void 0?c:void 0,v=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,x=(u=n.createdAt)!==null&&u!==void 0?u:void 0,y=(f=n.lastLoginAt)!==null&&f!==void 0?f:void 0,{uid:b,emailVerified:T,isAnonymous:_,providerData:S,stsTokenManager:R}=n;j(b&&R,e,"internal-error");const F=Ft.fromJSON(this.name,R);j(typeof b=="string",e,"internal-error"),qe(h,e.name),qe(p,e.name),j(typeof T=="boolean",e,"internal-error"),j(typeof _=="boolean",e,"internal-error"),qe(m,e.name),qe(g,e.name),qe(w,e.name),qe(v,e.name),qe(x,e.name),qe(y,e.name);const z=new fe({uid:b,auth:e,email:p,emailVerified:T,displayName:h,isAnonymous:_,photoURL:g,phoneNumber:m,tenantId:w,stsTokenManager:F,createdAt:x,lastLoginAt:y});return S&&Array.isArray(S)&&(z.providerData=S.map(O=>Object.assign({},O))),v&&(z._redirectEventId=v),z}static async _fromIdTokenResponse(e,n,r=!1){const s=new Ft;s.updateFromServerResponse(n);const o=new fe({uid:n.localId,auth:e,stsTokenManager:s,isAnonymous:r});return await Yn(o),o}static async _fromGetAccountInfoResponse(e,n,r){const s=n.users[0];j(s.localId!==void 0,"internal-error");const o=s.providerUserInfo!==void 0?Rc(s.providerUserInfo):[],i=!(s.email&&s.passwordHash)&&!o?.length,c=new Ft;c.updateFromIdToken(r);const a=new fe({uid:s.localId,auth:e,stsTokenManager:c,isAnonymous:i}),u={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Ts(s.createdAt,s.lastLoginAt),isAnonymous:!(s.email&&s.passwordHash)&&!o?.length};return Object.assign(a,u),a}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ci=new Map;function Me(t){He(t instanceof Function,"Expected a class definition");let e=ci.get(t);return e?(He(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ci.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nc{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nc.type="NONE";const li=Nc;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fn(t,e,n){return`firebase:${t}:${e}:${n}`}class $t{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:s,name:o}=this.auth;this.fullUserKey=Fn(this.userKey,s.apiKey,o),this.fullPersistenceKey=Fn("persistence",s.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Kn(this.auth,{idToken:e}).catch(()=>{});return n?fe._fromGetAccountInfoResponse(this.auth,n,e):null}return fe._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new $t(Me(li),e,r);const s=(await Promise.all(n.map(async u=>{if(await u._isAvailable())return u}))).filter(u=>u);let o=s[0]||Me(li);const i=Fn(r,e.config.apiKey,e.name);let c=null;for(const u of n)try{const f=await u._get(i);if(f){let h;if(typeof f=="string"){const p=await Kn(e,{idToken:f}).catch(()=>{});if(!p)break;h=await fe._fromGetAccountInfoResponse(e,p,f)}else h=fe._fromJSON(e,f);u!==o&&(c=h),o=u;break}}catch{}const a=s.filter(u=>u._shouldAllowMigration);return!o._shouldAllowMigration||!a.length?new $t(o,e,r):(o=a[0],c&&await o._set(i,c.toJSON()),await Promise.all(n.map(async u=>{if(u!==o)try{await u._remove(i)}catch{}})),new $t(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ui(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lc(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(jc(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Fc(e))return"Blackberry";if($c(e))return"Webos";if(Oc(e))return"Safari";if((e.includes("chrome/")||Dc(e))&&!e.includes("edge/"))return"Chrome";if(Mc(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if(r?.length===2)return r[1]}return"Other"}function jc(t=Q()){return/firefox\//i.test(t)}function Oc(t=Q()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dc(t=Q()){return/crios\//i.test(t)}function Lc(t=Q()){return/iemobile/i.test(t)}function Mc(t=Q()){return/android/i.test(t)}function Fc(t=Q()){return/blackberry/i.test(t)}function $c(t=Q()){return/webos/i.test(t)}function co(t=Q()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function eg(t=Q()){var e;return co(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function tg(){return gp()&&document.documentMode===10}function Uc(t=Q()){return co(t)||Mc(t)||$c(t)||Fc(t)||/windows phone/i.test(t)||Lc(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zc(t,e=[]){let n;switch(t){case"Browser":n=ui(Q());break;case"Worker":n=`${ui(Q())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${gn}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((i,c)=>{try{const a=e(o);i(a)}catch(a){c(a)}});r.onAbort=n,this.queue.push(r);const s=this.queue.length-1;return()=>{this.queue[s]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const s of n)try{s()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rg(t,e={}){return Kt(t,"GET","/v2/passwordPolicy",io(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sg=6;class og{constructor(e){var n,r,s,o;const i=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=i.minPasswordLength)!==null&&n!==void 0?n:sg,i.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=i.maxPasswordLength),i.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=i.containsLowercaseCharacter),i.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=i.containsUppercaseCharacter),i.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=i.containsNumericCharacter),i.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=i.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(s=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&s!==void 0?s:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,s,o,i,c;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(s=a.containsLowercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsUppercaseLetter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(i=a.containsNumericCharacter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(c=a.containsNonAlphanumericCharacter)!==null&&c!==void 0?c:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,s=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),s&&(n.meetsMaxPasswordLength=e.length<=s)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let s=0;s<e.length;s++)r=e.charAt(s),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,s,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=s)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ig{constructor(e,n,r,s){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=s,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new di(this),this.idTokenSubscription=new di(this),this.beforeStateQueue=new ng(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Cc,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=s.sdkClientVersion,this._persistenceManagerAvailable=new Promise(o=>this._resolvePersistenceManagerAvailable=o)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=Me(n)),this._initializationPromise=this.queue(async()=>{var r,s,o;if(!this._deleted&&(this.persistenceManager=await $t.create(this,e),(r=this._resolvePersistenceManagerAvailable)===null||r===void 0||r.call(this),!this._deleted)){if(!((s=this._popupRedirectResolver)===null||s===void 0)&&s._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((o=this.currentUser)===null||o===void 0?void 0:o.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Kn(this,{idToken:e}),r=await fe._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var n;if(ve(this.app)){const i=this.app.settings.authIdToken;return i?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(i).then(c,c))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let s=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const i=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,c=s?._redirectEventId,a=await this.tryRedirectSignIn(e);(!i||i===c)&&a?.user&&(s=a.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(i){s=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(i))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return j(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Yn(e)}catch(n){if(n?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Um()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ve(this.app))return Promise.reject(Et(this));const n=e?ct(e):null;return n&&j(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&j(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ve(this.app)?Promise.reject(Et(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ve(this.app)?Promise.reject(Et(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Me(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await rg(this),n=new og(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new kt("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await Zm(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&Me(e)||this._popupRedirectResolver;j(n,this,"argument-error"),this.redirectPersistenceManager=await $t.create(this,[Me(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,s){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let i=!1;const c=this._isInitialized?Promise.resolve():this._initializationPromise;if(j(c,this,"internal-error"),c.then(()=>{i||o(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,s);return()=>{i=!0,a()}}else{const a=e.addObserver(n);return()=>{i=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return j(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=zc(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const s=await this._getAppCheckToken();return s&&(n["X-Firebase-AppCheck"]=s),n}async _getAppCheckToken(){var e;if(ve(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n?.error&&Lm(`Error while retrieving App Check token: ${n.error}`),n?.token}}function gr(t){return ct(t)}class di{constructor(e){this.auth=e,this.observer=null,this.addObserver=xp(n=>this.observer=n)}get next(){return j(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lo={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function ag(t){lo=t}function cg(t){return lo.loadJS(t)}function lg(){return lo.gapiScript}function ug(t){return`__${t}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dg(t,e){const n=Gt(t,"auth");if(n.isInitialized()){const s=n.getImmediate(),o=n.getOptions();if(St(o,e??{}))return s;Ie(s,"already-initialized")}return n.initialize({options:e})}function fg(t,e){const n=e?.persistence||[],r=(Array.isArray(n)?n:[n]).map(Me);e?.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e?.popupRedirectResolver)}function hg(t,e,n){const r=gr(t);j(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const s=!1,o=Vc(e),{host:i,port:c}=pg(e),a=c===null?"":`:${c}`,u={url:`${o}//${i}${a}/`},f=Object.freeze({host:i,port:c,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:s})});if(!r._canInitEmulator){j(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),j(St(u,r.config.emulator)&&St(f,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=u,r.emulatorConfig=f,r.settings.appVerificationDisabledForTesting=!0,mr(i)?(lp(`${o}//${i}${a}`),fp("Auth",!0)):mg()}function Vc(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function pg(t){const e=Vc(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",s=/^(\[[^\]]+\])(:|$)/.exec(r);if(s){const o=s[1];return{host:o,port:fi(r.substr(o.length+1))}}else{const[o,i]=r.split(":");return{host:o,port:fi(i)}}}function fi(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function mg(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Le("not implemented")}_getIdTokenResponse(e){return Le("not implemented")}_linkToIdToken(e,n){return Le("not implemented")}_getReauthenticationResolver(e){return Le("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ut(t,e){return Bm(t,"POST","/v1/accounts:signInWithIdp",io(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gg="http://localhost";class It extends Hc{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new It(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Ie("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:s}=n,o=Ns(n,["providerId","signInMethod"]);if(!r||!s)return null;const i=new It(r,s);return i.idToken=o.idToken||void 0,i.accessToken=o.accessToken||void 0,i.secret=o.secret,i.nonce=o.nonce,i.pendingToken=o.pendingToken||null,i}_getIdTokenResponse(e){const n=this.buildRequest();return Ut(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ut(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ut(e,n)}buildRequest(){const e={requestUri:gg,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=mn(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uo{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vn extends uo{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge extends vn{constructor(){super("facebook.com")}static credential(e){return It._fromParams({providerId:Ge.PROVIDER_ID,signInMethod:Ge.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ge.credentialFromTaggedObject(e)}static credentialFromError(e){return Ge.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ge.credential(e.oauthAccessToken)}catch{return null}}}Ge.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ge.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oe extends vn{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return It._fromParams({providerId:Oe.PROVIDER_ID,signInMethod:Oe.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Oe.credentialFromTaggedObject(e)}static credentialFromError(e){return Oe.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Oe.credential(n,r)}catch{return null}}}Oe.GOOGLE_SIGN_IN_METHOD="google.com";Oe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ke extends vn{constructor(){super("github.com")}static credential(e){return It._fromParams({providerId:Ke.PROVIDER_ID,signInMethod:Ke.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ke.credentialFromTaggedObject(e)}static credentialFromError(e){return Ke.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ke.credential(e.oauthAccessToken)}catch{return null}}}Ke.GITHUB_SIGN_IN_METHOD="github.com";Ke.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye extends vn{constructor(){super("twitter.com")}static credential(e,n){return It._fromParams({providerId:Ye.PROVIDER_ID,signInMethod:Ye.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ye.credentialFromTaggedObject(e)}static credentialFromError(e){return Ye.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ye.credential(n,r)}catch{return null}}}Ye.TWITTER_SIGN_IN_METHOD="twitter.com";Ye.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,s=!1){const o=await fe._fromIdTokenResponse(e,r,s),i=hi(r);return new Ht({user:o,providerId:i,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const s=hi(r);return new Ht({user:e,providerId:s,_tokenResponse:r,operationType:n})}}function hi(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn extends Pe{constructor(e,n,r,s){var o;super(n.code,n.message),this.operationType=r,this.user=s,Object.setPrototypeOf(this,Jn.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,s){return new Jn(e,n,r,s)}}function Bc(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Jn._fromErrorAndOperation(t,o,e,r):o})}async function yg(t,e,n=!1){const r=await dn(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Ht._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(t,e,n=!1){const{auth:r}=t;if(ve(r.app))return Promise.reject(Et(r));const s="reauthenticate";try{const o=await dn(t,Bc(r,s,e,t),n);j(o.idToken,r,"internal-error");const i=ao(o.idToken);j(i,r,"internal-error");const{sub:c}=i;return j(t.uid===c,r,"user-mismatch"),Ht._forOperation(t,s,o)}catch(o){throw o?.code==="auth/user-not-found"&&Ie(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wg(t,e,n=!1){if(ve(t.app))return Promise.reject(Et(t));const r="signIn",s=await Bc(t,r,e),o=await Ht._fromIdTokenResponse(t,r,s);return n||await t._updateCurrentUser(o.user),o}function bg(t,e,n,r){return ct(t).onIdTokenChanged(e,n,r)}function xg(t,e,n){return ct(t).beforeAuthStateChanged(e,n)}const Xn="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Xn,"1"),this.storage.removeItem(Xn),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tg=1e3,Eg=10;class qc extends Wc{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Uc(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),s=this.localCache[n];r!==s&&e(n,s,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((i,c,a)=>{this.notifyListeners(i,a)});return}const r=e.key;n?this.detachListener():this.stopPolling();const s=()=>{const i=this.storage.getItem(r);!n&&this.localCache[r]===i||this.notifyListeners(r,i)},o=this.storage.getItem(r);tg()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(s,Eg):s()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},Tg)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}qc.type="LOCAL";const _g=qc;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gc extends Wc{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gc.type="SESSION";const Kc=Gc;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sg(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(s=>s.isListeningto(e));if(n)return n;const r=new yr(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:s,data:o}=n.data,i=this.handlersMap[s];if(!i?.size)return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:s});const c=Array.from(i).map(async u=>u(n.origin,o)),a=await Sg(c);n.ports[0].postMessage({status:"done",eventId:r,eventType:s,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}yr.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fo(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const s=typeof MessageChannel<"u"?new MessageChannel:null;if(!s)throw new Error("connection_unavailable");let o,i;return new Promise((c,a)=>{const u=fo("",20);s.port1.start();const f=setTimeout(()=>{a(new Error("unsupported_event"))},r);i={messageChannel:s,onMessage(h){const p=h;if(p.data.eventId===u)switch(p.data.status){case"ack":clearTimeout(f),o=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),c(p.data.response);break;default:clearTimeout(f),clearTimeout(o),a(new Error("invalid_response"));break}}},this.handlers.add(i),s.port1.addEventListener("message",i.onMessage),this.target.postMessage({eventType:e,eventId:u,data:n},[s.port2])}).finally(()=>{i&&this.removeMessageHandler(i)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Te(){return window}function Cg(t){Te().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yc(){return typeof Te().WorkerGlobalScope<"u"&&typeof Te().importScripts=="function"}async function Pg(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ag(){var t;return((t=navigator?.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function kg(){return Yc()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jc="firebaseLocalStorageDb",Rg=1,Qn="firebaseLocalStorage",Xc="fbase_key";class wn{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function vr(t,e){return t.transaction([Qn],e?"readwrite":"readonly").objectStore(Qn)}function Ng(){const t=indexedDB.deleteDatabase(Jc);return new wn(t).toPromise()}function Es(){const t=indexedDB.open(Jc,Rg);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Qn,{keyPath:Xc})}catch(s){n(s)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Qn)?e(r):(r.close(),await Ng(),e(await Es()))})})}async function pi(t,e,n){const r=vr(t,!0).put({[Xc]:e,value:n});return new wn(r).toPromise()}async function jg(t,e){const n=vr(t,!1).get(e),r=await new wn(n).toPromise();return r===void 0?null:r.value}function mi(t,e){const n=vr(t,!0).delete(e);return new wn(n).toPromise()}const Og=800,Dg=3;class Qc{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Es(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Dg)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yc()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=yr._getInstance(kg()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await Pg(),!this.activeServiceWorker)return;this.sender=new Ig(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ag()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Es();return await pi(e,Xn,"1"),await mi(e,Xn),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>pi(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>jg(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>mi(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(s=>{const o=vr(s,!1).getAll();return new wn(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:s,value:o}of e)r.add(s),JSON.stringify(this.localCache[s])!==JSON.stringify(o)&&(this.notifyListeners(s,o),n.push(s));for(const s of Object.keys(this.localCache))this.localCache[s]&&!r.has(s)&&(this.notifyListeners(s,null),n.push(s));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const s of Array.from(r))s(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Og)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Qc.type="LOCAL";const Lg=Qc;new yn(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zc(t,e){return e?Me(e):(j(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ho extends Hc{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ut(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ut(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ut(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Mg(t){return wg(t.auth,new ho(t),t.bypassAuthState)}function Fg(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),vg(n,new ho(t),t.bypassAuthState)}async function $g(t){const{auth:e,user:n}=t;return j(n,e,"internal-error"),yg(n,new ho(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class el{constructor(e,n,r,s,o=!1){this.auth=e,this.resolver=r,this.user=s,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:s,tenantId:o,error:i,type:c}=e;if(i){this.reject(i);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:s||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(c)(a))}catch(u){this.reject(u)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Mg;case"linkViaPopup":case"linkViaRedirect":return $g;case"reauthViaPopup":case"reauthViaRedirect":return Fg;default:Ie(this.auth,"internal-error")}}resolve(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){He(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ug=new yn(2e3,1e4);async function zg(t,e,n){if(ve(t.app))return Promise.reject(pe(t,"operation-not-supported-in-this-environment"));const r=gr(t);Mm(t,e,uo);const s=Zc(r,n);return new gt(r,"signInViaPopup",e,s).executeNotNull()}class gt extends el{constructor(e,n,r,s,o){super(e,n,s,o),this.provider=r,this.authWindow=null,this.pollId=null,gt.currentPopupAction&&gt.currentPopupAction.cancel(),gt.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return j(e,this.auth,"internal-error"),e}async onExecution(){He(this.filter.length===1,"Popup operations only handle one event");const e=fo();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(pe(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(pe(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,gt.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(pe(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Ug.get())};e()}}gt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="pendingRedirect",$n=new Map;class Hg extends el{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=$n.get(this.auth._key());if(!e){try{const r=await Bg(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}$n.set(this.auth._key(),e)}return this.bypassAuthState||$n.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Bg(t,e){const n=Gg(e),r=qg(t);if(!await r._isAvailable())return!1;const s=await r._get(n)==="true";return await r._remove(n),s}function Wg(t,e){$n.set(t._key(),e)}function qg(t){return Me(t._redirectPersistence)}function Gg(t){return Fn(Vg,t.config.apiKey,t.name)}async function Kg(t,e,n=!1){if(ve(t.app))return Promise.reject(Et(t));const r=gr(t),s=Zc(r,e),i=await new Hg(r,s,n).execute();return i&&!n&&(delete i.user._redirectEventId,await r._persistUserIfCurrent(i.user),await r._setRedirectUser(null,e)),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yg=10*60*1e3;class Jg{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Xg(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!tl(e)){const s=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(pe(this.auth,s))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Yg&&this.cachedEventUids.clear(),this.cachedEventUids.has(gi(e))}saveEventToCache(e){this.cachedEventUids.add(gi(e)),this.lastProcessedEventTime=Date.now()}}function gi(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function tl({type:t,error:e}){return t==="unknown"&&e?.code==="auth/no-auth-event"}function Xg(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return tl(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qg(t,e={}){return Kt(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zg=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ey=/^https?/;async function ty(t){if(t.config.emulator)return;const{authorizedDomains:e}=await Qg(t);for(const n of e)try{if(ny(n))return}catch{}Ie(t,"unauthorized-domain")}function ny(t){const e=xs(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const i=new URL(t);return i.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&i.hostname===r}if(!ey.test(n))return!1;if(Zg.test(t))return r===t;const s=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+s+"|"+s+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ry=new yn(3e4,6e4);function yi(){const t=Te().___jsl;if(t?.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function sy(t){return new Promise((e,n)=>{var r,s,o;function i(){yi(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{yi(),n(pe(t,"network-request-failed"))},timeout:ry.get()})}if(!((s=(r=Te().gapi)===null||r===void 0?void 0:r.iframes)===null||s===void 0)&&s.Iframe)e(gapi.iframes.getContext());else if(!((o=Te().gapi)===null||o===void 0)&&o.load)i();else{const c=ug("iframefcb");return Te()[c]=()=>{gapi.load?i():n(pe(t,"network-request-failed"))},cg(`${lg()}?onload=${c}`).catch(a=>n(a))}}).catch(e=>{throw Un=null,e})}let Un=null;function oy(t){return Un=Un||sy(t),Un}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iy=new yn(5e3,15e3),ay="__/auth/iframe",cy="emulator/auth/iframe",ly={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},uy=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function dy(t){const e=t.config;j(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?oo(e,cy):`https://${t.config.authDomain}/${ay}`,r={apiKey:e.apiKey,appName:t.name,v:gn},s=uy.get(t.config.apiHost);s&&(r.eid=s);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${mn(r).slice(1)}`}async function fy(t){const e=await oy(t),n=Te().gapi;return j(n,t,"internal-error"),e.open({where:document.body,url:dy(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ly,dontclear:!0},r=>new Promise(async(s,o)=>{await r.restyle({setHideOnLeave:!1});const i=pe(t,"network-request-failed"),c=Te().setTimeout(()=>{o(i)},iy.get());function a(){Te().clearTimeout(c),s(r)}r.ping(a).then(a,()=>{o(i)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hy={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},py=500,my=600,gy="_blank",yy="http://localhost";class vi{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function vy(t,e,n,r=py,s=my){const o=Math.max((window.screen.availHeight-s)/2,0).toString(),i=Math.max((window.screen.availWidth-r)/2,0).toString();let c="";const a=Object.assign(Object.assign({},hy),{width:r.toString(),height:s.toString(),top:o,left:i}),u=Q().toLowerCase();n&&(c=Dc(u)?gy:n),jc(u)&&(e=e||yy,a.scrollbars="yes");const f=Object.entries(a).reduce((p,[m,g])=>`${p}${m}=${g},`,"");if(eg(u)&&c!=="_self")return wy(e||"",c),new vi(null);const h=window.open(e||"",c,f);j(h,t,"popup-blocked");try{h.focus()}catch{}return new vi(h)}function wy(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const by="__/auth/handler",xy="emulator/auth/handler",Ty=encodeURIComponent("fac");async function wi(t,e,n,r,s,o){j(t.config.authDomain,t,"auth-domain-config-required"),j(t.config.apiKey,t,"invalid-api-key");const i={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:gn,eventId:s};if(e instanceof uo){e.setDefaultLanguage(t.languageCode),i.providerId=e.providerId||"",bp(e.getCustomParameters())||(i.customParameters=JSON.stringify(e.getCustomParameters()));for(const[f,h]of Object.entries({}))i[f]=h}if(e instanceof vn){const f=e.getScopes().filter(h=>h!=="");f.length>0&&(i.scopes=f.join(","))}t.tenantId&&(i.tid=t.tenantId);const c=i;for(const f of Object.keys(c))c[f]===void 0&&delete c[f];const a=await t._getAppCheckToken(),u=a?`#${Ty}=${encodeURIComponent(a)}`:"";return`${Ey(t)}?${mn(c).slice(1)}${u}`}function Ey({config:t}){return t.emulator?oo(t,xy):`https://${t.authDomain}/${by}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="webStorageSupport";class _y{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kc,this._completeRedirectFn=Kg,this._overrideRedirectResult=Wg}async _openPopup(e,n,r,s){var o;He((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const i=await wi(e,n,r,xs(),s);return vy(e,i,fo())}async _openRedirect(e,n,r,s){await this._originValidation(e);const o=await wi(e,n,r,xs(),s);return Cg(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:s,promise:o}=this.eventManagers[n];return s?Promise.resolve(s):(He(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await fy(e),r=new Jg(e);return n.register("authEvent",s=>(j(s?.authEvent,e,"invalid-auth-event"),{status:r.onEvent(s.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(qr,{type:qr},s=>{var o;const i=(o=s?.[0])===null||o===void 0?void 0:o[qr];i!==void 0&&n(!!i),Ie(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=ty(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Uc()||Oc()||co()}}const Sy=_y;var bi="@firebase/auth",xi="1.10.8";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iy{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e(r?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){j(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cy(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Py(t){Ve(new Se("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:i,authDomain:c}=r.options;j(i&&!i.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:i,authDomain:c,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:zc(t)},u=new ig(r,s,o,a);return fg(u,n),u},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ve(new Se("auth-internal",e=>{const n=gr(e.getProvider("auth").getImmediate());return(r=>new Iy(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),xe(bi,xi,Cy(t)),xe(bi,xi,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ay=5*60,ky=yc("authIdTokenMaxAge")||Ay;let Ti=null;const Ry=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>ky)return;const s=n?.token;Ti!==s&&(Ti=s,await fetch(t,{method:s?"POST":"DELETE",headers:s?{Authorization:`Bearer ${s}`}:{}}))};function Ny(t=Ec()){const e=Gt(t,"auth");if(e.isInitialized())return e.getImmediate();const n=dg(t,{popupRedirectResolver:Sy,persistence:[Lg,_g,Kc]}),r=yc("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const o=new URL(r,location.origin);if(location.origin===o.origin){const i=Ry(o.toString());xg(n,i,()=>i(n.currentUser)),bg(n,c=>i(c))}}const s=ap("auth");return s&&hg(n,`http://${s}`),n}function jy(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}ag({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=s=>{const o=pe("internal-error");o.customData=s,n(o)},r.type="text/javascript",r.charset="UTF-8",jy().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Py("Browser");var Oy="firebase",Dy="11.10.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */xe(Oy,Dy,"app");const nl="@firebase/installations",po="0.6.18";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rl=1e4,sl=`w:${po}`,ol="FIS_v2",Ly="https://firebaseinstallations.googleapis.com/v1",My=60*60*1e3,Fy="installations",$y="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uy={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},Ct=new kt(Fy,$y,Uy);function il(t){return t instanceof Pe&&t.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function al({projectId:t}){return`${Ly}/projects/${t}/installations`}function cl(t){return{token:t.token,requestStatus:2,expiresIn:Vy(t.expiresIn),creationTime:Date.now()}}async function ll(t,e){const r=(await e.json()).error;return Ct.create("request-failed",{requestName:t,serverCode:r.code,serverMessage:r.message,serverStatus:r.status})}function ul({apiKey:t}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function zy(t,{refreshToken:e}){const n=ul(t);return n.append("Authorization",Hy(e)),n}async function dl(t){const e=await t();return e.status>=500&&e.status<600?t():e}function Vy(t){return Number(t.replace("s","000"))}function Hy(t){return`${ol} ${t}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function By({appConfig:t,heartbeatServiceProvider:e},{fid:n}){const r=al(t),s=ul(t),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const i={fid:n,authVersion:ol,appId:t.appId,sdkVersion:sl},c={method:"POST",headers:s,body:JSON.stringify(i)},a=await dl(()=>fetch(r,c));if(a.ok){const u=await a.json();return{fid:u.fid||n,registrationStatus:2,refreshToken:u.refreshToken,authToken:cl(u.authToken)}}else throw await ll("Create Installation",a)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(t){return new Promise(e=>{setTimeout(e,t)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wy(t){return btoa(String.fromCharCode(...t)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qy=/^[cdef][\w-]{21}$/,_s="";function Gy(){try{const t=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(t),t[0]=112+t[0]%16;const n=Ky(t);return qy.test(n)?n:_s}catch{return _s}}function Ky(t){return Wy(t).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wr(t){return`${t.appName}!${t.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=new Map;function pl(t,e){const n=wr(t);ml(n,e),Yy(n,e)}function ml(t,e){const n=hl.get(t);if(n)for(const r of n)r(e)}function Yy(t,e){const n=Jy();n&&n.postMessage({key:t,fid:e}),Xy()}let yt=null;function Jy(){return!yt&&"BroadcastChannel"in self&&(yt=new BroadcastChannel("[Firebase] FID Change"),yt.onmessage=t=>{ml(t.data.key,t.data.fid)}),yt}function Xy(){hl.size===0&&yt&&(yt.close(),yt=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qy="firebase-installations-database",Zy=1,Pt="firebase-installations-store";let Gr=null;function mo(){return Gr||(Gr=xc(Qy,Zy,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Pt)}}})),Gr}async function Zn(t,e){const n=wr(t),s=(await mo()).transaction(Pt,"readwrite"),o=s.objectStore(Pt),i=await o.get(n);return await o.put(e,n),await s.done,(!i||i.fid!==e.fid)&&pl(t,e.fid),e}async function gl(t){const e=wr(t),r=(await mo()).transaction(Pt,"readwrite");await r.objectStore(Pt).delete(e),await r.done}async function br(t,e){const n=wr(t),s=(await mo()).transaction(Pt,"readwrite"),o=s.objectStore(Pt),i=await o.get(n),c=e(i);return c===void 0?await o.delete(n):await o.put(c,n),await s.done,c&&(!i||i.fid!==c.fid)&&pl(t,c.fid),c}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function go(t){let e;const n=await br(t.appConfig,r=>{const s=ev(r),o=tv(t,s);return e=o.registrationPromise,o.installationEntry});return n.fid===_s?{installationEntry:await e}:{installationEntry:n,registrationPromise:e}}function ev(t){const e=t||{fid:Gy(),registrationStatus:0};return yl(e)}function tv(t,e){if(e.registrationStatus===0){if(!navigator.onLine){const s=Promise.reject(Ct.create("app-offline"));return{installationEntry:e,registrationPromise:s}}const n={fid:e.fid,registrationStatus:1,registrationTime:Date.now()},r=nv(t,n);return{installationEntry:n,registrationPromise:r}}else return e.registrationStatus===1?{installationEntry:e,registrationPromise:rv(t)}:{installationEntry:e}}async function nv(t,e){try{const n=await By(t,e);return Zn(t.appConfig,n)}catch(n){throw il(n)&&n.customData.serverCode===409?await gl(t.appConfig):await Zn(t.appConfig,{fid:e.fid,registrationStatus:0}),n}}async function rv(t){let e=await Ei(t.appConfig);for(;e.registrationStatus===1;)await fl(100),e=await Ei(t.appConfig);if(e.registrationStatus===0){const{installationEntry:n,registrationPromise:r}=await go(t);return r||n}return e}function Ei(t){return br(t,e=>{if(!e)throw Ct.create("installation-not-found");return yl(e)})}function yl(t){return sv(t)?{fid:t.fid,registrationStatus:0}:t}function sv(t){return t.registrationStatus===1&&t.registrationTime+rl<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ov({appConfig:t,heartbeatServiceProvider:e},n){const r=iv(t,n),s=zy(t,n),o=e.getImmediate({optional:!0});if(o){const u=await o.getHeartbeatsHeader();u&&s.append("x-firebase-client",u)}const i={installation:{sdkVersion:sl,appId:t.appId}},c={method:"POST",headers:s,body:JSON.stringify(i)},a=await dl(()=>fetch(r,c));if(a.ok){const u=await a.json();return cl(u)}else throw await ll("Generate Auth Token",a)}function iv(t,{fid:e}){return`${al(t)}/${e}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yo(t,e=!1){let n;const r=await br(t.appConfig,o=>{if(!vl(o))throw Ct.create("not-registered");const i=o.authToken;if(!e&&lv(i))return o;if(i.requestStatus===1)return n=av(t,e),o;{if(!navigator.onLine)throw Ct.create("app-offline");const c=dv(o);return n=cv(t,c),c}});return n?await n:r.authToken}async function av(t,e){let n=await _i(t.appConfig);for(;n.authToken.requestStatus===1;)await fl(100),n=await _i(t.appConfig);const r=n.authToken;return r.requestStatus===0?yo(t,e):r}function _i(t){return br(t,e=>{if(!vl(e))throw Ct.create("not-registered");const n=e.authToken;return fv(n)?Object.assign(Object.assign({},e),{authToken:{requestStatus:0}}):e})}async function cv(t,e){try{const n=await ov(t,e),r=Object.assign(Object.assign({},e),{authToken:n});return await Zn(t.appConfig,r),n}catch(n){if(il(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await gl(t.appConfig);else{const r=Object.assign(Object.assign({},e),{authToken:{requestStatus:0}});await Zn(t.appConfig,r)}throw n}}function vl(t){return t!==void 0&&t.registrationStatus===2}function lv(t){return t.requestStatus===2&&!uv(t)}function uv(t){const e=Date.now();return e<t.creationTime||t.creationTime+t.expiresIn<e+My}function dv(t){const e={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},t),{authToken:e})}function fv(t){return t.requestStatus===1&&t.requestTime+rl<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hv(t){const e=t,{installationEntry:n,registrationPromise:r}=await go(e);return r?r.catch(console.error):yo(e).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pv(t,e=!1){const n=t;return await mv(n),(await yo(n,e)).token}async function mv(t){const{registrationPromise:e}=await go(t);e&&await e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gv(t){if(!t||!t.options)throw Kr("App Configuration");if(!t.name)throw Kr("App Name");const e=["projectId","apiKey","appId"];for(const n of e)if(!t.options[n])throw Kr(n);return{appName:t.name,projectId:t.options.projectId,apiKey:t.options.apiKey,appId:t.options.appId}}function Kr(t){return Ct.create("missing-app-config-values",{valueName:t})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wl="installations",yv="installations-internal",vv=t=>{const e=t.getProvider("app").getImmediate(),n=gv(e),r=Gt(e,"heartbeat");return{app:e,appConfig:n,heartbeatServiceProvider:r,_delete:()=>Promise.resolve()}},wv=t=>{const e=t.getProvider("app").getImmediate(),n=Gt(e,wl).getImmediate();return{getId:()=>hv(n),getToken:s=>pv(n,s)}};function bv(){Ve(new Se(wl,vv,"PUBLIC")),Ve(new Se(yv,wv,"PRIVATE"))}bv();xe(nl,po);xe(nl,po,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const er="analytics",xv="firebase_id",Tv="origin",Ev=60*1e3,_v="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",vo="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z=new to("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sv={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},ie=new kt("analytics","Analytics",Sv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Iv(t){if(!t.startsWith(vo)){const e=ie.create("invalid-gtag-resource",{gtagURL:t});return Z.warn(e.message),""}return t}function bl(t){return Promise.all(t.map(e=>e.catch(n=>n)))}function Cv(t,e){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(t,e)),n}function Pv(t,e){const n=Cv("firebase-js-sdk-policy",{createScriptURL:Iv}),r=document.createElement("script"),s=`${vo}?l=${t}&id=${e}`;r.src=n?n?.createScriptURL(s):s,r.async=!0,document.head.appendChild(r)}function Av(t){let e=[];return Array.isArray(window[t])?e=window[t]:window[t]=e,e}async function kv(t,e,n,r,s,o){const i=r[s];try{if(i)await e[i];else{const a=(await bl(n)).find(u=>u.measurementId===s);a&&await e[a.appId]}}catch(c){Z.error(c)}t("config",s,o)}async function Rv(t,e,n,r,s){try{let o=[];if(s&&s.send_to){let i=s.send_to;Array.isArray(i)||(i=[i]);const c=await bl(n);for(const a of i){const u=c.find(h=>h.measurementId===a),f=u&&e[u.appId];if(f)o.push(f);else{o=[];break}}}o.length===0&&(o=Object.values(e)),await Promise.all(o),t("event",r,s||{})}catch(o){Z.error(o)}}function Nv(t,e,n,r){async function s(o,...i){try{if(o==="event"){const[c,a]=i;await Rv(t,e,n,c,a)}else if(o==="config"){const[c,a]=i;await kv(t,e,n,r,c,a)}else if(o==="consent"){const[c,a]=i;t("consent",c,a)}else if(o==="get"){const[c,a,u]=i;t("get",c,a,u)}else if(o==="set"){const[c]=i;t("set",c)}else t(o,...i)}catch(c){Z.error(c)}}return s}function jv(t,e,n,r,s){let o=function(...i){window[r].push(arguments)};return window[s]&&typeof window[s]=="function"&&(o=window[s]),window[s]=Nv(o,t,e,n),{gtagCore:o,wrappedGtag:window[s]}}function Ov(t){const e=window.document.getElementsByTagName("script");for(const n of Object.values(e))if(n.src&&n.src.includes(vo)&&n.src.includes(t))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dv=30,Lv=1e3;class Mv{constructor(e={},n=Lv){this.throttleMetadata=e,this.intervalMillis=n}getThrottleMetadata(e){return this.throttleMetadata[e]}setThrottleMetadata(e,n){this.throttleMetadata[e]=n}deleteThrottleMetadata(e){delete this.throttleMetadata[e]}}const xl=new Mv;function Fv(t){return new Headers({Accept:"application/json","x-goog-api-key":t})}async function $v(t){var e;const{appId:n,apiKey:r}=t,s={method:"GET",headers:Fv(r)},o=_v.replace("{app-id}",n),i=await fetch(o,s);if(i.status!==200&&i.status!==304){let c="";try{const a=await i.json();!((e=a.error)===null||e===void 0)&&e.message&&(c=a.error.message)}catch{}throw ie.create("config-fetch-failed",{httpStatus:i.status,responseMessage:c})}return i.json()}async function Uv(t,e=xl,n){const{appId:r,apiKey:s,measurementId:o}=t.options;if(!r)throw ie.create("no-app-id");if(!s){if(o)return{measurementId:o,appId:r};throw ie.create("no-api-key")}const i=e.getThrottleMetadata(r)||{backoffCount:0,throttleEndTimeMillis:Date.now()},c=new Hv;return setTimeout(async()=>{c.abort()},Ev),Tl({appId:r,apiKey:s,measurementId:o},i,c,e)}async function Tl(t,{throttleEndTimeMillis:e,backoffCount:n},r,s=xl){var o;const{appId:i,measurementId:c}=t;try{await zv(r,e)}catch(a){if(c)return Z.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${a?.message}]`),{appId:i,measurementId:c};throw a}try{const a=await $v(t);return s.deleteThrottleMetadata(i),a}catch(a){const u=a;if(!Vv(u)){if(s.deleteThrottleMetadata(i),c)return Z.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${c} provided in the "measurementId" field in the local Firebase config. [${u?.message}]`),{appId:i,measurementId:c};throw a}const f=Number((o=u?.customData)===null||o===void 0?void 0:o.httpStatus)===503?Xo(n,s.intervalMillis,Dv):Xo(n,s.intervalMillis),h={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return s.setThrottleMetadata(i,h),Z.debug(`Calling attemptFetch again in ${f} millis`),Tl(t,h,r,s)}}function zv(t,e){return new Promise((n,r)=>{const s=Math.max(e-Date.now(),0),o=setTimeout(n,s);t.addEventListener(()=>{clearTimeout(o),r(ie.create("fetch-throttle",{throttleEndTimeMillis:e}))})})}function Vv(t){if(!(t instanceof Pe)||!t.customData)return!1;const e=Number(t.customData.httpStatus);return e===429||e===500||e===503||e===504}class Hv{constructor(){this.listeners=[]}addEventListener(e){this.listeners.push(e)}abort(){this.listeners.forEach(e=>e())}}async function Bv(t,e,n,r,s){if(s&&s.global){t("event",n,r);return}else{const o=await e,i=Object.assign(Object.assign({},r),{send_to:o});t("event",n,i)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wv(){if(Zs())try{await eo()}catch(t){return Z.warn(ie.create("indexeddb-unavailable",{errorInfo:t?.toString()}).message),!1}else return Z.warn(ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function qv(t,e,n,r,s,o,i){var c;const a=Uv(t);a.then(m=>{n[m.measurementId]=m.appId,t.options.measurementId&&m.measurementId!==t.options.measurementId&&Z.warn(`The measurement ID in the local Firebase config (${t.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Z.error(m)),e.push(a);const u=Wv().then(m=>{if(m)return r.getId()}),[f,h]=await Promise.all([a,u]);Ov(o)||Pv(o,f.measurementId),s("js",new Date);const p=(c=i?.config)!==null&&c!==void 0?c:{};return p[Tv]="firebase",p.update=!0,h!=null&&(p[xv]=h),s("config",f.measurementId,p),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gv{constructor(e){this.app=e}_delete(){return delete rn[this.app.options.appId],Promise.resolve()}}let rn={},Si=[];const Ii={};let Yr="dataLayer",Kv="gtag",Ci,El,Pi=!1;function Yv(){const t=[];if(Qs()&&t.push("This is a browser extension environment."),vc()||t.push("Cookies are not available."),t.length>0){const e=t.map((r,s)=>`(${s+1}) ${r}`).join(" "),n=ie.create("invalid-analytics-context",{errorInfo:e});Z.warn(n.message)}}function Jv(t,e,n){Yv();const r=t.options.appId;if(!r)throw ie.create("no-app-id");if(!t.options.apiKey)if(t.options.measurementId)Z.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${t.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw ie.create("no-api-key");if(rn[r]!=null)throw ie.create("already-exists",{id:r});if(!Pi){Av(Yr);const{wrappedGtag:o,gtagCore:i}=jv(rn,Si,Ii,Yr,Kv);El=o,Ci=i,Pi=!0}return rn[r]=qv(t,Si,Ii,e,Ci,Yr,n),new Gv(t)}function Xv(t=Ec()){t=ct(t);const e=Gt(t,er);return e.isInitialized()?e.getImmediate():Qv(t)}function Qv(t,e={}){const n=Gt(t,er);if(n.isInitialized()){const s=n.getImmediate();if(St(e,n.getOptions()))return s;throw ie.create("already-initialized")}return n.initialize({options:e})}async function Zv(){if(Qs()||!vc()||!Zs())return!1;try{return await eo()}catch{return!1}}function e0(t,e,n,r){t=ct(t),Bv(El,rn[t.app.options.appId],e,n,r).catch(s=>Z.error(s))}const Ai="@firebase/analytics",ki="0.10.17";function t0(){Ve(new Se(er,(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),s=e.getProvider("installations-internal").getImmediate();return Jv(r,s,n)},"PUBLIC")),Ve(new Se("analytics-internal",t,"PRIVATE")),xe(Ai,ki),xe(Ai,ki,"esm2017");function t(e){try{const n=e.getProvider(er).getImmediate();return{logEvent:(r,s,o)=>e0(n,r,s,o)}}catch(n){throw ie.create("interop-component-reg-failed",{reason:n})}}}t0();const n0={apiKey:"",authDomain:"",projectId:"",storageBucket:"",messagingSenderId:"",appId:"",measurementId:""},_l=Tc(n0),r0=Ny(_l);Zv().then(t=>{t&&Xv(_l)});class s0{constructor(){this.tokenKey="medusavr_access_token",this.refreshKey="medusavr_refresh_token",this.userKey="medusavr_user",this.register=async e=>{try{const{secureApiRequest:n}=await k(async()=>{const{secureApiRequest:o}=await import("./csrfProtection-K_K8SFs5.js");return{secureApiRequest:o}},__vite__mapDeps([0,1,2,3,4,5,6])),r=await n("POST","/api/auth/register",e);if(!r.ok){const o=await r.json().catch(()=>({message:"Registration failed"}));throw new Error(o.message||`Registration failed with status ${r.status}`)}const s=await r.json();return this.setTokens(s.accessToken,s.refreshToken,s.user),s}catch(n){throw console.error("Registration error in authService:",n),n}},this.login=async e=>{const{secureApiRequest:n}=await k(async()=>{const{secureApiRequest:o}=await import("./csrfProtection-K_K8SFs5.js");return{secureApiRequest:o}},__vite__mapDeps([0,1,2,3,4,5,6])),s=await(await n("POST","/api/auth/login",e)).json();return this.setTokens(s.accessToken,s.refreshToken,s.user),s},this.refreshAccessToken=async()=>{const e=this.getRefreshToken();if(!e)throw new Error("No refresh token available");const r=await(await E("POST","/api/auth/refresh",{refreshToken:e})).json();return localStorage.setItem(this.tokenKey,r.accessToken),r.refreshToken&&localStorage.setItem(this.refreshKey,r.refreshToken),r.accessToken},this.logout=async()=>{try{const{secureApiRequest:e}=await k(async()=>{const{secureApiRequest:n}=await import("./csrfProtection-K_K8SFs5.js");return{secureApiRequest:n}},__vite__mapDeps([0,1,2,3,4,5,6]));await e("POST","/api/auth/logout",{})}catch(e){console.warn("Logout request failed:",e)}finally{this.clearTokens()}},this.getProfile=async()=>{const n=await(await E("GET","/api/auth/me")).json();return localStorage.setItem(this.userKey,JSON.stringify(n)),n},this.updateProfile=async e=>{const r=await(await E("PUT","/api/auth/me",e)).json();return localStorage.setItem(this.userKey,JSON.stringify(r)),r},this.changePassword=async e=>{await E("PATCH","/api/auth/me/password",e)},this.requestPasswordReset=async e=>{await E("POST","/api/auth/password-reset/request",e)},this.confirmPasswordReset=async e=>{await E("POST","/api/auth/password-reset/confirm",e)},this.uploadAvatar=async e=>{const n=new FormData;n.append("file",e);const r=this.getUser();if(!r)throw new Error("User not authenticated");const s=await fetch(`/api/users/${r.id}/avatar`,{method:"POST",body:n,headers:{Authorization:`Bearer ${this.getAccessToken()}`}});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);return await s.json()},this.deleteAvatar=async()=>{const e=this.getUser();if(!e)throw new Error("User not authenticated");await E("DELETE",`/api/users/${e.id}/avatar`)},this.signInWithGoogle=async()=>{try{const e=new Oe;e.addScope("profile"),e.addScope("email"),e.setCustomParameters({prompt:"select_account"}),console.log("üîÑ Starting Google sign-in...");let n;try{n=await zg(r0,e)}catch(i){throw i.code==="auth/popup-blocked"||i.message?.includes("popup")||i.message?.includes("Cross-Origin-Opener-Policy")?(console.warn("üö´ Popup blocked, instructing user to allow popups"),new Error("Please allow popups for this site and try again. You may need to click the Google sign-in button again.")):i}console.log("‚úÖ Google sign-in successful:",n.user.email);const r=await n.user.getIdToken();console.log("üîë Got ID token, sending to backend...");const o=await(await E("POST","/api/auth/google",{idToken:r})).json();return console.log("‚úÖ Backend authentication successful"),this.setTokens(o.accessToken,o.refreshToken,o.user),o}catch(e){throw console.error("‚ùå Google sign-in error:",e),e}},this.signUpWithGoogle=async()=>this.signInWithGoogle(),this.handleGoogleCallback=async e=>{const r=await(await E("POST","/api/auth/google/callback",{code:e})).json();return this.setTokens(r.accessToken,r.refreshToken,r.user),r},this.ensureValidToken=async()=>{let e=this.getAccessToken();if(!e)throw new Error("No access token available");return this.isTokenExpired(e)&&(e=await this.refreshAccessToken()),e}}getAccessToken(){return localStorage.getItem(this.tokenKey)}getRefreshToken(){return localStorage.getItem(this.refreshKey)}getUser(){const e=localStorage.getItem(this.userKey);return e?JSON.parse(e):null}setTokens(e,n,r){localStorage.setItem(this.tokenKey,e),localStorage.setItem(this.refreshKey,n),localStorage.setItem(this.userKey,JSON.stringify(r))}clearTokens(){localStorage.removeItem(this.tokenKey),localStorage.removeItem(this.refreshKey),localStorage.removeItem(this.userKey)}isAuthenticated(){return!!this.getAccessToken()&&!!this.getUser()}clearInvalidTokens(){console.log("üßπ Clearing potentially invalid tokens"),this.clearTokens()}isTokenExpired(e){try{const n=JSON.parse(atob(e.split(".")[1]));return Date.now()>=n.exp*1e3}catch{return!0}}}const ne=new s0,Sl=d.createContext(null),o0=({children:t})=>{const[e,n]=d.useState(ne.getUser()),[r,s]=d.useState(!1),o=or(),i=ne.isAuthenticated();d.useEffect(()=>{},[e,i]);const c=Ot({mutationFn:ne.login,onSuccess:y=>{n(y.user),o.invalidateQueries()}}),a=Ot({mutationFn:ne.register,onSuccess:y=>{n(y.user),o.invalidateQueries()}}),u=Ot({mutationFn:ne.updateProfile,onSuccess:y=>{n(y),o.invalidateQueries({queryKey:["auth","me"]})}}),f=d.useCallback(async y=>{s(!0);try{await c.mutateAsync(y)}finally{s(!1)}},[c]),h=d.useCallback(async y=>{s(!0);try{await a.mutateAsync(y)}catch(b){throw console.error("Registration error in useAuth:",b),b}finally{s(!1)}},[a]),p=d.useCallback(async()=>{s(!0);try{const y=await ne.signInWithGoogle();n(y.user),o.invalidateQueries()}finally{s(!1)}},[o]),m=d.useCallback(async()=>{s(!0);try{const y=await ne.signUpWithGoogle();n(y.user),o.invalidateQueries()}finally{s(!1)}},[o]),g=d.useCallback(async()=>{s(!0);try{await ne.logout(),n(null),o.clear()}finally{s(!1)}},[o]),w=d.useCallback(async y=>{await u.mutateAsync(y)},[u]),v=d.useCallback(async()=>{if(i)try{const y=await ne.getProfile();n(y)}catch(y){console.error("Failed to refresh user:",y),await g()}},[i,g]);d.useEffect(()=>{i&&!e&&v()},[i,e,v]);const x={user:e,isAuthenticated:i,isLoading:r||c.isPending||a.isPending,login:f,register:h,loginWithGoogle:p,registerWithGoogle:m,logout:g,updateProfile:w,refreshUser:v};return A.createElement(Sl.Provider,{value:x},t)},Rt=()=>{const t=d.useContext(Sl);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t};var i0=Object.defineProperty,a0=(t,e,n)=>e in t?i0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,Jr=(t,e,n)=>(a0(t,typeof e!="symbol"?e+"":e,n),n);let c0=class{constructor(){Jr(this,"current",this.detect()),Jr(this,"handoffState","pending"),Jr(this,"currentId",0)}set(e){this.current!==e&&(this.handoffState="pending",this.currentId=0,this.current=e)}reset(){this.set(this.detect())}nextId(){return++this.currentId}get isServer(){return this.current==="server"}get isClient(){return this.current==="client"}detect(){return typeof window>"u"||typeof document>"u"?"server":"client"}handoff(){this.handoffState==="pending"&&(this.handoffState="complete")}get isHandoffComplete(){return this.handoffState==="complete"}},Ee=new c0;function xr(t){var e,n;return Ee.isServer?null:t?"ownerDocument"in t?t.ownerDocument:"current"in t?(n=(e=t.current)==null?void 0:e.ownerDocument)!=null?n:document:null:document}function Tr(t){typeof queueMicrotask=="function"?queueMicrotask(t):Promise.resolve().then(t).catch(e=>setTimeout(()=>{throw e}))}function We(){let t=[],e={addEventListener(n,r,s,o){return n.addEventListener(r,s,o),e.add(()=>n.removeEventListener(r,s,o))},requestAnimationFrame(...n){let r=requestAnimationFrame(...n);return e.add(()=>cancelAnimationFrame(r))},nextFrame(...n){return e.requestAnimationFrame(()=>e.requestAnimationFrame(...n))},setTimeout(...n){let r=setTimeout(...n);return e.add(()=>clearTimeout(r))},microTask(...n){let r={current:!0};return Tr(()=>{r.current&&n[0]()}),e.add(()=>{r.current=!1})},style(n,r,s){let o=n.style.getPropertyValue(r);return Object.assign(n.style,{[r]:s}),this.add(()=>{Object.assign(n.style,{[r]:o})})},group(n){let r=We();return n(r),this.add(()=>r.dispose())},add(n){return t.includes(n)||t.push(n),()=>{let r=t.indexOf(n);if(r>=0)for(let s of t.splice(r,1))s()}},dispose(){for(let n of t.splice(0))n()}};return e}function wo(){let[t]=d.useState(We);return d.useEffect(()=>()=>t.dispose(),[t]),t}let J=(t,e)=>{Ee.isServer?d.useEffect(t,e):d.useLayoutEffect(t,e)};function Nt(t){let e=d.useRef(t);return J(()=>{e.current=t},[t]),e}let q=function(t){let e=Nt(t);return A.useCallback((...n)=>e.current(...n),[e])},l0=d.createContext(void 0);function u0(){return d.useContext(l0)}function Ss(...t){return Array.from(new Set(t.flatMap(e=>typeof e=="string"?e.split(" "):[]))).filter(Boolean).join(" ")}function Be(t,e,...n){if(t in e){let s=e[t];return typeof s=="function"?s(...n):s}let r=new Error(`Tried to handle "${t}" but there is no handler defined. Only defined handlers are: ${Object.keys(e).map(s=>`"${s}"`).join(", ")}.`);throw Error.captureStackTrace&&Error.captureStackTrace(r,Be),r}var tr=(t=>(t[t.None=0]="None",t[t.RenderStrategy=1]="RenderStrategy",t[t.Static=2]="Static",t))(tr||{}),Qe=(t=>(t[t.Unmount=0]="Unmount",t[t.Hidden=1]="Hidden",t))(Qe||{});function ue(){let t=f0();return d.useCallback(e=>d0({mergeRefs:t,...e}),[t])}function d0({ourProps:t,theirProps:e,slot:n,defaultTag:r,features:s,visible:o=!0,name:i,mergeRefs:c}){c=c??h0;let a=Il(e,t);if(o)return An(a,n,r,i,c);let u=s??0;if(u&2){let{static:f=!1,...h}=a;if(f)return An(h,n,r,i,c)}if(u&1){let{unmount:f=!0,...h}=a;return Be(f?0:1,{0(){return null},1(){return An({...h,hidden:!0,style:{display:"none"}},n,r,i,c)}})}return An(a,n,r,i,c)}function An(t,e={},n,r,s){let{as:o=n,children:i,refName:c="ref",...a}=Xr(t,["unmount","static"]),u=t.ref!==void 0?{[c]:t.ref}:{},f=typeof i=="function"?i(e):i;"className"in a&&a.className&&typeof a.className=="function"&&(a.className=a.className(e)),a["aria-labelledby"]&&a["aria-labelledby"]===a.id&&(a["aria-labelledby"]=void 0);let h={};if(e){let p=!1,m=[];for(let[g,w]of Object.entries(e))typeof w=="boolean"&&(p=!0),w===!0&&m.push(g.replace(/([A-Z])/g,v=>`-${v.toLowerCase()}`));if(p){h["data-headlessui-state"]=m.join(" ");for(let g of m)h[`data-${g}`]=""}}if(o===d.Fragment&&(Object.keys(pt(a)).length>0||Object.keys(pt(h)).length>0))if(!d.isValidElement(f)||Array.isArray(f)&&f.length>1){if(Object.keys(pt(a)).length>0)throw new Error(['Passing props on "Fragment"!',"",`The current component <${r} /> is rendering a "Fragment".`,"However we need to passthrough the following props:",Object.keys(pt(a)).concat(Object.keys(pt(h))).map(p=>`  - ${p}`).join(`
`),"","You can apply a few solutions:",['Add an `as="..."` prop, to ensure that we render an actual element instead of a "Fragment".',"Render a single element as the child so that we can forward the props onto that element."].map(p=>`  - ${p}`).join(`
`)].join(`
`))}else{let p=f.props,m=p?.className,g=typeof m=="function"?(...x)=>Ss(m(...x),a.className):Ss(m,a.className),w=g?{className:g}:{},v=Il(f.props,pt(Xr(a,["ref"])));for(let x in h)x in v&&delete h[x];return d.cloneElement(f,Object.assign({},v,h,u,{ref:s(p0(f),u.ref)},w))}return d.createElement(o,Object.assign({},Xr(a,["ref"]),o!==d.Fragment&&u,o!==d.Fragment&&h),f)}function f0(){let t=d.useRef([]),e=d.useCallback(n=>{for(let r of t.current)r!=null&&(typeof r=="function"?r(n):r.current=n)},[]);return(...n)=>{if(!n.every(r=>r==null))return t.current=n,e}}function h0(...t){return t.every(e=>e==null)?void 0:e=>{for(let n of t)n!=null&&(typeof n=="function"?n(e):n.current=e)}}function Il(...t){if(t.length===0)return{};if(t.length===1)return t[0];let e={},n={};for(let r of t)for(let s in r)s.startsWith("on")&&typeof r[s]=="function"?(n[s]!=null||(n[s]=[]),n[s].push(r[s])):e[s]=r[s];if(e.disabled||e["aria-disabled"])for(let r in n)/^(on(?:Click|Pointer|Mouse|Key)(?:Down|Up|Press)?)$/.test(r)&&(n[r]=[s=>{var o;return(o=s?.preventDefault)==null?void 0:o.call(s)}]);for(let r in n)Object.assign(e,{[r](s,...o){let i=n[r];for(let c of i){if((s instanceof Event||s?.nativeEvent instanceof Event)&&s.defaultPrevented)return;c(s,...o)}}});return e}function ee(t){var e;return Object.assign(d.forwardRef(t),{displayName:(e=t.displayName)!=null?e:t.name})}function pt(t){let e=Object.assign({},t);for(let n in e)e[n]===void 0&&delete e[n];return e}function Xr(t,e=[]){let n=Object.assign({},t);for(let r of e)r in n&&delete n[r];return n}function p0(t){return A.version.split(".")[0]>="19"?t.props.ref:t.ref}let m0="span";var nr=(t=>(t[t.None=1]="None",t[t.Focusable=2]="Focusable",t[t.Hidden=4]="Hidden",t))(nr||{});function g0(t,e){var n;let{features:r=1,...s}=t,o={ref:e,"aria-hidden":(r&2)===2?!0:(n=s["aria-hidden"])!=null?n:void 0,hidden:(r&4)===4?!0:void 0,style:{position:"fixed",top:1,left:1,width:1,height:0,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0",...(r&4)===4&&(r&2)!==2&&{display:"none"}}};return ue()({ourProps:o,theirProps:s,slot:{},defaultTag:m0,name:"Hidden"})}let Is=ee(g0);function Cl(t){return typeof t!="object"||t===null?!1:"nodeType"in t}function ot(t){return Cl(t)&&"tagName"in t}function At(t){return ot(t)&&"accessKey"in t}function Ze(t){return ot(t)&&"tabIndex"in t}function y0(t){return ot(t)&&"style"in t}function v0(t){return At(t)&&t.nodeName==="IFRAME"}function w0(t){return At(t)&&t.nodeName==="INPUT"}let Pl=Symbol();function b0(t,e=!0){return Object.assign(t,{[Pl]:e})}function Ae(...t){let e=d.useRef(t);d.useEffect(()=>{e.current=t},[t]);let n=q(r=>{for(let s of e.current)s!=null&&(typeof s=="function"?s(r):s.current=r)});return t.every(r=>r==null||r?.[Pl])?void 0:n}let bo=d.createContext(null);bo.displayName="DescriptionContext";function Al(){let t=d.useContext(bo);if(t===null){let e=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(e,Al),e}return t}function x0(){let[t,e]=d.useState([]);return[t.length>0?t.join(" "):void 0,d.useMemo(()=>function(n){let r=q(o=>(e(i=>[...i,o]),()=>e(i=>{let c=i.slice(),a=c.indexOf(o);return a!==-1&&c.splice(a,1),c}))),s=d.useMemo(()=>({register:r,slot:n.slot,name:n.name,props:n.props,value:n.value}),[r,n.slot,n.name,n.props,n.value]);return A.createElement(bo.Provider,{value:s},n.children)},[e])]}let T0="p";function E0(t,e){let n=d.useId(),r=u0(),{id:s=`headlessui-description-${n}`,...o}=t,i=Al(),c=Ae(e);J(()=>i.register(s),[s,i.register]);let a=r||!1,u=d.useMemo(()=>({...i.slot,disabled:a}),[i.slot,a]),f={ref:c,...i.props,id:s};return ue()({ourProps:f,theirProps:o,slot:u,defaultTag:T0,name:i.name||"Description"})}let _0=ee(E0),S0=Object.assign(_0,{});var kl=(t=>(t.Space=" ",t.Enter="Enter",t.Escape="Escape",t.Backspace="Backspace",t.Delete="Delete",t.ArrowLeft="ArrowLeft",t.ArrowUp="ArrowUp",t.ArrowRight="ArrowRight",t.ArrowDown="ArrowDown",t.Home="Home",t.End="End",t.PageUp="PageUp",t.PageDown="PageDown",t.Tab="Tab",t))(kl||{});let I0=d.createContext(()=>{});function C0({value:t,children:e}){return A.createElement(I0.Provider,{value:t},e)}let Rl=class extends Map{constructor(e){super(),this.factory=e}get(e){let n=super.get(e);return n===void 0&&(n=this.factory(e),this.set(e,n)),n}};var P0=Object.defineProperty,A0=(t,e,n)=>e in t?P0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,k0=(t,e,n)=>(A0(t,e+"",n),n),Nl=(t,e,n)=>{if(!e.has(t))throw TypeError("Cannot "+n)},ce=(t,e,n)=>(Nl(t,e,"read from private field"),n?n.call(t):e.get(t)),Qr=(t,e,n)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,n)},Ri=(t,e,n,r)=>(Nl(t,e,"write to private field"),e.set(t,n),n),ye,Xt,Qt;let R0=class{constructor(e){Qr(this,ye,{}),Qr(this,Xt,new Rl(()=>new Set)),Qr(this,Qt,new Set),k0(this,"disposables",We()),Ri(this,ye,e),Ee.isServer&&this.disposables.microTask(()=>{this.dispose()})}dispose(){this.disposables.dispose()}get state(){return ce(this,ye)}subscribe(e,n){if(Ee.isServer)return()=>{};let r={selector:e,callback:n,current:e(ce(this,ye))};return ce(this,Qt).add(r),this.disposables.add(()=>{ce(this,Qt).delete(r)})}on(e,n){return Ee.isServer?()=>{}:(ce(this,Xt).get(e).add(n),this.disposables.add(()=>{ce(this,Xt).get(e).delete(n)}))}send(e){let n=this.reduce(ce(this,ye),e);if(n!==ce(this,ye)){Ri(this,ye,n);for(let r of ce(this,Qt)){let s=r.selector(ce(this,ye));jl(r.current,s)||(r.current=s,r.callback(s))}for(let r of ce(this,Xt).get(e.type))r(ce(this,ye),e)}}};ye=new WeakMap,Xt=new WeakMap,Qt=new WeakMap;function jl(t,e){return Object.is(t,e)?!0:typeof t!="object"||t===null||typeof e!="object"||e===null?!1:Array.isArray(t)&&Array.isArray(e)?t.length!==e.length?!1:Zr(t[Symbol.iterator](),e[Symbol.iterator]()):t instanceof Map&&e instanceof Map||t instanceof Set&&e instanceof Set?t.size!==e.size?!1:Zr(t.entries(),e.entries()):Ni(t)&&Ni(e)?Zr(Object.entries(t)[Symbol.iterator](),Object.entries(e)[Symbol.iterator]()):!1}function Zr(t,e){do{let n=t.next(),r=e.next();if(n.done&&r.done)return!0;if(n.done||r.done||!Object.is(n.value,r.value))return!1}while(!0)}function Ni(t){if(Object.prototype.toString.call(t)!=="[object Object]")return!1;let e=Object.getPrototypeOf(t);return e===null||Object.getPrototypeOf(e)===null}var N0=Object.defineProperty,j0=(t,e,n)=>e in t?N0(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,ji=(t,e,n)=>(j0(t,typeof e!="symbol"?e+"":e,n),n),O0=(t=>(t[t.Push=0]="Push",t[t.Pop=1]="Pop",t))(O0||{});let D0={0(t,e){let n=e.id,r=t.stack,s=t.stack.indexOf(n);if(s!==-1){let o=t.stack.slice();return o.splice(s,1),o.push(n),r=o,{...t,stack:r}}return{...t,stack:[...t.stack,n]}},1(t,e){let n=e.id,r=t.stack.indexOf(n);if(r===-1)return t;let s=t.stack.slice();return s.splice(r,1),{...t,stack:s}}},L0=class Ol extends R0{constructor(){super(...arguments),ji(this,"actions",{push:e=>this.send({type:0,id:e}),pop:e=>this.send({type:1,id:e})}),ji(this,"selectors",{isTop:(e,n)=>e.stack[e.stack.length-1]===n,inStack:(e,n)=>e.stack.includes(n)})}static new(){return new Ol({stack:[]})}reduce(e,n){return Be(n.type,D0,e,n)}};const Dl=new Rl(()=>L0.new());var Ll={exports:{}},Ml={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bn=d;function M0(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var F0=typeof Object.is=="function"?Object.is:M0,$0=bn.useSyncExternalStore,U0=bn.useRef,z0=bn.useEffect,V0=bn.useMemo,H0=bn.useDebugValue;Ml.useSyncExternalStoreWithSelector=function(t,e,n,r,s){var o=U0(null);if(o.current===null){var i={hasValue:!1,value:null};o.current=i}else i=o.current;o=V0(function(){function a(m){if(!u){if(u=!0,f=m,m=r(m),s!==void 0&&i.hasValue){var g=i.value;if(s(g,m))return h=g}return h=m}if(g=h,F0(f,m))return g;var w=r(m);return s!==void 0&&s(g,w)?(f=m,g):(f=m,h=w)}var u=!1,f,h,p=n===void 0?null:n;return[function(){return a(e())},p===null?void 0:function(){return a(p())}]},[e,n,r,s]);var c=$0(t,o[0],o[1]);return z0(function(){i.hasValue=!0,i.value=c},[c]),H0(c),c};Ll.exports=Ml;var B0=Ll.exports;function Fl(t,e,n=jl){return B0.useSyncExternalStoreWithSelector(q(r=>t.subscribe(W0,r)),q(()=>t.state),q(()=>t.state),q(e),n)}function W0(t){return t}function xn(t,e){let n=d.useId(),r=Dl.get(e),[s,o]=Fl(r,d.useCallback(i=>[r.selectors.isTop(i,n),r.selectors.inStack(i,n)],[r,n]));return J(()=>{if(t)return r.actions.push(n),()=>r.actions.pop(n)},[r,t,n]),t?o?s:!0:!1}let Cs=new Map,sn=new Map;function Oi(t){var e;let n=(e=sn.get(t))!=null?e:0;return sn.set(t,n+1),n!==0?()=>Di(t):(Cs.set(t,{"aria-hidden":t.getAttribute("aria-hidden"),inert:t.inert}),t.setAttribute("aria-hidden","true"),t.inert=!0,()=>Di(t))}function Di(t){var e;let n=(e=sn.get(t))!=null?e:1;if(n===1?sn.delete(t):sn.set(t,n-1),n!==1)return;let r=Cs.get(t);r&&(r["aria-hidden"]===null?t.removeAttribute("aria-hidden"):t.setAttribute("aria-hidden",r["aria-hidden"]),t.inert=r.inert,Cs.delete(t))}function q0(t,{allowed:e,disallowed:n}={}){let r=xn(t,"inert-others");J(()=>{var s,o;if(!r)return;let i=We();for(let a of(s=n?.())!=null?s:[])a&&i.add(Oi(a));let c=(o=e?.())!=null?o:[];for(let a of c){if(!a)continue;let u=xr(a);if(!u)continue;let f=a.parentElement;for(;f&&f!==u.body;){for(let h of f.children)c.some(p=>h.contains(p))||i.add(Oi(h));f=f.parentElement}}return i.dispose},[r,e,n])}function G0(t,e,n){let r=Nt(s=>{let o=s.getBoundingClientRect();o.x===0&&o.y===0&&o.width===0&&o.height===0&&n()});d.useEffect(()=>{if(!t)return;let s=e===null?null:At(e)?e:e.current;if(!s)return;let o=We();if(typeof ResizeObserver<"u"){let i=new ResizeObserver(()=>r.current(s));i.observe(s),o.add(()=>i.disconnect())}if(typeof IntersectionObserver<"u"){let i=new IntersectionObserver(()=>r.current(s));i.observe(s),o.add(()=>i.disconnect())}return()=>o.dispose()},[e,r,t])}let rr=["[contentEditable=true]","[tabindex]","a[href]","area[href]","button:not([disabled])","iframe","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].map(t=>`${t}:not([tabindex='-1'])`).join(","),K0=["[data-autofocus]"].map(t=>`${t}:not([tabindex='-1'])`).join(",");var De=(t=>(t[t.First=1]="First",t[t.Previous=2]="Previous",t[t.Next=4]="Next",t[t.Last=8]="Last",t[t.WrapAround=16]="WrapAround",t[t.NoScroll=32]="NoScroll",t[t.AutoFocus=64]="AutoFocus",t))(De||{}),Ps=(t=>(t[t.Error=0]="Error",t[t.Overflow=1]="Overflow",t[t.Success=2]="Success",t[t.Underflow=3]="Underflow",t))(Ps||{}),Y0=(t=>(t[t.Previous=-1]="Previous",t[t.Next=1]="Next",t))(Y0||{});function J0(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(rr)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}function X0(t=document.body){return t==null?[]:Array.from(t.querySelectorAll(K0)).sort((e,n)=>Math.sign((e.tabIndex||Number.MAX_SAFE_INTEGER)-(n.tabIndex||Number.MAX_SAFE_INTEGER)))}var $l=(t=>(t[t.Strict=0]="Strict",t[t.Loose=1]="Loose",t))($l||{});function Q0(t,e=0){var n;return t===((n=xr(t))==null?void 0:n.body)?!1:Be(e,{0(){return t.matches(rr)},1(){let r=t;for(;r!==null;){if(r.matches(rr))return!0;r=r.parentElement}return!1}})}var Z0=(t=>(t[t.Keyboard=0]="Keyboard",t[t.Mouse=1]="Mouse",t))(Z0||{});typeof window<"u"&&typeof document<"u"&&(document.addEventListener("keydown",t=>{t.metaKey||t.altKey||t.ctrlKey||(document.documentElement.dataset.headlessuiFocusVisible="")},!0),document.addEventListener("click",t=>{t.detail===1?delete document.documentElement.dataset.headlessuiFocusVisible:t.detail===0&&(document.documentElement.dataset.headlessuiFocusVisible="")},!0));function Fe(t){t?.focus({preventScroll:!0})}let ew=["textarea","input"].join(",");function tw(t){var e,n;return(n=(e=t?.matches)==null?void 0:e.call(t,ew))!=null?n:!1}function nw(t,e=n=>n){return t.slice().sort((n,r)=>{let s=e(n),o=e(r);if(s===null||o===null)return 0;let i=s.compareDocumentPosition(o);return i&Node.DOCUMENT_POSITION_FOLLOWING?-1:i&Node.DOCUMENT_POSITION_PRECEDING?1:0})}function on(t,e,{sorted:n=!0,relativeTo:r=null,skipElements:s=[]}={}){let o=Array.isArray(t)?t.length>0?t[0].ownerDocument:document:t.ownerDocument,i=Array.isArray(t)?n?nw(t):t:e&64?X0(t):J0(t);s.length>0&&i.length>1&&(i=i.filter(m=>!s.some(g=>g!=null&&"current"in g?g?.current===m:g===m))),r=r??o.activeElement;let c=(()=>{if(e&5)return 1;if(e&10)return-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),a=(()=>{if(e&1)return 0;if(e&2)return Math.max(0,i.indexOf(r))-1;if(e&4)return Math.max(0,i.indexOf(r))+1;if(e&8)return i.length-1;throw new Error("Missing Focus.First, Focus.Previous, Focus.Next or Focus.Last")})(),u=e&32?{preventScroll:!0}:{},f=0,h=i.length,p;do{if(f>=h||f+h<=0)return 0;let m=a+f;if(e&16)m=(m+h)%h;else{if(m<0)return 3;if(m>=h)return 1}p=i[m],p?.focus(u),f+=c}while(p!==o.activeElement);return e&6&&tw(p)&&p.select(),2}function Ul(){return/iPhone/gi.test(window.navigator.platform)||/Mac/gi.test(window.navigator.platform)&&window.navigator.maxTouchPoints>0}function rw(){return/Android/gi.test(window.navigator.userAgent)}function Li(){return Ul()||rw()}function kn(t,e,n,r){let s=Nt(n);d.useEffect(()=>{if(!t)return;function o(i){s.current(i)}return document.addEventListener(e,o,r),()=>document.removeEventListener(e,o,r)},[t,e,r])}function zl(t,e,n,r){let s=Nt(n);d.useEffect(()=>{if(!t)return;function o(i){s.current(i)}return window.addEventListener(e,o,r),()=>window.removeEventListener(e,o,r)},[t,e,r])}const Mi=30;function sw(t,e,n){let r=Nt(n),s=d.useCallback(function(c,a){if(c.defaultPrevented)return;let u=a(c);if(u===null||!u.getRootNode().contains(u)||!u.isConnected)return;let f=function h(p){return typeof p=="function"?h(p()):Array.isArray(p)||p instanceof Set?p:[p]}(e);for(let h of f)if(h!==null&&(h.contains(u)||c.composed&&c.composedPath().includes(h)))return;return!Q0(u,$l.Loose)&&u.tabIndex!==-1&&c.preventDefault(),r.current(c,u)},[r,e]),o=d.useRef(null);kn(t,"pointerdown",c=>{var a,u;Li()||(o.current=((u=(a=c.composedPath)==null?void 0:a.call(c))==null?void 0:u[0])||c.target)},!0),kn(t,"pointerup",c=>{if(Li()||!o.current)return;let a=o.current;return o.current=null,s(c,()=>a)},!0);let i=d.useRef({x:0,y:0});kn(t,"touchstart",c=>{i.current.x=c.touches[0].clientX,i.current.y=c.touches[0].clientY},!0),kn(t,"touchend",c=>{let a={x:c.changedTouches[0].clientX,y:c.changedTouches[0].clientY};if(!(Math.abs(a.x-i.current.x)>=Mi||Math.abs(a.y-i.current.y)>=Mi))return s(c,()=>Ze(c.target)?c.target:null)},!0),zl(t,"blur",c=>s(c,()=>v0(window.document.activeElement)?window.document.activeElement:null),!0)}function Er(...t){return d.useMemo(()=>xr(...t),[...t])}function Vl(t,e,n,r){let s=Nt(n);d.useEffect(()=>{t=t??window;function o(i){s.current(i)}return t.addEventListener(e,o,r),()=>t.removeEventListener(e,o,r)},[t,e,r])}function ow(t){return d.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getSnapshot)}function iw(t,e){let n=t(),r=new Set;return{getSnapshot(){return n},subscribe(s){return r.add(s),()=>r.delete(s)},dispatch(s,...o){let i=e[s].call(n,...o);i&&(n=i,r.forEach(c=>c()))}}}function aw(){let t;return{before({doc:e}){var n;let r=e.documentElement,s=(n=e.defaultView)!=null?n:window;t=Math.max(0,s.innerWidth-r.clientWidth)},after({doc:e,d:n}){let r=e.documentElement,s=Math.max(0,r.clientWidth-r.offsetWidth),o=Math.max(0,t-s);n.style(r,"paddingRight",`${o}px`)}}}function cw(){return Ul()?{before({doc:t,d:e,meta:n}){function r(s){return n.containers.flatMap(o=>o()).some(o=>o.contains(s))}e.microTask(()=>{var s;if(window.getComputedStyle(t.documentElement).scrollBehavior!=="auto"){let c=We();c.style(t.documentElement,"scrollBehavior","auto"),e.add(()=>e.microTask(()=>c.dispose()))}let o=(s=window.scrollY)!=null?s:window.pageYOffset,i=null;e.addEventListener(t,"click",c=>{if(Ze(c.target))try{let a=c.target.closest("a");if(!a)return;let{hash:u}=new URL(a.href),f=t.querySelector(u);Ze(f)&&!r(f)&&(i=f)}catch{}},!0),e.addEventListener(t,"touchstart",c=>{if(Ze(c.target)&&y0(c.target))if(r(c.target)){let a=c.target;for(;a.parentElement&&r(a.parentElement);)a=a.parentElement;e.style(a,"overscrollBehavior","contain")}else e.style(c.target,"touchAction","none")}),e.addEventListener(t,"touchmove",c=>{if(Ze(c.target)){if(w0(c.target))return;if(r(c.target)){let a=c.target;for(;a.parentElement&&a.dataset.headlessuiPortal!==""&&!(a.scrollHeight>a.clientHeight||a.scrollWidth>a.clientWidth);)a=a.parentElement;a.dataset.headlessuiPortal===""&&c.preventDefault()}else c.preventDefault()}},{passive:!1}),e.add(()=>{var c;let a=(c=window.scrollY)!=null?c:window.pageYOffset;o!==a&&window.scrollTo(0,o),i&&i.isConnected&&(i.scrollIntoView({block:"nearest"}),i=null)})})}}:{}}function lw(){return{before({doc:t,d:e}){e.style(t.documentElement,"overflow","hidden")}}}function uw(t){let e={};for(let n of t)Object.assign(e,n(e));return e}let vt=iw(()=>new Map,{PUSH(t,e){var n;let r=(n=this.get(t))!=null?n:{doc:t,count:0,d:We(),meta:new Set};return r.count++,r.meta.add(e),this.set(t,r),this},POP(t,e){let n=this.get(t);return n&&(n.count--,n.meta.delete(e)),this},SCROLL_PREVENT({doc:t,d:e,meta:n}){let r={doc:t,d:e,meta:uw(n)},s=[cw(),aw(),lw()];s.forEach(({before:o})=>o?.(r)),s.forEach(({after:o})=>o?.(r))},SCROLL_ALLOW({d:t}){t.dispose()},TEARDOWN({doc:t}){this.delete(t)}});vt.subscribe(()=>{let t=vt.getSnapshot(),e=new Map;for(let[n]of t)e.set(n,n.documentElement.style.overflow);for(let n of t.values()){let r=e.get(n.doc)==="hidden",s=n.count!==0;(s&&!r||!s&&r)&&vt.dispatch(n.count>0?"SCROLL_PREVENT":"SCROLL_ALLOW",n),n.count===0&&vt.dispatch("TEARDOWN",n)}});function dw(t,e,n=()=>({containers:[]})){let r=ow(vt),s=e?r.get(e):void 0,o=s?s.count>0:!1;return J(()=>{if(!(!e||!t))return vt.dispatch("PUSH",e,n),()=>vt.dispatch("POP",e,n)},[t,e]),o}function fw(t,e,n=()=>[document.body]){let r=xn(t,"scroll-lock");dw(r,e,s=>{var o;return{containers:[...(o=s.containers)!=null?o:[],n]}})}function hw(t=0){let[e,n]=d.useState(t),r=d.useCallback(a=>n(a),[e]),s=d.useCallback(a=>n(u=>u|a),[e]),o=d.useCallback(a=>(e&a)===a,[e]),i=d.useCallback(a=>n(u=>u&~a),[n]),c=d.useCallback(a=>n(u=>u^a),[n]);return{flags:e,setFlag:r,addFlag:s,hasFlag:o,removeFlag:i,toggleFlag:c}}var pw={},Fi,$i;typeof process<"u"&&typeof globalThis<"u"&&typeof Element<"u"&&((Fi=process==null?void 0:pw)==null?void 0:Fi.NODE_ENV)==="test"&&typeof(($i=Element?.prototype)==null?void 0:$i.getAnimations)>"u"&&(Element.prototype.getAnimations=function(){return console.warn(["Headless UI has polyfilled `Element.prototype.getAnimations` for your tests.","Please install a proper polyfill e.g. `jsdom-testing-mocks`, to silence these warnings.","","Example usage:","```js","import { mockAnimationsApi } from 'jsdom-testing-mocks'","mockAnimationsApi()","```"].join(`
`)),[]});var mw=(t=>(t[t.None=0]="None",t[t.Closed=1]="Closed",t[t.Enter=2]="Enter",t[t.Leave=4]="Leave",t))(mw||{});function gw(t){let e={};for(let n in t)t[n]===!0&&(e[`data-${n}`]="");return e}function yw(t,e,n,r){let[s,o]=d.useState(n),{hasFlag:i,addFlag:c,removeFlag:a}=hw(t&&s?3:0),u=d.useRef(!1),f=d.useRef(!1),h=wo();return J(()=>{var p;if(t){if(n&&o(!0),!e){n&&c(3);return}return(p=r?.start)==null||p.call(r,n),vw(e,{inFlight:u,prepare(){f.current?f.current=!1:f.current=u.current,u.current=!0,!f.current&&(n?(c(3),a(4)):(c(4),a(2)))},run(){f.current?n?(a(3),c(4)):(a(4),c(3)):n?a(1):c(1)},done(){var m;f.current&&typeof e.getAnimations=="function"&&e.getAnimations().length>0||(u.current=!1,a(7),n||o(!1),(m=r?.end)==null||m.call(r,n))}})}},[t,n,e,h]),t?[s,{closed:i(1),enter:i(2),leave:i(4),transition:i(2)||i(4)}]:[n,{closed:void 0,enter:void 0,leave:void 0,transition:void 0}]}function vw(t,{prepare:e,run:n,done:r,inFlight:s}){let o=We();return bw(t,{prepare:e,inFlight:s}),o.nextFrame(()=>{n(),o.requestAnimationFrame(()=>{o.add(ww(t,r))})}),o.dispose}function ww(t,e){var n,r;let s=We();if(!t)return s.dispose;let o=!1;s.add(()=>{o=!0});let i=(r=(n=t.getAnimations)==null?void 0:n.call(t).filter(c=>c instanceof CSSTransition))!=null?r:[];return i.length===0?(e(),s.dispose):(Promise.allSettled(i.map(c=>c.finished)).then(()=>{o||e()}),s.dispose)}function bw(t,{inFlight:e,prepare:n}){if(e!=null&&e.current){n();return}let r=t.style.transition;t.style.transition="none",n(),t.offsetHeight,t.style.transition=r}function xo(t,e){let n=d.useRef([]),r=q(t);d.useEffect(()=>{let s=[...n.current];for(let[o,i]of e.entries())if(n.current[o]!==i){let c=r(e,s);return n.current=e,c}},[r,...e])}let _r=d.createContext(null);_r.displayName="OpenClosedContext";var he=(t=>(t[t.Open=1]="Open",t[t.Closed=2]="Closed",t[t.Closing=4]="Closing",t[t.Opening=8]="Opening",t))(he||{});function Sr(){return d.useContext(_r)}function xw({value:t,children:e}){return A.createElement(_r.Provider,{value:t},e)}function Tw({children:t}){return A.createElement(_r.Provider,{value:null},t)}function Ew(t){function e(){document.readyState!=="loading"&&(t(),document.removeEventListener("DOMContentLoaded",e))}typeof window<"u"&&typeof document<"u"&&(document.addEventListener("DOMContentLoaded",e),e())}let Je=[];Ew(()=>{function t(e){if(!Ze(e.target)||e.target===document.body||Je[0]===e.target)return;let n=e.target;n=n.closest(rr),Je.unshift(n??e.target),Je=Je.filter(r=>r!=null&&r.isConnected),Je.splice(10)}window.addEventListener("click",t,{capture:!0}),window.addEventListener("mousedown",t,{capture:!0}),window.addEventListener("focus",t,{capture:!0}),document.body.addEventListener("click",t,{capture:!0}),document.body.addEventListener("mousedown",t,{capture:!0}),document.body.addEventListener("focus",t,{capture:!0})});function Hl(t){let e=q(t),n=d.useRef(!1);d.useEffect(()=>(n.current=!1,()=>{n.current=!0,Tr(()=>{n.current&&e()})}),[e])}function _w(){let t=typeof document>"u";return"useSyncExternalStore"in _o?(e=>e.useSyncExternalStore)(_o)(()=>()=>{},()=>!1,()=>!t):!1}function Tn(){let t=_w(),[e,n]=d.useState(Ee.isHandoffComplete);return e&&Ee.isHandoffComplete===!1&&n(!1),d.useEffect(()=>{e!==!0&&n(!0)},[e]),d.useEffect(()=>Ee.handoff(),[]),t?!1:e}let Bl=d.createContext(!1);function Sw(){return d.useContext(Bl)}function Ui(t){return A.createElement(Bl.Provider,{value:t.force},t.children)}function Iw(t){let e=Sw(),n=d.useContext(ql),[r,s]=d.useState(()=>{var o;if(!e&&n!==null)return(o=n.current)!=null?o:null;if(Ee.isServer)return null;let i=t?.getElementById("headlessui-portal-root");if(i)return i;if(t===null)return null;let c=t.createElement("div");return c.setAttribute("id","headlessui-portal-root"),t.body.appendChild(c)});return d.useEffect(()=>{r!==null&&(t!=null&&t.body.contains(r)||t==null||t.body.appendChild(r))},[r,t]),d.useEffect(()=>{e||n!==null&&s(n.current)},[n,s,e]),r}let Wl=d.Fragment,Cw=ee(function(t,e){let{ownerDocument:n=null,...r}=t,s=d.useRef(null),o=Ae(b0(m=>{s.current=m}),e),i=Er(s),c=n??i,a=Iw(c),[u]=d.useState(()=>{var m;return Ee.isServer?null:(m=c?.createElement("div"))!=null?m:null}),f=d.useContext(As),h=Tn();J(()=>{!a||!u||a.contains(u)||(u.setAttribute("data-headlessui-portal",""),a.appendChild(u))},[a,u]),J(()=>{if(u&&f)return f.register(u)},[f,u]),Hl(()=>{var m;!a||!u||(Cl(u)&&a.contains(u)&&a.removeChild(u),a.childNodes.length<=0&&((m=a.parentElement)==null||m.removeChild(a)))});let p=ue();return h?!a||!u?null:sr.createPortal(p({ourProps:{ref:o},theirProps:r,slot:{},defaultTag:Wl,name:"Portal"}),u):null});function Pw(t,e){let n=Ae(e),{enabled:r=!0,ownerDocument:s,...o}=t,i=ue();return r?A.createElement(Cw,{...o,ownerDocument:s,ref:n}):i({ourProps:{ref:n},theirProps:o,slot:{},defaultTag:Wl,name:"Portal"})}let Aw=d.Fragment,ql=d.createContext(null);function kw(t,e){let{target:n,...r}=t,s={ref:Ae(e)},o=ue();return A.createElement(ql.Provider,{value:n},o({ourProps:s,theirProps:r,defaultTag:Aw,name:"Popover.Group"}))}let As=d.createContext(null);function Rw(){let t=d.useContext(As),e=d.useRef([]),n=q(o=>(e.current.push(o),t&&t.register(o),()=>r(o))),r=q(o=>{let i=e.current.indexOf(o);i!==-1&&e.current.splice(i,1),t&&t.unregister(o)}),s=d.useMemo(()=>({register:n,unregister:r,portals:e}),[n,r,e]);return[e,d.useMemo(()=>function({children:o}){return A.createElement(As.Provider,{value:s},o)},[s])]}let Nw=ee(Pw),Gl=ee(kw),jw=Object.assign(Nw,{Group:Gl});function Ow(t,e=typeof document<"u"?document.defaultView:null,n){let r=xn(t,"escape");Vl(e,"keydown",s=>{r&&(s.defaultPrevented||s.key===kl.Escape&&n(s))})}function Dw(){var t;let[e]=d.useState(()=>typeof window<"u"&&typeof window.matchMedia=="function"?window.matchMedia("(pointer: coarse)"):null),[n,r]=d.useState((t=e?.matches)!=null?t:!1);return J(()=>{if(!e)return;function s(o){r(o.matches)}return e.addEventListener("change",s),()=>e.removeEventListener("change",s)},[e]),n}function Lw({defaultContainers:t=[],portals:e,mainTreeNode:n}={}){let r=Er(n),s=q(()=>{var o,i;let c=[];for(let a of t)a!==null&&(ot(a)?c.push(a):"current"in a&&ot(a.current)&&c.push(a.current));if(e!=null&&e.current)for(let a of e.current)c.push(a);for(let a of(o=r?.querySelectorAll("html > *, body > *"))!=null?o:[])a!==document.body&&a!==document.head&&ot(a)&&a.id!=="headlessui-portal-root"&&(n&&(a.contains(n)||a.contains((i=n?.getRootNode())==null?void 0:i.host))||c.some(u=>a.contains(u))||c.push(a));return c});return{resolveContainers:s,contains:q(o=>s().some(i=>i.contains(o)))}}let Kl=d.createContext(null);function zi({children:t,node:e}){let[n,r]=d.useState(null),s=Yl(e??n);return A.createElement(Kl.Provider,{value:s},t,s===null&&A.createElement(Is,{features:nr.Hidden,ref:o=>{var i,c;if(o){for(let a of(c=(i=xr(o))==null?void 0:i.querySelectorAll("html > *, body > *"))!=null?c:[])if(a!==document.body&&a!==document.head&&ot(a)&&a!=null&&a.contains(o)){r(a);break}}}}))}function Yl(t=null){var e;return(e=d.useContext(Kl))!=null?e:t}function To(){let t=d.useRef(!1);return J(()=>(t.current=!0,()=>{t.current=!1}),[]),t}var Zt=(t=>(t[t.Forwards=0]="Forwards",t[t.Backwards=1]="Backwards",t))(Zt||{});function Mw(){let t=d.useRef(0);return zl(!0,"keydown",e=>{e.key==="Tab"&&(t.current=e.shiftKey?1:0)},!0),t}function Jl(t){if(!t)return new Set;if(typeof t=="function")return new Set(t());let e=new Set;for(let n of t.current)ot(n.current)&&e.add(n.current);return e}let Fw="div";var mt=(t=>(t[t.None=0]="None",t[t.InitialFocus=1]="InitialFocus",t[t.TabLock=2]="TabLock",t[t.FocusLock=4]="FocusLock",t[t.RestoreFocus=8]="RestoreFocus",t[t.AutoFocus=16]="AutoFocus",t))(mt||{});function $w(t,e){let n=d.useRef(null),r=Ae(n,e),{initialFocus:s,initialFocusFallback:o,containers:i,features:c=15,...a}=t;Tn()||(c=0);let u=Er(n);Hw(c,{ownerDocument:u});let f=Bw(c,{ownerDocument:u,container:n,initialFocus:s,initialFocusFallback:o});Ww(c,{ownerDocument:u,container:n,containers:i,previousActiveElement:f});let h=Mw(),p=q(y=>{if(!At(n.current))return;let b=n.current;(T=>T())(()=>{Be(h.current,{[Zt.Forwards]:()=>{on(b,De.First,{skipElements:[y.relatedTarget,o]})},[Zt.Backwards]:()=>{on(b,De.Last,{skipElements:[y.relatedTarget,o]})}})})}),m=xn(!!(c&2),"focus-trap#tab-lock"),g=wo(),w=d.useRef(!1),v={ref:r,onKeyDown(y){y.key=="Tab"&&(w.current=!0,g.requestAnimationFrame(()=>{w.current=!1}))},onBlur(y){if(!(c&4))return;let b=Jl(i);At(n.current)&&b.add(n.current);let T=y.relatedTarget;Ze(T)&&T.dataset.headlessuiFocusGuard!=="true"&&(Xl(b,T)||(w.current?on(n.current,Be(h.current,{[Zt.Forwards]:()=>De.Next,[Zt.Backwards]:()=>De.Previous})|De.WrapAround,{relativeTo:y.target}):Ze(y.target)&&Fe(y.target)))}},x=ue();return A.createElement(A.Fragment,null,m&&A.createElement(Is,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:nr.Focusable}),x({ourProps:v,theirProps:a,defaultTag:Fw,name:"FocusTrap"}),m&&A.createElement(Is,{as:"button",type:"button","data-headlessui-focus-guard":!0,onFocus:p,features:nr.Focusable}))}let Uw=ee($w),zw=Object.assign(Uw,{features:mt});function Vw(t=!0){let e=d.useRef(Je.slice());return xo(([n],[r])=>{r===!0&&n===!1&&Tr(()=>{e.current.splice(0)}),r===!1&&n===!0&&(e.current=Je.slice())},[t,Je,e]),q(()=>{var n;return(n=e.current.find(r=>r!=null&&r.isConnected))!=null?n:null})}function Hw(t,{ownerDocument:e}){let n=!!(t&8),r=Vw(n);xo(()=>{n||e?.activeElement===e?.body&&Fe(r())},[n]),Hl(()=>{n&&Fe(r())})}function Bw(t,{ownerDocument:e,container:n,initialFocus:r,initialFocusFallback:s}){let o=d.useRef(null),i=xn(!!(t&1),"focus-trap#initial-focus"),c=To();return xo(()=>{if(t===0)return;if(!i){s!=null&&s.current&&Fe(s.current);return}let a=n.current;a&&Tr(()=>{if(!c.current)return;let u=e?.activeElement;if(r!=null&&r.current){if(r?.current===u){o.current=u;return}}else if(a.contains(u)){o.current=u;return}if(r!=null&&r.current)Fe(r.current);else{if(t&16){if(on(a,De.First|De.AutoFocus)!==Ps.Error)return}else if(on(a,De.First)!==Ps.Error)return;if(s!=null&&s.current&&(Fe(s.current),e?.activeElement===s.current))return;console.warn("There are no focusable elements inside the <FocusTrap />")}o.current=e?.activeElement})},[s,i,t]),o}function Ww(t,{ownerDocument:e,container:n,containers:r,previousActiveElement:s}){let o=To(),i=!!(t&4);Vl(e?.defaultView,"focus",c=>{if(!i||!o.current)return;let a=Jl(r);At(n.current)&&a.add(n.current);let u=s.current;if(!u)return;let f=c.target;At(f)?Xl(a,f)?(s.current=f,Fe(f)):(c.preventDefault(),c.stopPropagation(),Fe(u)):Fe(s.current)},!0)}function Xl(t,e){for(let n of t)if(n.contains(e))return!0;return!1}function Ql(t){var e;return!!(t.enter||t.enterFrom||t.enterTo||t.leave||t.leaveFrom||t.leaveTo)||((e=t.as)!=null?e:eu)!==d.Fragment||A.Children.count(t.children)===1}let Ir=d.createContext(null);Ir.displayName="TransitionContext";var qw=(t=>(t.Visible="visible",t.Hidden="hidden",t))(qw||{});function Gw(){let t=d.useContext(Ir);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}function Kw(){let t=d.useContext(Cr);if(t===null)throw new Error("A <Transition.Child /> is used but it is missing a parent <Transition /> or <Transition.Root />.");return t}let Cr=d.createContext(null);Cr.displayName="NestingContext";function Pr(t){return"children"in t?Pr(t.children):t.current.filter(({el:e})=>e.current!==null).filter(({state:e})=>e==="visible").length>0}function Zl(t,e){let n=Nt(t),r=d.useRef([]),s=To(),o=wo(),i=q((m,g=Qe.Hidden)=>{let w=r.current.findIndex(({el:v})=>v===m);w!==-1&&(Be(g,{[Qe.Unmount](){r.current.splice(w,1)},[Qe.Hidden](){r.current[w].state="hidden"}}),o.microTask(()=>{var v;!Pr(r)&&s.current&&((v=n.current)==null||v.call(n))}))}),c=q(m=>{let g=r.current.find(({el:w})=>w===m);return g?g.state!=="visible"&&(g.state="visible"):r.current.push({el:m,state:"visible"}),()=>i(m,Qe.Unmount)}),a=d.useRef([]),u=d.useRef(Promise.resolve()),f=d.useRef({enter:[],leave:[]}),h=q((m,g,w)=>{a.current.splice(0),e&&(e.chains.current[g]=e.chains.current[g].filter(([v])=>v!==m)),e?.chains.current[g].push([m,new Promise(v=>{a.current.push(v)})]),e?.chains.current[g].push([m,new Promise(v=>{Promise.all(f.current[g].map(([x,y])=>y)).then(()=>v())})]),g==="enter"?u.current=u.current.then(()=>e?.wait.current).then(()=>w(g)):w(g)}),p=q((m,g,w)=>{Promise.all(f.current[g].splice(0).map(([v,x])=>x)).then(()=>{var v;(v=a.current.shift())==null||v()}).then(()=>w(g))});return d.useMemo(()=>({children:r,register:c,unregister:i,onStart:h,onStop:p,wait:u,chains:f}),[c,i,r,h,p,f,u])}let eu=d.Fragment,tu=tr.RenderStrategy;function Yw(t,e){var n,r;let{transition:s=!0,beforeEnter:o,afterEnter:i,beforeLeave:c,afterLeave:a,enter:u,enterFrom:f,enterTo:h,entered:p,leave:m,leaveFrom:g,leaveTo:w,...v}=t,[x,y]=d.useState(null),b=d.useRef(null),T=Ql(t),_=Ae(...T?[b,e,y]:e===null?[]:[e]),S=(n=v.unmount)==null||n?Qe.Unmount:Qe.Hidden,{show:R,appear:F,initial:z}=Gw(),[O,$]=d.useState(R?"visible":"hidden"),D=Kw(),{register:M,unregister:I}=D;J(()=>M(b),[M,b]),J(()=>{if(S===Qe.Hidden&&b.current){if(R&&O!=="visible"){$("visible");return}return Be(O,{hidden:()=>I(b),visible:()=>M(b)})}},[O,b,M,I,R,S]);let H=Tn();J(()=>{if(T&&H&&O==="visible"&&b.current===null)throw new Error("Did you forget to passthrough the `ref` to the actual DOM node?")},[b,O,H,T]);let U=z&&!F,V=F&&R&&z,N=d.useRef(!1),B=Zl(()=>{N.current||($("hidden"),I(b))},D),K=q(Ne=>{N.current=!0;let ut=Ne?"enter":"leave";B.onStart(b,ut,dt=>{dt==="enter"?o?.():dt==="leave"&&c?.()})}),te=q(Ne=>{let ut=Ne?"enter":"leave";N.current=!1,B.onStop(b,ut,dt=>{dt==="enter"?i?.():dt==="leave"&&a?.()}),ut==="leave"&&!Pr(B)&&($("hidden"),I(b))});d.useEffect(()=>{T&&s||(K(R),te(R))},[R,T,s]);let ke=!(!s||!T||!H||U),[,L]=yw(ke,x,R,{start:K,end:te}),Re=pt({ref:_,className:((r=Ss(v.className,V&&u,V&&f,L.enter&&u,L.enter&&L.closed&&f,L.enter&&!L.closed&&h,L.leave&&m,L.leave&&!L.closed&&g,L.leave&&L.closed&&w,!L.transition&&R&&p))==null?void 0:r.trim())||void 0,...gw(L)}),lt=0;O==="visible"&&(lt|=he.Open),O==="hidden"&&(lt|=he.Closed),R&&O==="hidden"&&(lt|=he.Opening),!R&&O==="visible"&&(lt|=he.Closing);let kr=ue();return A.createElement(Cr.Provider,{value:B},A.createElement(xw,{value:lt},kr({ourProps:Re,theirProps:v,defaultTag:eu,features:tu,visible:O==="visible",name:"Transition.Child"})))}function Jw(t,e){let{show:n,appear:r=!1,unmount:s=!0,...o}=t,i=d.useRef(null),c=Ql(t),a=Ae(...c?[i,e]:e===null?[]:[e]);Tn();let u=Sr();if(n===void 0&&u!==null&&(n=(u&he.Open)===he.Open),n===void 0)throw new Error("A <Transition /> is used but it is missing a `show={true | false}` prop.");let[f,h]=d.useState(n?"visible":"hidden"),p=Zl(()=>{n||h("hidden")}),[m,g]=d.useState(!0),w=d.useRef([n]);J(()=>{m!==!1&&w.current[w.current.length-1]!==n&&(w.current.push(n),g(!1))},[w,n]);let v=d.useMemo(()=>({show:n,appear:r,initial:m}),[n,r,m]);J(()=>{n?h("visible"):!Pr(p)&&i.current!==null&&h("hidden")},[n,p]);let x={unmount:s},y=q(()=>{var _;m&&g(!1),(_=t.beforeEnter)==null||_.call(t)}),b=q(()=>{var _;m&&g(!1),(_=t.beforeLeave)==null||_.call(t)}),T=ue();return A.createElement(Cr.Provider,{value:p},A.createElement(Ir.Provider,{value:v},T({ourProps:{...x,as:d.Fragment,children:A.createElement(nu,{ref:a,...x,...o,beforeEnter:y,beforeLeave:b})},theirProps:{},defaultTag:d.Fragment,features:tu,visible:f==="visible",name:"Transition"})))}function Xw(t,e){let n=d.useContext(Ir)!==null,r=Sr()!==null;return A.createElement(A.Fragment,null,!n&&r?A.createElement(ks,{ref:e,...t}):A.createElement(nu,{ref:e,...t}))}let ks=ee(Jw),nu=ee(Yw),X=ee(Xw),et=Object.assign(ks,{Child:X,Root:ks});var Qw=(t=>(t[t.Open=0]="Open",t[t.Closed=1]="Closed",t))(Qw||{}),Zw=(t=>(t[t.SetTitleId=0]="SetTitleId",t))(Zw||{});let eb={0(t,e){return t.titleId===e.id?t:{...t,titleId:e.id}}},Eo=d.createContext(null);Eo.displayName="DialogContext";function Ar(t){let e=d.useContext(Eo);if(e===null){let n=new Error(`<${t} /> is missing a parent <Dialog /> component.`);throw Error.captureStackTrace&&Error.captureStackTrace(n,Ar),n}return e}function tb(t,e){return Be(e.type,eb,t,e)}let Vi=ee(function(t,e){let n=d.useId(),{id:r=`headlessui-dialog-${n}`,open:s,onClose:o,initialFocus:i,role:c="dialog",autoFocus:a=!0,__demoMode:u=!1,unmount:f=!1,...h}=t,p=d.useRef(!1);c=function(){return c==="dialog"||c==="alertdialog"?c:(p.current||(p.current=!0,console.warn(`Invalid role [${c}] passed to <Dialog />. Only \`dialog\` and and \`alertdialog\` are supported. Using \`dialog\` instead.`)),"dialog")}();let m=Sr();s===void 0&&m!==null&&(s=(m&he.Open)===he.Open);let g=d.useRef(null),w=Ae(g,e),v=Er(g),x=s?0:1,[y,b]=d.useReducer(tb,{titleId:null,descriptionId:null,panelRef:d.createRef()}),T=q(()=>o(!1)),_=q(L=>b({type:0,id:L})),S=Tn()?x===0:!1,[R,F]=Rw(),z={get current(){var L;return(L=y.panelRef.current)!=null?L:g.current}},O=Yl(),{resolveContainers:$}=Lw({mainTreeNode:O,portals:R,defaultContainers:[z]}),D=m!==null?(m&he.Closing)===he.Closing:!1;q0(u||D?!1:S,{allowed:q(()=>{var L,Re;return[(Re=(L=g.current)==null?void 0:L.closest("[data-headlessui-portal]"))!=null?Re:null]}),disallowed:q(()=>{var L;return[(L=O?.closest("body > *:not(#headlessui-portal-root)"))!=null?L:null]})});let M=Dl.get(null);J(()=>{if(S)return M.actions.push(r),()=>M.actions.pop(r)},[M,r,S]);let I=Fl(M,d.useCallback(L=>M.selectors.isTop(L,r),[M,r]));sw(I,$,L=>{L.preventDefault(),T()}),Ow(I,v?.defaultView,L=>{L.preventDefault(),L.stopPropagation(),document.activeElement&&"blur"in document.activeElement&&typeof document.activeElement.blur=="function"&&document.activeElement.blur(),T()}),fw(u||D?!1:S,v,$),G0(S,g,T);let[H,U]=x0(),V=d.useMemo(()=>[{dialogState:x,close:T,setTitleId:_,unmount:f},y],[x,y,T,_,f]),N=d.useMemo(()=>({open:x===0}),[x]),B={ref:w,id:r,role:c,tabIndex:-1,"aria-modal":u?void 0:x===0?!0:void 0,"aria-labelledby":y.titleId,"aria-describedby":H,unmount:f},K=!Dw(),te=mt.None;S&&!u&&(te|=mt.RestoreFocus,te|=mt.TabLock,a&&(te|=mt.AutoFocus),K&&(te|=mt.InitialFocus));let ke=ue();return A.createElement(Tw,null,A.createElement(Ui,{force:!0},A.createElement(jw,null,A.createElement(Eo.Provider,{value:V},A.createElement(Gl,{target:g},A.createElement(Ui,{force:!1},A.createElement(U,{slot:N},A.createElement(F,null,A.createElement(zw,{initialFocus:i,initialFocusFallback:g,containers:$,features:te},A.createElement(C0,{value:T},ke({ourProps:B,theirProps:h,slot:N,defaultTag:nb,features:rb,visible:x===0,name:"Dialog"})))))))))))}),nb="div",rb=tr.RenderStrategy|tr.Static;function sb(t,e){let{transition:n=!1,open:r,...s}=t,o=Sr(),i=t.hasOwnProperty("open")||o!==null,c=t.hasOwnProperty("onClose");if(!i&&!c)throw new Error("You have to provide an `open` and an `onClose` prop to the `Dialog` component.");if(!i)throw new Error("You provided an `onClose` prop to the `Dialog`, but forgot an `open` prop.");if(!c)throw new Error("You provided an `open` prop to the `Dialog`, but forgot an `onClose` prop.");if(!o&&typeof t.open!="boolean")throw new Error(`You provided an \`open\` prop to the \`Dialog\`, but the value is not a boolean. Received: ${t.open}`);if(typeof t.onClose!="function")throw new Error(`You provided an \`onClose\` prop to the \`Dialog\`, but the value is not a function. Received: ${t.onClose}`);return(r!==void 0||n)&&!s.static?A.createElement(zi,null,A.createElement(et,{show:r,transition:n,unmount:s.unmount},A.createElement(Vi,{ref:e,...s}))):A.createElement(zi,null,A.createElement(Vi,{ref:e,open:r,...s}))}let ob="div";function ib(t,e){let n=d.useId(),{id:r=`headlessui-dialog-panel-${n}`,transition:s=!1,...o}=t,[{dialogState:i,unmount:c},a]=Ar("Dialog.Panel"),u=Ae(e,a.panelRef),f=d.useMemo(()=>({open:i===0}),[i]),h=q(v=>{v.stopPropagation()}),p={ref:u,id:r,onClick:h},m=s?X:d.Fragment,g=s?{unmount:c}:{},w=ue();return A.createElement(m,{...g},w({ourProps:p,theirProps:o,slot:f,defaultTag:ob,name:"Dialog.Panel"}))}let ab="div";function cb(t,e){let{transition:n=!1,...r}=t,[{dialogState:s,unmount:o}]=Ar("Dialog.Backdrop"),i=d.useMemo(()=>({open:s===0}),[s]),c={ref:e,"aria-hidden":!0},a=n?X:d.Fragment,u=n?{unmount:o}:{},f=ue();return A.createElement(a,{...u},f({ourProps:c,theirProps:r,slot:i,defaultTag:ab,name:"Dialog.Backdrop"}))}let lb="h2";function ub(t,e){let n=d.useId(),{id:r=`headlessui-dialog-title-${n}`,...s}=t,[{dialogState:o,setTitleId:i}]=Ar("Dialog.Title"),c=Ae(e);d.useEffect(()=>(i(r),()=>i(null)),[r,i]);let a=d.useMemo(()=>({open:o===0}),[o]),u={ref:c,id:r};return ue()({ourProps:u,theirProps:s,slot:a,defaultTag:lb,name:"Dialog.Title"})}let db=ee(sb),tt=ee(ib);ee(cb);let En=ee(ub),wt=Object.assign(db,{Panel:tt,Title:En,Description:S0});const fb=ir("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background shadow-xs hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),se=d.forwardRef(({className:t,variant:e,size:n,asChild:r=!1,...s},o)=>{const i=r?Au:"button";return l.jsx(i,{"data-slot":"button",className:G(fb({variant:e,size:n,className:t})),ref:o,...s})});se.displayName="Button";const hb="/assets/aiCompanion-BYmtocS8.jpg";function pb({isOpen:t,setIsOpen:e,onSignIn:n,onSignUp:r,action:s="access this feature"}){return l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>e(!1),children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center px-4",children:l.jsxs(tt,{className:"w-full max-w-lg transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-900/95 to-black/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all",children:[l.jsx("div",{className:"relative p-6 pb-0",children:l.jsx("button",{onClick:()=>e(!1),className:"absolute top-4 right-4 w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:l.jsx(fn,{className:"h-2.5 w-2.5 text-gray-400"})})}),l.jsxs("div",{className:"px-6 pb-6",children:[l.jsx("div",{className:"flex justify-center mb-6",children:l.jsxs("div",{className:"relative",children:[l.jsx("img",{src:hb,alt:"MedusaVR Premium",className:"w-32 h-32 rounded-full object-cover border-4 border-gradient-to-r from-orange-400 to-orange-600 shadow-lg"}),l.jsx("div",{className:"absolute -top-2 -right-2 bg-gradient-to-r from-orange-400 to-orange-600 rounded-full p-2",children:l.jsx(So,{className:"h-5 w-5 text-white"})})]})}),l.jsx(En,{className:"text-3xl font-bold text-center mb-4",children:l.jsx("span",{className:"bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Join MedusaVR"})}),l.jsxs("p",{className:"text-center text-zinc-300 mb-6 text-lg",children:["Sign up to ",s," and unlock exclusive features"]}),l.jsxs("div",{className:"space-y-3 mb-6",children:[l.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[l.jsx(ju,{className:"h-5 w-5 text-red-500"}),l.jsx("span",{children:"Save your favorite characters"})]}),l.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[l.jsx(Ou,{className:"h-5 w-5 text-yellow-500"}),l.jsx("span",{children:"Unlimited conversations"})]}),l.jsxs("div",{className:"flex items-center space-x-3 text-zinc-200",children:[l.jsx(So,{className:"h-5 w-5 text-orange-500"}),l.jsx("span",{children:"Premium character access"})]})]}),l.jsxs("div",{className:"space-y-3",children:[l.jsx(se,{onClick:()=>{e(!1),r()},className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold py-3 rounded-xl transition-all duration-200 transform hover:scale-105 shadow-lg shadow-orange-500/25",children:"Get Started Free"}),l.jsx(se,{onClick:()=>{e(!1),n()},variant:"outline",className:"w-full border-zinc-600 text-zinc-300 hover:bg-zinc-800 hover:text-white font-semibold py-3 rounded-xl transition-all duration-200",children:"Already have an account? Sign In"})]}),l.jsx("p",{className:"text-center text-zinc-500 text-sm mt-4",children:"Join thousands of users enjoying premium AI conversations"})]})]})})]})})}const ru=d.createContext(void 0);function su(){const t=d.useContext(ru);if(!t)throw new Error("useSubscriptionModal must be used within a SubscriptionModalProvider");return t}function mb({children:t,onSignIn:e,onSignUp:n}){const[r,s]=d.useState(!1),[o,i]=d.useState("access this feature"),u={showSubscriptionModal:f=>{f&&i(f),s(!0)},hideSubscriptionModal:()=>{s(!1)},isSubscriptionModalOpen:r};return l.jsxs(ru.Provider,{value:u,children:[t,l.jsx(pb,{isOpen:r,setIsOpen:s,onSignIn:e,onSignUp:n,action:o})]})}class gb extends d.Component{constructor(e){super(e),this.state={hasError:!1}}static getDerivedStateFromError(){return{hasError:!0}}render(){return this.state.hasError?l.jsx("div",{className:"p-6 text-center",children:l.jsx("h2",{className:"text-lg font-semibold",children:"Something went wrong while loading the page."})}):this.props.children}}class yb{async getCharacters(e){const n=new URLSearchParams;return e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),e?.sort&&n.set("sort",e.sort),e?.filter&&n.set("filter",e.filter),e?.category&&n.set("category",e.category),await(await E("GET",`/api/characters?${n.toString()}`)).json()}async getCharacter(e){return await(await E("GET",`/api/characters/${e}`)).json()}async createCharacter(e){return await(await E("POST","/api/characters",e)).json()}async updateCharacter(e,n){return await(await E("PUT",`/api/characters/${e}`,n)).json()}async deleteCharacter(e){await E("DELETE",`/api/characters/${e}`)}async uploadCharacterAvatar(e,n){const r=new FormData;r.append("file",n);const s=await fetch(`/api/characters/${e}/avatar`,{method:"POST",body:r,headers:{Authorization:`Bearer ${await ne.ensureValidToken()}`}});if(!s.ok)throw new Error(`Upload failed: ${s.statusText}`);return await s.json()}async deleteCharacterAvatar(e){await E("DELETE",`/api/characters/${e}/avatar`)}async getUserConversations(){return await(await E("GET","/api/conversations")).json()}async sendMessage(e,n){return await(await E("POST",`/api/chat/${e}/message`,n)).json()}async getConversation(e){return await(await E("GET",`/api/chat/${e}`)).json()}async getChatHistory(e){const n=new URLSearchParams;return e?.characterId&&n.set("characterId",e.characterId),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await E("GET",`/api/chat/history?${n.toString()}`)).json()}async deleteConversation(e){await E("DELETE",`/api/conversations/${e}`)}async deleteMessage(e,n){await E("DELETE",`/api/chat/${e}/message/${n}`)}async generateImage(e){return await(await E("POST","/api/image-generation/generate",e)).json()}async getImageModels(){return(await(await E("GET","/api/images/models")).json()).data}async getImages(e){const n=new URLSearchParams;return e?.userId&&n.set("userId",e.userId),e?.characterId&&n.set("characterId",e.characterId),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await E("GET",`/api/images?${n.toString()}`)).json()}async deleteImage(e){await E("DELETE",`/api/images/${e}`)}async search(e){const n=new URLSearchParams;return n.set("q",e.q),e.type&&e.type.forEach(s=>n.append("type[]",s)),e.page&&n.set("page",e.page.toString()),e.limit&&n.set("limit",e.limit.toString()),await(await E("GET",`/api/search?${n.toString()}`)).json()}async getCategories(){return await(await E("GET","/api/categories")).json()}async getCategoryCharacters(e,n){const r=new URLSearchParams;return n?.page&&r.set("page",n.page.toString()),n?.limit&&r.set("limit",n.limit.toString()),await(await E("GET",`/api/categories/${e}/characters?${r.toString()}`)).json()}async getTags(e){const n=new URLSearchParams;return e?.limit!==void 0&&n.set("limit",e.limit.toString()),await(await E("GET",`/api/tags?${n.toString()}`)).json()}async getFollowing(e){return await(await E("GET",`/api/users/${e}/following`)).json()}async getFollowers(e){return await(await E("GET",`/api/users/${e}/followers`)).json()}async followUser(e){return await(await E("POST",`/api/follows/users/${e}/follow`)).json()}async unfollowUser(e){return await(await E("DELETE",`/api/follows/users/${e}/follow`)).json()}async checkFollowStatus(e){return await(await E("GET",`/api/follows/users/${e}/follow-status`)).json()}async getTopCreators(e="month"){return await(await E("GET",`/api/creators/top?period=${e}`)).json()}async subscribe(e,n){return await(await E("POST","/api/payments/subscribe",{planId:e,paymentMethodId:n})).json()}async upgradeSubscription(e,n,r){return await(await E("POST","/api/subscriptions/upgrade",{plan:e,coinsToAward:n,billingPeriod:r})).json()}async getSubscriptionPlans(){return await(await E("GET","/api/subscriptions/plans")).json()}async cancelSubscription(e){return await(await E("POST","/api/subscriptions/cancel",e?{subscriptionId:e}:{})).json()}async getSubscriptionStatus(){try{const n=await(await E("GET","/api/subscriptions/status")).json();return{success:!0,tier:n.tier||"free",subscription:n.subscription||null,permissions:n.permissions||{}}}catch{return console.warn("Subscription status endpoint error, returning defaults"),{success:!1,tier:"free",subscription:null,permissions:{}}}}async getPaymentStatus(){return await(await E("GET","/api/payments/status")).json()}async getInvoices(){try{return await(await E("GET","/api/payments/invoices")).json()}catch{return console.warn("Invoices endpoint not implemented, returning empty array"),{invoices:[]}}}async createPortalSession(){return await(await E("POST","/api/payments/portal-session")).json()}async updatePaymentMethod(){try{return await(await E("POST","/api/payments/update-payment-method")).json()}catch{return console.error("Payment method update not implemented, falling back to portal"),{success:!1,message:"Feature not yet implemented"}}}async updateUserTier(e){try{return await(await E("POST","/api/users/update-tier",{tier:e})).json()}catch(n){return console.error("User tier update error:",n),{success:!0,message:"Tier updated locally",tier:e}}}async getNotifications(e){const n=new URLSearchParams;return e&&n.set("unreadOnly","true"),await(await E("GET",`/api/notifications?${n.toString()}`)).json()}async markNotificationRead(e){await E("PUT",`/api/notifications/${e}/read`)}async deleteNotification(e){await E("DELETE",`/api/notifications/${e}`)}async createSupportTicket(e){return await(await E("POST","/api/support/tickets",e)).json()}async getSupportTickets(e){const n=new URLSearchParams;return e?.status&&n.set("status",e.status),e?.page&&n.set("page",e.page.toString()),e?.limit&&n.set("limit",e.limit.toString()),await(await E("GET",`/api/support/tickets?${n.toString()}`)).json()}async getSupportTicket(e){return await(await E("GET",`/api/support/tickets/${e}`)).json()}async requestContentRemoval(e){return await(await E("POST","/api/content-removal/request",e)).json()}async updateUserSettings(e){const n=ne.getUser();if(!n)throw new Error("User not authenticated");return await(await E("PUT",`/api/users/${n.id}/settings`,e)).json()}async updateUserPreferences(e){const n=ne.getUser();if(!n)throw new Error("User not authenticated");const r=await E("PUT",`/api/users/${n.id}/preferences`,e);if(!r.ok){const s=await r.json();throw new Error(s.error||"Failed to update preferences")}return await r.json()}async getFavorites(){return await(await E("GET","/api/favorites")).json()}async addFavorite(e){await E("POST","/api/favorites",{characterId:e})}async removeFavorite(e){await E("DELETE",`/api/favorites/${e}`)}async toggleFavorite(e){return await(await E("POST","/api/favorites/toggle",{characterId:e})).json()}async likeCharacter(e){await E("POST",`/api/characters/${e}/likes`)}async unlikeCharacter(e){await E("DELETE",`/api/characters/${e}/likes`)}async toggleLike(e){return await(await E("PUT",`/api/characters/${e}/likes`)).json()}async getLikedCharacters(e){return(await(await E("GET",`/api/users/${e}/likedCharacters`)).json()).likedCharacters}async getTermsOfService(){return await(await E("GET","/api/legal/terms")).json()}async getPrivacyPolicy(){return await(await E("GET","/api/legal/privacy")).json()}async getFAQ(){return await(await E("GET","/api/faq")).json()}async getAvailableCryptoCurrencies(){return{currencies:[]}}async createCryptoPayment(e,n){throw new Error("Crypto payments are no longer supported")}async createTrustPayPayment(e){throw new Error("TrustPay payments are no longer supported")}async addCoinsManually(e){return await(await E("POST","/api/auth/add-coins",{amount:100})).json()}async mockCoinPurchase(e,n){return await(await E("POST","/api/auth/add-coins",{amount:n})).json()}async getCoinInfo(){return await(await E("GET","/api/coins/info")).json()}async claimMonthlyCoins(){return await(await E("POST","/api/coins/claim-monthly")).json()}async getCharacterComments(e,n=1,r=10){return await(await E("GET",`/api/characters/${e}/comments?page=${n}&limit=${r}`)).json()}async createComment(e,n,r){return await(await E("POST",`/api/characters/${e}/comments`,{content:n.trim(),parentCommentId:r})).json()}async updateComment(e,n){return await(await E("PUT",`/api/comments/${e}`,{content:n.trim()})).json()}async deleteComment(e){return await(await E("DELETE",`/api/comments/${e}`)).json()}async likeComment(e){return await(await E("POST",`/api/comments/${e}/like`)).json()}}const bt=new yb,ou=d.createContext(void 0);function Qx(){const t=d.useContext(ou);if(!t)throw new Error("useLikes must be used within a LikesProvider");return t}function vb({children:t}){const{user:e,isAuthenticated:n}=Rt(),{showSubscriptionModal:r}=su(),s=or(),[o,i]=d.useState([]),[c,a]=d.useState(!1),{data:u=[],isLoading:f}=Os({queryKey:["likedCharacters",e?.id],queryFn:()=>bt.getLikedCharacters(e?.id),enabled:n&&!!e,staleTime:5*60*1e3});d.useEffect(()=>{if(!n){const g=localStorage.getItem("medusavr-liked-characters");if(g)try{const w=JSON.parse(g);i(w)}catch(w){console.error("Error loading liked characters from localStorage:",w)}}},[n]),d.useEffect(()=>{n||localStorage.setItem("medusavr-liked-characters",JSON.stringify(o))},[o,n]);const m={likedCharacters:n?u:o,isLoading:n&&f||c,isLiked:g=>(n?u:o).includes(g),toggleLike:async g=>{if(c)return console.info("Like toggle already in progress, skipping..."),null;a(!0);try{if(n&&e){const w=await E("PUT",`/api/characters/${g}/likes`,{},{},"high");if(w.ok){const v=await w.json();return s.setQueryData(["likedCharacters",e.id],(x=[])=>v.isLiked?[...x,g]:x.filter(y=>y!==g)),s.invalidateQueries({queryKey:["character",g.toString()]}),s.invalidateQueries({queryKey:["characters"]}),{likes:v.likes,isLiked:v.isLiked}}else{const v=await w.json();return console.error("Toggle like failed:",v),null}}else{const v=o.includes(g);return i(v?x=>x.filter(y=>y!==g):x=>[...x,g]),{likes:0,isLiked:!v}}}catch(w){return w?.isRateLimit||console.error("Failed to toggle like:",w),null}finally{a(!1)}}};return l.jsx(ou.Provider,{value:m,children:t})}const iu=d.createContext(void 0);function Zx(){const t=d.useContext(iu);if(!t)throw new Error("useFavorites must be used within a FavoritesProvider");return t}function wb({children:t}){const{user:e,isAuthenticated:n}=Rt(),{showSubscriptionModal:r}=su(),s=or(),[o,i]=d.useState([]),{data:c=[],isLoading:a}=Os({queryKey:["favorites",e?.id],queryFn:bt.getFavorites,enabled:n&&!!e,staleTime:5*60*1e3}),u=c.map(y=>({id:y.id,name:y.name,persona:y.persona||y.description||"",description:y.description,avatar:y.avatar,avatarUrl:y.avatarUrl,isUserCreated:y.isUserCreated||!1,nsfw:y.nsfw,chatCount:y.chatCount,selectedTags:y.selectedTags,tags:y.tags,tagNames:y.tagNames,rating:y.rating}));d.useEffect(()=>{if(!n){const y=localStorage.getItem("medusavr-favorites");if(y)try{const b=JSON.parse(y);i(b)}catch(b){console.error("Error loading favorites from localStorage:",b)}}},[n]),d.useEffect(()=>{n||localStorage.setItem("medusavr-favorites",JSON.stringify(o))},[o,n]);const f=Ot({mutationFn:y=>bt.addFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),h=Ot({mutationFn:y=>bt.removeFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),p=Ot({mutationFn:y=>bt.toggleFavorite(parseInt(y)),onSuccess:()=>{s.invalidateQueries({queryKey:["favorites",e?.id]})}}),x={favorites:n?u:o,isLoading:n?a:!1,addToFavorites:async y=>{n&&e?await f.mutateAsync(y.id):r(`add ${y.name} to your favorites`)},removeFromFavorites:async y=>{n&&e?await h.mutateAsync(y):r("manage your favorites")},isFavorite:y=>(n?u:o).some(T=>T.id===y),toggleFavorite:async y=>{n&&e?await p.mutateAsync(y.id):r(`add ${y.name} to your favorites`)}};return l.jsx(iu.Provider,{value:x,children:t})}const Rn={sm:"w-8 h-8",md:"w-12 h-12",lg:"w-16 h-16",xl:"w-24 h-24"};function bb({size:t="md",className:e,showText:n=!0,text:r="Loading..."}){return l.jsxs("div",{className:G("flex flex-col items-center justify-center",e),children:[l.jsxs("div",{className:"relative",children:[l.jsx("div",{className:G("absolute inset-0 rounded-full blur-xl opacity-60 animate-pulse","bg-gradient-to-r from-red-500 via-orange-500 to-red-500",Rn[t]),style:{transform:"scale(1.2)",animationDuration:"2s"}}),l.jsx("div",{className:G("absolute inset-0 rounded-full blur-lg opacity-40 animate-pulse","bg-gradient-to-r from-orange-400 via-red-400 to-orange-400",Rn[t]),style:{transform:"scale(1.4)",animationDuration:"2.5s",animationDelay:"0.5s"}}),l.jsx("div",{className:G("absolute inset-0 rounded-full bg-gradient-to-r from-orange-500 via-amber-500 to-orange-500 blur-md opacity-20 animate-spin",Rn[t]),style:{animationDuration:"3s"}}),l.jsx("div",{className:G("relative rounded-full bg-gradient-to-br from-zinc-800 to-zinc-900 border-2 border-orange-500/20 flex items-center justify-center","shadow-2xl shadow-orange-500/10 animate-slow-spin",Rn[t]),children:l.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR",className:"w-3/4 h-3/4 object-contain opacity-90",onError:s=>{const o=s.target;o.style.display="none",o.parentElement.innerHTML='<div class="w-2 h-2 bg-orange-500 rounded-full animate-pulse"></div>'}})})]}),n&&l.jsx("p",{className:"mt-6 text-sm text-zinc-300 animate-pulse font-medium",children:r})]})}const Hi=d.lazy(()=>k(()=>import("./ForYouPage-sRUoJZIu.js"),__vite__mapDeps([7,1,2,3,8,4,6,9,5]))),xb=d.lazy(()=>k(()=>import("./following-C7EqKHal.js"),__vite__mapDeps([10,1,2,3,8,4,6,11,5]))),Tb=d.lazy(()=>k(()=>import("./creators-yhjgDajk.js"),__vite__mapDeps([12,1,2,3,4,13,6,11,5]))),Eb=d.lazy(()=>k(()=>import("./creator-profile-cGLiw81y.js"),__vite__mapDeps([14,1,2,3,4,8,6,11,5]))),Bi=d.lazy(()=>k(()=>import("./recent-chats-a8137f5_.js"),__vite__mapDeps([15,1,2,3,4,11,6,5]))),_b=d.lazy(()=>k(()=>import("./SubscribePage-zVAqfAzU.js"),__vite__mapDeps([16,1,2,3,6,4,5]))),Sb=d.lazy(()=>k(()=>import("./SubscriptionManagePage-CSBUFY0D.js"),__vite__mapDeps([17,1,2,3,6,4,5]))),Ib=d.lazy(()=>k(()=>import("./SubscriptionSuccessPage-C1uCmIvn.js"),__vite__mapDeps([18,1,2,3,13,6,4,5]))),Cb=d.lazy(()=>k(()=>import("./SubscriptionCancelPage-B9_oCOkY.js"),__vite__mapDeps([19,1,2,3,13,6,4,5]))),Pb=d.lazy(()=>k(()=>import("./CoinsPage-B98yQZY0.js"),__vite__mapDeps([20,1,2,3,13,6,4,5]))),Ab=d.lazy(()=>k(()=>import("./SettingsPage-DjIz3aKp.js"),__vite__mapDeps([21,1,2,3,4,22,5,6])));d.lazy(()=>k(()=>import("./not-found-CGIQ6rlr.js"),__vite__mapDeps([23,1,2,3,13,6,4,5])));const Wi=d.lazy(()=>k(()=>import("./ChatPage-I8Xz1UgD.js"),__vite__mapDeps([24,1,2,3,6,25,26,27,4,28,5,29])));d.lazy(()=>k(()=>import("./CharacterProfile-DivmTo9k.js"),__vite__mapDeps([30,1,2,3,31,29,6,4,32,27,13,9,33,5])));const kb=d.lazy(()=>k(()=>import("./CharacterPage-NjMil5O0.js"),__vite__mapDeps([31,1,2,3,29,6,4,32,27,13,9,33,5]))),Rb=d.lazy(()=>k(()=>import("./FavoritesPage-BBRZIn8U.js"),__vite__mapDeps([34,1,2,3,8,4,6,5]))),qi=d.lazy(()=>k(()=>import("./NotFoundPage-Cy_A5J-2.js"),__vite__mapDeps([35,1,2,3,6]))),Gi=d.lazy(()=>k(()=>import("./UserProfilePage-C2Cl2njy.js"),__vite__mapDeps([36,1,2,3,4,8,6,37,22,5])).then(t=>({default:t.default}))),Ki=d.lazy(()=>k(()=>import("./UserGalleryPage-DvbSpVed.js"),__vite__mapDeps([38,1,2,3,4,6,5]))),Nb=d.lazy(()=>k(()=>import("./CharacterGallery-CXz8vp9y.js"),__vite__mapDeps([39,1,2,3,40,32,6,5,4,8]))),jb=d.lazy(()=>k(()=>import("./UserCharacterGalleryPage-CTYxrMWK.js"),__vite__mapDeps([41,1,2,3,4,6,5]))),Ob=d.lazy(()=>k(()=>import("./AllUserImagesPage-CCs_TazY.js"),__vite__mapDeps([42,1,2,3,4,13,5,6]))),Db=d.lazy(()=>k(()=>import("./ShowcasePage-9uTe3kJh.js"),__vite__mapDeps([43,1,2,3,8,4,6,5]))),Lb=d.lazy(()=>k(()=>import("./EmailVerificationPage-JEh05gXC.js"),__vite__mapDeps([44,1,2,3,13,6,4,5]))),Mb=d.lazy(()=>k(()=>import("./CreateCharacter-C7omC6lB.js"),__vite__mapDeps([45,1,2,3,27,13,26,6,4,5]))),Fb=d.lazy(()=>k(()=>import("./CreateCharacterEnhanced-GvWgLZxf.js"),__vite__mapDeps([46,1,2,3,27,13,6,26,4,5]))),$b=d.lazy(()=>k(()=>import("./UserCharacters-7IdC9XE4.js"),__vite__mapDeps([47,1,2,3,37,6,4,8,5]))),Ub=d.lazy(()=>k(()=>import("./TestPage-DwOLuLCr.js"),__vite__mapDeps([48,1,2,3]))),zb=d.lazy(()=>k(()=>import("./TagPage-DBXtVR6R.js"),__vite__mapDeps([49,1,2,3,4,8,6,5]))),Vb=d.lazy(()=>k(()=>import("./SearchPage-vnnzKiJj.js"),__vite__mapDeps([50,1,2,3,4,8,6,9,5]))),Hb=d.lazy(()=>k(()=>import("./AuthDebugPage-Cc3u9h6a.js"),__vite__mapDeps([51,1,2,3,28,5,13,4,6]))),Bb=d.lazy(()=>k(()=>import("./PaymentSuccessPage-bZLFYEWK.js"),__vite__mapDeps([52,1,2,3,13,6,4,5]))),Wb=d.lazy(()=>k(()=>import("./PaymentCancelPage-DFQpseeF.js"),__vite__mapDeps([53,1,2,3,13,6,4,5]))),qb=d.lazy(()=>k(()=>import("./GenerateImagesPage-A18jldqa.js"),__vite__mapDeps([54,1,2,3,13,27,40,6,4,25,5]))),Gb=d.lazy(()=>k(()=>import("./CharacterGalleryPage-B1XGOAX5.js"),__vite__mapDeps([55,1,2,3,13,4,6,5]))),Kb=d.lazy(()=>k(()=>import("./FeaturesPage-BJ8Pheqq.js"),__vite__mapDeps([56,1,2,3,9,6,4,5]))),Yb=d.lazy(()=>k(()=>import("./LegalPage-DhAEugyT.js"),__vite__mapDeps([57,1,2,3]))),Jb=d.lazy(()=>k(()=>import("./CommunityGuidelinesPage-_a-6uxj8.js"),__vite__mapDeps([58,1,2,3,59]))),Xb=d.lazy(()=>k(()=>import("./PrivacyPolicyPage-BuvwfUjh.js"),__vite__mapDeps([60,1,2,3,59]))),Qb=d.lazy(()=>k(()=>import("./TermsOfServicePage-C_qVu_c9.js"),__vite__mapDeps([61,1,2,3,59]))),Zb=d.lazy(()=>k(()=>import("./ContentPolicyPage-jSHMgNLL.js"),__vite__mapDeps([62,1,2,3,59]))),ex=d.lazy(()=>k(()=>import("./BlockedContentPolicyPage-Bj2vfHLx.js"),__vite__mapDeps([63,1,2,3,59]))),tx=d.lazy(()=>k(()=>import("./CookiePolicyPage-BLCde9dl.js"),__vite__mapDeps([64,1,2,3,59]))),nx=d.lazy(()=>k(()=>import("./DMCANoticePage-CHKX_eMz.js"),__vite__mapDeps([65,1,2,3,59]))),rx=d.lazy(()=>k(()=>import("./ExemptionStatementPage-Cd7hPLQI.js"),__vite__mapDeps([66,1,2,3,59]))),sx=d.lazy(()=>k(()=>import("./ContentProviderCompliancePage-BLYRISel.js"),__vite__mapDeps([67,1,2,3,59]))),ox=d.lazy(()=>k(()=>import("./ContentSafetyCompliancePage-CJjqQ4mu.js"),__vite__mapDeps([68,1,2,3,59]))),ix=d.lazy(()=>k(()=>import("./LiabilityDisclaimerPage-BWAASHJJ.js"),__vite__mapDeps([69,1,2,3,59]))),ax=d.lazy(()=>k(()=>import("./GuidesPage-C-e0WuCN.js"),__vite__mapDeps([70,1,2,3,9,33,6,4,5]))),cx=d.lazy(()=>k(()=>import("./BlogPostPage-C5h7y1T5.js"),__vite__mapDeps([71,1,2,3,9,33,6,4,5]))),lx=()=>l.jsx("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-orange-900/20 text-white flex items-center justify-center",children:l.jsx(bb,{size:"xl",text:"Loading page..."})}),P=({Component:t})=>l.jsx(gb,{children:l.jsx(d.Suspense,{fallback:l.jsx(lx,{}),children:l.jsx(t,{})})});function ux(){const[t]=Ds();return d.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function dx(){return l.jsx(vb,{children:l.jsxs(wb,{children:[l.jsx(ux,{}),l.jsxs(Zu,{children:[l.jsx(C,{path:"/verify-email",component:()=>l.jsx(P,{Component:Lb})}),l.jsx(C,{path:"/",component:()=>l.jsx(P,{Component:Hi})}),l.jsx(C,{path:"/test-chat",component:()=>l.jsx(P,{Component:Wi})}),l.jsx(C,{path:"/chat",component:()=>l.jsx(P,{Component:Bi})}),l.jsx(C,{path:"/ForYouPage",component:()=>l.jsx(P,{Component:Hi})}),l.jsx(C,{path:"/following",component:()=>l.jsx(P,{Component:xb})}),l.jsx(C,{path:"/creators",component:()=>l.jsx(P,{Component:Tb})}),l.jsx(C,{path:"/creators/:id",component:()=>l.jsx(P,{Component:Eb})}),l.jsx(C,{path:"/characters/:id",component:()=>l.jsx(P,{Component:kb})}),l.jsx(C,{path:"/generate-images",component:()=>l.jsx(P,{Component:qb})}),l.jsx(C,{path:"/character-gallery/:characterId",component:()=>l.jsx(P,{Component:Gb})}),l.jsx(C,{path:"/chat/:characterId",component:()=>l.jsx(P,{Component:Wi})}),l.jsx(C,{path:"/recent-chats",component:()=>l.jsx(P,{Component:Bi})}),l.jsx(C,{path:"/subscribe",component:()=>l.jsx(P,{Component:_b})}),l.jsx(C,{path:"/subscription/manage",component:()=>l.jsx(P,{Component:Sb})}),l.jsx(C,{path:"/subscription/success",component:()=>l.jsx(P,{Component:Ib})}),l.jsx(C,{path:"/subscription/cancel",component:()=>l.jsx(P,{Component:Cb})}),l.jsx(C,{path:"/coins",component:()=>l.jsx(P,{Component:Pb})}),l.jsx(C,{path:"/payment/success",component:()=>l.jsx(P,{Component:Bb})}),l.jsx(C,{path:"/payment/cancel",component:()=>l.jsx(P,{Component:Wb})}),l.jsx(C,{path:"/settings",component:()=>l.jsx(P,{Component:Ab})}),l.jsx(C,{path:"/showcase",component:()=>l.jsx(P,{Component:Db})}),l.jsx(C,{path:"/gallery",component:()=>l.jsx(P,{Component:Nb})}),l.jsx(C,{path:"/user-gallery",component:()=>l.jsx(P,{Component:Ki})}),l.jsx(C,{path:"/user-gallery/character/:characterId",component:()=>l.jsx(P,{Component:jb})}),l.jsx(C,{path:"/all-user-images",component:()=>l.jsx(P,{Component:Ob})}),l.jsx(C,{path:"/search",component:()=>l.jsx(P,{Component:Vb})}),l.jsx(C,{path:"/features",component:()=>l.jsx(P,{Component:Kb})}),l.jsx(C,{path:"/tags/:tagName",component:()=>l.jsx(P,{Component:zb})}),l.jsx(C,{path:"/favorites",component:()=>l.jsx(P,{Component:Rb})}),l.jsx(C,{path:"/not-found",component:()=>l.jsx(P,{Component:qi})}),l.jsx(C,{path:"/user-profile",component:()=>l.jsx(P,{Component:Gi})}),l.jsx(C,{path:"/user-profile/:id",component:()=>l.jsx(P,{Component:Gi})}),l.jsx(C,{path:"/user-gallery",component:()=>l.jsx(P,{Component:Ki})}),l.jsx(C,{path:"/create-character",component:()=>l.jsx(P,{Component:Fb})}),l.jsx(C,{path:"/create-character-old",component:()=>l.jsx(P,{Component:Mb})}),l.jsx(C,{path:"/user-characters",component:()=>l.jsx(P,{Component:$b})}),l.jsx(C,{path:"/test",component:()=>l.jsx(P,{Component:Ub})}),l.jsx(C,{path:"/auth-debug",component:()=>l.jsx(P,{Component:Hb})}),l.jsx(C,{path:"/guides",component:()=>l.jsx(P,{Component:ax})}),l.jsx(C,{path:"/guides/:slug",component:()=>l.jsx(P,{Component:cx})}),l.jsx(C,{path:"/legal",component:()=>l.jsx(P,{Component:Yb})}),l.jsx(C,{path:"/legal/community-guidelines",component:()=>l.jsx(P,{Component:Jb})}),l.jsx(C,{path:"/legal/privacy-policy",component:()=>l.jsx(P,{Component:Xb})}),l.jsx(C,{path:"/legal/terms-of-service",component:()=>l.jsx(P,{Component:Qb})}),l.jsx(C,{path:"/legal/content-policy",component:()=>l.jsx(P,{Component:Zb})}),l.jsx(C,{path:"/legal/blocked-content-policy",component:()=>l.jsx(P,{Component:ex})}),l.jsx(C,{path:"/legal/cookie-policy",component:()=>l.jsx(P,{Component:tx})}),l.jsx(C,{path:"/legal/dmca-notice",component:()=>l.jsx(P,{Component:nx})}),l.jsx(C,{path:"/legal/2257-exemption-statement",component:()=>l.jsx(P,{Component:rx})}),l.jsx(C,{path:"/legal/content-provider-compliance",component:()=>l.jsx(P,{Component:sx})}),l.jsx(C,{path:"/legal/content-safety-compliance",component:()=>l.jsx(P,{Component:ox})}),l.jsx(C,{path:"/legal/liability-disclaimer",component:()=>l.jsx(P,{Component:ix})}),l.jsx(C,{path:"*",component:()=>l.jsx(P,{Component:qi})})]})]})})}const fx=[{icon:l.jsx(Du,{size:20}),text:"For You",route:"/"},{icon:l.jsx(Lu,{size:20}),text:"Profile",route:"/user-profile"},{icon:l.jsx(Qi,{size:20}),text:"Chat",route:"/chat"},{icon:l.jsx(Mu,{size:20}),text:"Characters",route:"/user-characters"},{icon:l.jsx(Zi,{size:20}),text:"Gallery",route:"/showcase"},{icon:l.jsx(Io,{size:20}),text:"User Gallery",route:"/user-gallery"},{icon:l.jsx(Fu,{size:20}),text:"Favorites",route:"/favorites"},{icon:l.jsx($u,{size:20}),text:"Guides",route:"/guides"},{icon:l.jsx(Uu,{size:20}),text:"Coins",route:"/coins"},{icon:l.jsx(zu,{size:20}),text:"Membership",route:"/subscribe"},{divider:!0},{icon:l.jsx(Vu,{size:20}),text:"Create a Model",route:"/create-character"},{icon:l.jsx(Io,{size:20}),text:"Generate images",route:"/generate-images"}],hx=d.createContext({expanded:!0});function px({isOpen:t,isCollapsed:e,onClose:n,onToggleCollapse:r}){const{user:s}=Rt();return l.jsxs("aside",{className:`
        fixed top-0 left-0 bottom-0
        ${e?"w-16":"w-64"} 
        bg-zinc-900/95 backdrop-blur-md border-r border-orange-500/20
        shadow-2xl shadow-orange-500/10
        z-40 
        transform 
        ${t?"translate-x-0":"-translate-x-full"} 
        transition-all duration-300 ease-in-out
        flex flex-col
      `,children:[l.jsx("div",{className:`${e?"p-2":"p-4 pb-2"} flex ${e?"justify-center":"justify-between"} items-center ${e?"":"border-b border-orange-500/20"}`,children:e?l.jsx(Xe,{href:"/",onClick:n,className:"group",children:l.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR Logo",className:"w-8 h-8 transition-all duration-300 ease-out cursor-pointer group-hover:scale-110"})}):l.jsx(Xe,{href:"/",onClick:n,children:l.jsx("img",{src:"/medusaSnake.png",alt:"MedusaVR Logo",className:"w-20 h-20 transition-all duration-300 ease-out cursor-pointer hover:scale-105"})})}),l.jsx(hx.Provider,{value:{expanded:!e},children:l.jsx("ul",{className:`flex-1 ${e?"px-1 py-2":"px-3"} overflow-y-auto`,children:fx.map((o,i)=>{if(o.divider)return e?null:l.jsx("hr",{className:"my-3 border-orange-500/20"},i);if(o.route){const c=o.text==="Profile"&&s?.id?`/user-profile/${s.id}`:o.route;return l.jsx("li",{className:"w-full",children:l.jsxs(Xe,{href:c,"data-sidebar-item":o.text,className:ft("relative flex items-center rounded-md transition-all group w-full cursor-pointer text-zinc-300 hover:text-orange-400 duration-150 no-underline",e?"p-2 justify-center mb-1 mx-auto w-12 h-12":"px-3 py-2 gap-2","hover:bg-orange-500/10"),onClick:()=>{console.log("Sidebar link clicked:",c,o.text),e||n()},children:[l.jsx("div",{className:ft("flex-shrink-0 transition-colors",e&&"justify-center items-center"),children:o.icon}),!e&&l.jsx("span",{className:"flex-1 text-sm font-medium whitespace-nowrap transition-colors",children:o.text}),e&&l.jsx("div",{className:ft("absolute left-full ml-2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50","invisible opacity-0 group-hover:visible group-hover:opacity-100"),children:o.text})]})},i)}else return l.jsx("li",{className:"w-full",children:l.jsxs("div",{className:ft("w-full opacity-50 cursor-default relative flex items-center rounded-md transition-all group",e?"p-2 justify-center mb-1 mx-auto w-12 h-12":"px-3 py-2 gap-2"),children:[l.jsx("div",{className:ft("flex-shrink-0 transition-colors",e&&"justify-center items-center"),children:o.icon}),!e&&l.jsx("span",{className:"flex-1 text-sm font-medium whitespace-nowrap transition-colors",children:o.text}),e&&l.jsx("div",{className:ft("absolute left-full ml-2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50","invisible opacity-0 group-hover:visible group-hover:opacity-100"),children:o.text})]})},i)})})}),l.jsx("div",{className:`flex ${e?"p-2 justify-center":"p-3"} items-center ${e?"":"border-t border-orange-500/20 bg-orange-500/5"}`,children:e?l.jsxs("div",{className:"relative group",children:[l.jsx("img",{src:s?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(s?.username||"Guest")}`,alt:"User avatar",className:"w-8 h-8 rounded-md border border-orange-500/30 flex-shrink-0 cursor-pointer transition-all duration-200 group-hover:scale-110"}),l.jsx("div",{className:"absolute bottom-full mb-2 left-1/2 transform -translate-x-1/2 whitespace-nowrap rounded-md bg-zinc-800/95 backdrop-blur-sm border border-orange-500/30 px-2 py-1 text-xs text-orange-200 shadow-lg shadow-orange-500/10 transition-opacity duration-150 z-50 invisible opacity-0 group-hover:visible group-hover:opacity-100",children:s?.username||"Guest User"})]}):l.jsxs(l.Fragment,{children:[l.jsx("img",{src:s?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(s?.username||"Guest")}`,alt:"User avatar",className:"w-10 h-10 rounded-md border border-orange-500/30 flex-shrink-0"}),l.jsxs("div",{className:"ml-3 leading-4 text-white flex-1 min-w-0 overflow-hidden",children:[l.jsx("h4",{className:"font-semibold text-orange-200 truncate text-sm",children:s?.username||"Guest User"}),l.jsx("span",{className:"text-xs text-orange-300/60 truncate block",children:s?.email||"Not signed in"})]}),l.jsx(Hu,{size:16,className:"text-orange-400/70 hover:text-orange-400 cursor-pointer transition-colors flex-shrink-0 ml-2"})]})})]})}const mx=({className:t="",size:e=24})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"}),l.jsx("circle",{cx:"12",cy:"12",r:"3"})]}),gx=({className:t="",size:e=24})=>l.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:e,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:t,children:[l.jsx("path",{d:"M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07a3 3 0 1 1-4.24-4.24"}),l.jsx("line",{x1:"1",y1:"1",x2:"23",y2:"23"})]}),nt=d.forwardRef(({className:t,type:e,...n},r)=>l.jsx("input",{type:e,className:G("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",t),ref:r,...n}));nt.displayName="Input";var yx="Label",au=d.forwardRef((t,e)=>l.jsx(ae.label,{...t,ref:e,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(t.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));au.displayName=yx;var cu=au;const vx=ir("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),xt=d.forwardRef(({className:t,...e},n)=>l.jsx(cu,{ref:n,className:G(vx(),t),...e}));xt.displayName=cu.displayName;function lu({isOpen:t,setIsOpen:e,openSignUp:n}){const{login:r,loginWithGoogle:s,isLoading:o}=Rt(),[i,c]=d.useState({emailOrUsername:"",password:""}),[a,u]=d.useState(null),[f,h]=d.useState(null),[p,m]=d.useState(!1),{toast:g}=Fs(),w=async y=>{y.preventDefault(),u(null),h(null);try{await r(i),e(!1)}catch(b){const T=b instanceof Error?b.message:"Login failed";if(u(T),T.includes("verify your email")||T.includes("verification"))try{const S=await(await fetch("/api/auth/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)})).json();S.requiresEmailVerification&&S.email&&h(S.email)}catch{}}},v=async()=>{if(f){m(!0);try{const b=await(await fetch("/api/auth/resend-verification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:f})})).json();b.success?(g({title:"Verification Email Sent",description:"Please check your inbox for a new verification email."}),u("Verification email sent! Please check your inbox.")):g({title:"Failed to Resend",description:b.message,variant:"destructive"})}catch(y){console.error("Resend verification error:",y),g({title:"Error",description:"Failed to resend verification email. Please try again.",variant:"destructive"})}finally{m(!1)}}},x=async()=>{try{await s(),e(!1)}catch(y){u(y instanceof Error?y.message:"Google sign-in failed")}};return l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>e(!1),children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center px-4",children:l.jsxs(tt,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-800/90 to-zinc-900/90 backdrop-blur-lg border border-orange-500/20 p-6 text-white shadow-2xl shadow-orange-500/10 transition-all",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx(En,{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Sign in to MedusaVR"}),l.jsx("button",{onClick:()=>e(!1),className:"w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:l.jsx(fn,{className:"h-2.5 w-2.5 text-gray-400"})})]}),a&&l.jsxs("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:[l.jsx("p",{className:"text-red-400 text-sm",children:a}),f&&l.jsx("div",{className:"mt-3",children:l.jsx(se,{onClick:v,disabled:p,variant:"outline",size:"sm",className:"w-full border-orange-500/30 text-orange-400 hover:bg-orange-500/10 hover:border-orange-500/50",children:p?l.jsxs(l.Fragment,{children:[l.jsx(rs,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending..."]}):l.jsxs(l.Fragment,{children:[l.jsx(Bu,{className:"mr-2 h-4 w-4"}),"Resend Verification Email"]})})})]}),l.jsxs("form",{onSubmit:w,className:"space-y-6",children:[l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"emailOrUsername",className:"text-zinc-200 font-medium",children:"Email or Username"}),l.jsx(nt,{id:"emailOrUsername",name:"emailOrUsername",type:"text",value:i.emailOrUsername,onChange:y=>c({...i,emailOrUsername:y.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",required:!0})]}),l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"password",className:"text-zinc-200 font-medium",children:"Password"}),l.jsx(nt,{id:"password",name:"password",type:"password",value:i.password,onChange:y=>c({...i,password:y.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",required:!0})]}),l.jsx(se,{type:"submit",className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 transform hover:scale-105 transition-all duration-200 shadow-lg shadow-orange-500/20",disabled:o,children:o?l.jsxs(l.Fragment,{children:[l.jsx(rs,{className:"mr-2 h-4 w-4 animate-spin"}),"Signing in..."]}):"Sign In"})]}),l.jsx("div",{className:"my-6 text-center",children:l.jsx(se,{variant:"outline",className:"w-full bg-zinc-800/30 border-orange-500/30 hover:bg-orange-500/10 hover:border-orange-500/50 text-zinc-200 hover:text-orange-300",onClick:x,children:"Continue with Google"})}),l.jsxs("p",{className:"text-center text-sm text-zinc-400",children:["Don't have an account?"," ",l.jsx("button",{onClick:()=>{e(!1),n()},className:"text-orange-400 hover:text-orange-300 font-medium transition-colors duration-200",children:"Sign up"})]})]})})]})})}function uu({isOpen:t,setIsOpen:e,openSignIn:n}){const{register:r,registerWithGoogle:s,isLoading:o}=Rt(),[i,c]=d.useState({email:"",username:"",password:"",confirmPassword:""}),[a,u]=d.useState(null),[f,h]=d.useState(!1),{toast:p}=Fs(),m=async v=>{if(v.preventDefault(),u(null),h(!0),i.password!==i.confirmPassword){u("Passwords do not match"),h(!1);return}if(i.password.length<6){u("Password must be at least 6 characters"),h(!1);return}try{await r({email:i.email,username:i.username,password:i.password}),e(!1),p({title:"Account Created Successfully!",description:"Welcome to MedusaVR! You're now logged in."}),c({email:"",username:"",password:"",confirmPassword:""})}catch(x){console.error("Registration error:",x),u(x.message||"Registration failed")}finally{h(!1)}},g=async()=>{try{await s(),e(!1),c({email:"",username:"",password:"",confirmPassword:""}),u(null),p({title:"Welcome to MedusaVR!",description:"Here are 15 free coins to get you started."})}catch(v){u(v instanceof Error?v.message:"Google sign-up failed")}},w=()=>{e(!1),c({email:"",username:"",password:"",confirmPassword:""}),u(null)};return l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:w,children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto",children:l.jsx("div",{className:"flex min-h-full items-center justify-center p-4 text-center",children:l.jsx(X,{as:d.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 scale-95",enterTo:"opacity-100 scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 scale-100",leaveTo:"opacity-0 scale-95",children:l.jsxs(tt,{className:"w-full max-w-md transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-800/90 to-zinc-900/90 backdrop-blur-lg border border-orange-500/20 p-6 text-white shadow-2xl shadow-orange-500/10 transition-all",children:[l.jsxs("div",{className:"flex justify-between items-center mb-6",children:[l.jsx(En,{className:"text-2xl font-bold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Create Your Account"}),l.jsx("button",{onClick:w,className:"w-6 h-6 rounded-full bg-transparent hover:bg-gray-500/20 flex items-center justify-center opacity-40 hover:opacity-60 transition-all duration-200 focus:outline-none",children:l.jsx(fn,{className:"h-2.5 w-2.5 text-gray-400"})})]}),a&&l.jsx("div",{className:"mb-4 p-3 bg-red-500/10 border border-red-500/30 rounded-xl backdrop-blur-sm",children:l.jsx("p",{className:"text-red-400 text-sm",children:a})}),l.jsxs(l.Fragment,{children:[l.jsxs("form",{onSubmit:m,className:"space-y-4",children:[l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"email",className:"text-zinc-200 font-medium",children:"Email"}),l.jsx(nt,{id:"email",type:"email",value:i.email,onChange:v=>c({...i,email:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Enter your email",required:!0})]}),l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"username",className:"text-zinc-200 font-medium",children:"Username"}),l.jsx(nt,{id:"username",type:"text",value:i.username,onChange:v=>c({...i,username:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Choose a username",required:!0})]}),l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"password",className:"text-zinc-200 font-medium",children:"Password"}),l.jsx(nt,{id:"password",type:"password",value:i.password,onChange:v=>c({...i,password:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Create a strong password",required:!0})]}),l.jsxs("div",{className:"space-y-2 text-left",children:[l.jsx(xt,{htmlFor:"confirmPassword",className:"text-zinc-200 font-medium",children:"Confirm Password"}),l.jsx(nt,{id:"confirmPassword",type:"password",value:i.confirmPassword,onChange:v=>c({...i,confirmPassword:v.target.value}),className:"bg-zinc-800/50 border-orange-500/20 focus:border-orange-500/50 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400",placeholder:"Confirm your password",required:!0})]}),l.jsx(se,{type:"submit",disabled:o||f,className:"w-full bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 transform hover:scale-105 transition-all duration-200 shadow-lg shadow-orange-500/20",children:o||f?l.jsxs(l.Fragment,{children:[l.jsx(rs,{className:"mr-2 h-4 w-4 animate-spin"}),"Creating Account..."]}):"Create Account"})]}),l.jsx("div",{className:"my-6 text-center",children:l.jsx(se,{variant:"outline",className:"w-full bg-zinc-800/30 border-orange-500/30 hover:bg-orange-500/10 hover:border-orange-500/50 text-zinc-200 hover:text-orange-300",onClick:g,children:"Continue with Google"})}),l.jsxs("p",{className:"text-center text-sm text-zinc-400",children:["Already have an account?"," ",l.jsx("button",{onClick:()=>{e(!1),n()},className:"text-orange-400 hover:text-orange-300 font-medium transition-colors duration-200",children:"Sign in"})]})]})]})})})})]})})}const du=d.createContext(void 0),Yi="medusavr_show_nsfw",wx=({children:t})=>{const[e,n]=d.useState(!1),[r,s]=d.useState(()=>{try{const u=localStorage.getItem(Yi);return u!==null?JSON.parse(u):!1}catch{return!1}});d.useEffect(()=>{try{localStorage.setItem(Yi,JSON.stringify(r))}catch(u){console.warn("Failed to save NSFW preference to localStorage:",u)}},[r]);const o=()=>{n(u=>!u)},i=()=>{s(u=>!u)},c=u=>u&&!r,a=u=>c(u)?"filter: blur(20px); opacity: 0.6;":"";return l.jsx(du.Provider,{value:{isBlurred:e,toggleBlur:o,showNSFW:r,toggleNSFWFilter:i,shouldBlurNSFW:c,getNSFWBlurStyles:a},children:t})},bx=()=>{const t=d.useContext(du);if(t===void 0)throw new Error("useImageBlur must be used within an ImageBlurProvider");return t};function xx({sidebarOpen:t,onToggleSidebar:e}){const[n,r]=d.useState(!1),[s,o]=d.useState(!1),[i,c]=d.useState(!1),[a,u]=d.useState(""),{user:f,isAuthenticated:h,logout:p}=Rt(),{isBlurred:m,toggleBlur:g,showNSFW:w,toggleNSFWFilter:v}=bx();or();const[x,y]=Ds(),{data:b,error:T,isLoading:_}=Os({queryKey:["user","profile"],queryFn:ne.getProfile,enabled:h,staleTime:1/0,refetchInterval:!1,refetchOnWindowFocus:!1,retry:!1}),R=(b||f)?.coins||0,F=d.useRef(null);d.useEffect(()=>{const D=M=>{F.current&&!F.current.contains(M.target)&&c(!1)};return document.addEventListener("mousedown",D),()=>{document.removeEventListener("mousedown",D)}},[]);const z=async()=>{try{await p(),c(!1)}catch(D){console.error("Logout failed:",D)}},O=()=>{const D=a.trim();D&&y(`/search?q=${encodeURIComponent(D)}`)},$=D=>{D.key==="Enter"&&O()};return l.jsxs(l.Fragment,{children:[l.jsxs("header",{className:"fixed top-0 left-0 right-0 z-50 bg-zinc-900/80 backdrop-blur-md border-b border-orange-500/20 px-2 sm:px-4 py-3 flex items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center flex-1 min-w-0 gap-1",children:[l.jsx("button",{onClick:e,className:"p-2 rounded-lg text-gray-100 hover:text-orange-400 hover:bg-orange-500/10 cursor-pointer hover:scale-110 transition-all duration-150 shrink-0",children:l.jsx(Wu,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),l.jsx(Xe,{href:"/ForYouPage",children:l.jsx(se,{variant:"ghost",size:"icon",className:"cursor-pointer hover:scale-110 transition-transform duration-150 hover:bg-orange-500/10 hover:text-orange-400 shrink-0",children:l.jsx(ea,{className:"w-5 h-5 sm:w-6 sm:h-6"})})}),l.jsxs("div",{className:"relative flex-1 max-w-[150px] sm:max-w-sm",children:[l.jsx("button",{onClick:O,className:"absolute left-3 top-1/2 transform -translate-y-1/2 z-10 hover:text-orange-400 transition-colors cursor-pointer",children:l.jsx(qu,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-400/70"})}),l.jsx(nt,{type:"search",placeholder:"Search...",value:a,onChange:D=>u(D.target.value),onKeyPress:$,className:"w-full h-9 sm:h-10 bg-zinc-800/50 backdrop-blur-sm border border-orange-500/20 focus:border-orange-500/40 focus:ring-2 focus:ring-orange-500/20 text-zinc-100 placeholder:text-zinc-400 text-sm pl-9 sm:pl-12 transition-all duration-200"})]})]}),l.jsxs("div",{className:"flex items-center gap-1 shrink-0",children:[l.jsx("button",{onClick:v,className:"p-2 rounded-lg text-gray-100 hover:text-orange-400 hover:bg-orange-500/10 cursor-pointer hover:scale-110 transition-all duration-150 shrink-0",children:w?l.jsx(mx,{className:"w-5 h-5 sm:w-6 sm:h-6"}):l.jsx(gx,{className:"w-5 h-5 sm:w-6 sm:h-6"})}),l.jsx(Xe,{href:"/coins",children:l.jsxs(se,{variant:"outline",size:"sm",className:"bg-orange-500/20 border-orange-500/30 hover:bg-orange-500/30 cursor-pointer hover:scale-110 transition-all duration-150 backdrop-blur-sm h-9 px-2 sm:px-3",children:[l.jsx(Gu,{className:"w-4 h-4 sm:w-5 sm:h-5 text-orange-400 mr-1 sm:mr-2"}),l.jsx("span",{className:"text-orange-200 text-xs sm:text-sm",children:sf(R,7)})]})}),h?l.jsxs("div",{className:"relative",ref:F,children:[l.jsxs("button",{onClick:()=>c(!i),className:"flex items-center gap-1 sm:gap-2 cursor-pointer hover:scale-105 transition-all duration-150 p-1.5 sm:p-2 rounded-lg hover:bg-orange-500/10 bg-zinc-800/50 border border-orange-500/20",children:[l.jsx("div",{className:"w-7 h-7 sm:w-8 sm:h-8 rounded-full overflow-hidden border border-orange-500/30 shrink-0",children:l.jsx("img",{src:f?.avatarUrl||`https://ui-avatars.com/api/?background=ea580c&color=ffffff&bold=true&name=${encodeURIComponent(f?.username||"User")}`,alt:"User profile",className:"w-full h-full object-cover"})}),l.jsx(Ku,{className:`w-3 h-3 sm:w-4 sm:h-4 text-orange-400 transition-transform duration-200 shrink-0 ${i?"rotate-180":""}`})]}),i&&l.jsxs("div",{className:"absolute right-0 top-full mt-2 w-56 sm:w-64 bg-zinc-900/95 backdrop-blur-md border border-orange-500/20 rounded-lg shadow-2xl shadow-orange-500/10 py-2 z-50",children:[l.jsxs("div",{className:"px-3 sm:px-4 py-3 border-b border-orange-500/20",children:[l.jsx("h3",{className:"font-semibold text-orange-200 text-sm truncate",children:f?.username||"User"}),l.jsx("p",{className:"text-xs text-orange-300/60 truncate",children:f?.email||"user@example.com"})]}),l.jsxs("div",{className:"py-1",children:[l.jsx(Xe,{href:`/user-profile/${f?.id}`,children:l.jsxs("button",{onClick:()=>c(!1),className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-orange-500/10 hover:text-orange-400 transition-colors duration-150 cursor-pointer",children:[l.jsx(Yu,{className:"w-4 h-4 mr-3 shrink-0"}),l.jsx("span",{className:"truncate",children:"Profile"})]})}),l.jsx(Xe,{href:"/settings",children:l.jsxs("button",{onClick:()=>c(!1),className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-orange-500/10 hover:text-orange-400 transition-colors duration-150 cursor-pointer",children:[l.jsx(Ju,{className:"w-4 h-4 mr-3 shrink-0"}),l.jsx("span",{className:"truncate",children:"Account"})]})}),l.jsx("div",{className:"border-t border-orange-500/20 my-1"}),l.jsxs("button",{onClick:z,className:"w-full flex items-center px-3 sm:px-4 py-2 text-sm text-zinc-300 hover:bg-red-500/10 hover:text-red-400 transition-colors duration-150 cursor-pointer",children:[l.jsx(Xu,{className:"w-4 h-4 mr-3 shrink-0"}),l.jsx("span",{className:"truncate",children:"Sign out"})]})]})]})]}):l.jsxs("div",{className:"flex items-center gap-1 sm:gap-2",children:[l.jsxs(se,{variant:"ghost",size:"sm",className:"text-zinc-300 hover:text-orange-400 hover:bg-orange-500/10 transition-all duration-150 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9",onClick:()=>o(!0),children:[l.jsx("span",{className:"hidden xs:inline",children:"Sign Up"}),l.jsx("span",{className:"xs:hidden",children:"Sign Up"})]}),l.jsxs(se,{variant:"default",size:"sm",className:"bg-gradient-to-r from-orange-500 to-amber-500 hover:from-orange-600 hover:to-amber-600 text-white shadow-lg shadow-orange-500/25 hover:scale-105 transition-all duration-150 text-xs sm:text-sm px-2 sm:px-3 h-8 sm:h-9",onClick:()=>r(!0),children:[l.jsx("span",{className:"hidden xs:inline",children:"Sign In"}),l.jsx("span",{className:"xs:hidden",children:"Sign In"})]})]})]})]}),l.jsx(lu,{isOpen:n,setIsOpen:r,openSignUp:()=>o(!0)}),l.jsx(uu,{isOpen:s,setIsOpen:o,openSignIn:()=>r(!0)})]})}const Tx=[{name:"Home",href:"/ForYouPage",icon:ea},{name:"Create Character",href:"/create-character",icon:Qu},{name:"Create Image",href:"/generate-images",icon:Zi},{name:"Chats",href:"/chat",icon:Qi}];function Ex(){const[t]=Ds();return l.jsx("nav",{className:`
        fixed 
        bottom-0 
        left-0 
        right-0 
        h-16 
        bg-zinc-900/80 
        backdrop-blur-md 
        border-t 
        border-orange-500/20 
        z-30 
        flex 
        justify-around 
        items-center
        shadow-lg
        shadow-orange-500/10
      `,children:Tx.map(e=>{const n=e.icon,r=t===e.href||t==="/"&&e.href==="/ForYouPage";return l.jsxs(Xe,{href:e.href,className:G("flex flex-col items-center space-y-1 p-3 rounded-xl transition-all duration-200",r?"text-orange-400 bg-orange-500/10 scale-105":"text-zinc-400 hover:text-orange-300 hover:bg-orange-500/5"),children:[l.jsx(n,{className:"w-5 h-5"}),l.jsx("span",{className:"text-xs font-medium",children:e.name})]},e.name)})})}function _x({children:t}){const[e,n]=d.useState(!1),[r,s]=d.useState(!1);return l.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-zinc-900 via-zinc-800 to-orange-900/20 text-white relative",children:[l.jsx(px,{isOpen:e,isCollapsed:r,onClose:()=>n(!1),onToggleCollapse:()=>s(!r)}),e&&!r&&l.jsx("div",{className:"fixed inset-0 bg-transparent z-30",onClick:()=>n(!1)}),l.jsxs("div",{className:`
          transition-all duration-500 ease-in-out
          ${e&&!r?"filter blur-sm":""}
        `,children:[l.jsx(xx,{sidebarOpen:e,onToggleSidebar:()=>n(o=>!o)}),l.jsx("main",{className:"pt-24 pb-20 px-6 min-h-screen",children:t}),l.jsx(Ex,{})]})]})}const Sx=ir("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function es({className:t,variant:e,...n}){return l.jsx("div",{className:G(Sx({variant:e}),t),...n})}var Ix="Separator",Ji="horizontal",Cx=["horizontal","vertical"],fu=d.forwardRef((t,e)=>{const{decorative:n,orientation:r=Ji,...s}=t,o=Px(r)?r:Ji,c=n?{role:"none"}:{"aria-orientation":o==="vertical"?o:void 0,role:"separator"};return l.jsx(ae.div,{"data-orientation":o,...c,...s,ref:e})});fu.displayName=Ix;function Px(t){return Cx.includes(t)}var hu=fu;const pu=d.forwardRef(({className:t,orientation:e="horizontal",decorative:n=!0,...r},s)=>l.jsx(hu,{ref:s,decorative:n,orientation:e,className:G("shrink-0 bg-border",e==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));pu.displayName=hu.displayName;const Ax=[{id:"character-type",name:"character-type",displayName:"Character Type",description:"Basic character identity and type",maxSelections:1,required:!0,tags:[{id:"female",name:"female",displayName:"Female",emoji:"üë©",color:"#e84393",isMature:!1,category:"Character Type"},{id:"male",name:"male",displayName:"Male",emoji:"üë®",color:"#0984e3",isMature:!1,category:"Character Type"},{id:"android",name:"android",displayName:"Android",emoji:"ü§ñ",color:"#636e72",isMature:!1,category:"Character Type"},{id:"alien",name:"alien",displayName:"Alien",emoji:"üëΩ",color:"#00b894",isMature:!1,category:"Character Type"},{id:"angel",name:"angel",displayName:"Angel",emoji:"üëº",color:"#ffeaa7",isMature:!1,category:"Character Type"},{id:"fairy",name:"fairy",displayName:"Fairy",emoji:"üßö",color:"#a29bfe",isMature:!1,category:"Character Type"},{id:"robot",name:"robot",displayName:"Robot",emoji:"ü§ñ",color:"#636e72",isMature:!1,category:"Character Type"},{id:"animal",name:"animal",displayName:"Animal",emoji:"üêæ",color:"#e17055",isMature:!1,category:"Character Type"}]},{id:"genre",name:"genre",displayName:"Genre",description:"Story genre and setting type",maxSelections:3,tags:[{id:"sci-fi",name:"sci-fi",displayName:"Sci-Fi",emoji:"üöÄ",color:"#0984e3",isMature:!1,category:"Genre"},{id:"fantasy",name:"fantasy",displayName:"Fantasy",emoji:"üßô",color:"#6c5ce7",isMature:!1,category:"Genre"},{id:"horror",name:"horror",displayName:"Horror",emoji:"üëª",color:"#2d3436",isMature:!1,category:"Genre"},{id:"romance",name:"romance",displayName:"Romance",emoji:"üíï",color:"#fd79a8",isMature:!1,category:"Genre"},{id:"adventure",name:"adventure",displayName:"Adventure",emoji:"‚öîÔ∏è",color:"#e17055",isMature:!1,category:"Genre"},{id:"mystery",name:"mystery",displayName:"Mystery",emoji:"üîç",color:"#636e72",isMature:!1,category:"Genre"},{id:"slice-of-life",name:"slice-of-life",displayName:"Slice of Life",emoji:"üå∏",color:"#ffeaa7",isMature:!1,category:"Genre"},{id:"cyberpunk",name:"cyberpunk",displayName:"Cyberpunk",emoji:"üåÜ",color:"#00b894",isMature:!1,category:"Genre"}]},{id:"personality",name:"personality",displayName:"Personality",description:"Character personality traits",maxSelections:3,tags:[{id:"confident",name:"confident",displayName:"Confident",emoji:"üí™",color:"#e84393",isMature:!1,category:"Personality"},{id:"shy",name:"shy",displayName:"Shy",emoji:"üòä",color:"#fd79a8",isMature:!1,category:"Personality"},{id:"mysterious",name:"mysterious",displayName:"Mysterious",emoji:"üé≠",color:"#636e72",isMature:!1,category:"Personality"},{id:"playful",name:"playful",displayName:"Playful",emoji:"üé™",color:"#ffeaa7",isMature:!1,category:"Personality"},{id:"serious",name:"serious",displayName:"Serious",emoji:"üéØ",color:"#2d3436",isMature:!1,category:"Personality"},{id:"caring",name:"caring",displayName:"Caring",emoji:"üíù",color:"#00b894",isMature:!1,category:"Personality"},{id:"rebellious",name:"rebellious",displayName:"Rebellious",emoji:"üî•",color:"#e17055",isMature:!1,category:"Personality"},{id:"intellectual",name:"intellectual",displayName:"Intellectual",emoji:"üìö",color:"#0984e3",isMature:!1,category:"Personality"}]},{id:"appearance",name:"appearance",displayName:"Appearance",description:"Visual appearance details",maxSelections:2,tags:[{id:"long-hair",name:"long-hair",displayName:"Long Hair",emoji:"üë±‚Äç‚ôÄÔ∏è",color:"#ffeaa7",isMature:!1,category:"Appearance"},{id:"short-hair",name:"short-hair",displayName:"Short Hair",emoji:"üë©‚Äçü¶±",color:"#fd79a8",isMature:!1,category:"Appearance"},{id:"colorful-hair",name:"colorful-hair",displayName:"Colorful Hair",emoji:"üåà",color:"#00b894",isMature:!1,category:"Appearance"},{id:"glasses",name:"glasses",displayName:"Glasses",emoji:"üëì",color:"#0984e3",isMature:!1,category:"Appearance"},{id:"hat",name:"hat",displayName:"Hat",emoji:"üé©",color:"#e17055",isMature:!1,category:"Appearance"},{id:"smile",name:"smile",displayName:"Friendly Smile",emoji:"üòä",color:"#636e72",isMature:!1,category:"Appearance"},{id:"wings",name:"wings",displayName:"Wings",emoji:"üïäÔ∏è",color:"#2d3436",isMature:!1,category:"Appearance"},{id:"glowing-eyes",name:"glowing-eyes",displayName:"Glowing Eyes",emoji:"üëÅÔ∏è",color:"#6c5ce7",isMature:!1,category:"Appearance"}]},{id:"origin",name:"origin",displayName:"Origin",description:"Character background and origin",maxSelections:1,tags:[{id:"human",name:"human",displayName:"Human",emoji:"üë§",color:"#6c5ce7",isMature:!1,category:"Origin"},{id:"magical",name:"magical",displayName:"Magical",emoji:"‚ú®",color:"#a29bfe",isMature:!1,category:"Origin"},{id:"divine",name:"divine",displayName:"Divine",emoji:"üëº",color:"#ffeaa7",isMature:!1,category:"Origin"},{id:"alien",name:"alien",displayName:"Alien",emoji:"üëΩ",color:"#00b894",isMature:!1,category:"Origin"},{id:"artificial",name:"artificial",displayName:"Artificial",emoji:"ü§ñ",color:"#636e72",isMature:!1,category:"Origin"},{id:"mythical",name:"mythical",displayName:"Mythical",emoji:"üêâ",color:"#fd79a8",isMature:!1,category:"Origin"},{id:"nature",name:"nature",displayName:"Nature",emoji:"üåø",color:"#e84393",isMature:!1,category:"Origin"},{id:"cosmic",name:"cosmic",displayName:"Cosmic",emoji:"‚≠ê",color:"#e17055",isMature:!1,category:"Origin"}]},{id:"fantasy",name:"fantasy",displayName:"Fantasy",description:"Fantasy elements and abilities",maxSelections:void 0,tags:[{id:"magic-user",name:"magic-user",displayName:"Magic User",emoji:"üßô",color:"#6c5ce7",isMature:!1,category:"Fantasy"},{id:"shapeshifter",name:"shapeshifter",displayName:"Shapeshifter",emoji:"ü¶ã",color:"#fd79a8",isMature:!1,category:"Fantasy"},{id:"immortal",name:"immortal",displayName:"Immortal",emoji:"‚ôæÔ∏è",color:"#ffeaa7",isMature:!1,category:"Fantasy"},{id:"telepathic",name:"telepathic",displayName:"Telepathic",emoji:"üß†",color:"#0984e3",isMature:!1,category:"Fantasy"},{id:"elemental-powers",name:"elemental-powers",displayName:"Elemental Powers",emoji:"üî•",color:"#e17055",isMature:!1,category:"Fantasy"},{id:"time-traveler",name:"time-traveler",displayName:"Time Traveler",emoji:"‚è∞",color:"#636e72",isMature:!1,category:"Fantasy"},{id:"superhuman",name:"superhuman",displayName:"Superhuman",emoji:"üí™",color:"#e84393",isMature:!1,category:"Fantasy"},{id:"cursed",name:"cursed",displayName:"Cursed",emoji:"üíÄ",color:"#2d3436",isMature:!1,category:"Fantasy"}]},{id:"ethnicity",name:"ethnicity",displayName:"Ethnicity",description:"Character ethnicity and cultural background",maxSelections:void 0,tags:[{id:"asian",name:"asian",displayName:"Asian",emoji:"üèØ",color:"#fd79a8",isMature:!1,category:"Ethnicity"},{id:"european",name:"european",displayName:"European",emoji:"üè∞",color:"#0984e3",isMature:!1,category:"Ethnicity"},{id:"african",name:"african",displayName:"African",emoji:"üåç",color:"#e17055",isMature:!1,category:"Ethnicity"},{id:"latino",name:"latino",displayName:"Latino",emoji:"üåÆ",color:"#ffeaa7",isMature:!1,category:"Ethnicity"},{id:"native-american",name:"native-american",displayName:"Native American",emoji:"ü™∂",color:"#e84393",isMature:!1,category:"Ethnicity"},{id:"middle-eastern",name:"middle-eastern",displayName:"Middle Eastern",emoji:"üïå",color:"#6c5ce7",isMature:!1,category:"Ethnicity"},{id:"mixed",name:"mixed",displayName:"Mixed",emoji:"üåà",color:"#00b894",isMature:!1,category:"Ethnicity"},{id:"other",name:"other",displayName:"Other",emoji:"üåé",color:"#636e72",isMature:!1,category:"Ethnicity"}]},{id:"profession",name:"profession",displayName:"Profession",description:"Character professions and careers",maxSelections:3,tags:[{id:"teacher",name:"teacher",displayName:"Teacher",emoji:"üë©‚Äçüè´",color:"#0984e3",isMature:!1,category:"Profession"},{id:"doctor",name:"doctor",displayName:"Doctor",emoji:"üë©‚Äç‚öïÔ∏è",color:"#e17055",isMature:!1,category:"Profession"},{id:"scientist",name:"scientist",displayName:"Scientist",emoji:"üë©‚Äçüî¨",color:"#6c5ce7",isMature:!1,category:"Profession"},{id:"artist",name:"artist",displayName:"Artist",emoji:"üé®",color:"#fd79a8",isMature:!1,category:"Profession"},{id:"musician",name:"musician",displayName:"Musician",emoji:"üéµ",color:"#ffeaa7",isMature:!1,category:"Profession"},{id:"writer",name:"writer",displayName:"Writer",emoji:"‚úçÔ∏è",color:"#00b894",isMature:!1,category:"Profession"},{id:"engineer",name:"engineer",displayName:"Engineer",emoji:"‚öôÔ∏è",color:"#636e72",isMature:!1,category:"Profession"},{id:"chef",name:"chef",displayName:"Chef",emoji:"üë®‚Äçüç≥",color:"#e84393",isMature:!1,category:"Profession"},{id:"pilot",name:"pilot",displayName:"Pilot",emoji:"‚úàÔ∏è",color:"#2d3436",isMature:!1,category:"Profession"},{id:"astronaut",name:"astronaut",displayName:"Astronaut",emoji:"üöÄ",color:"#0984e3",isMature:!1,category:"Profession"},{id:"detective",name:"detective",displayName:"Detective",emoji:"üîç",color:"#6c5ce7",isMature:!1,category:"Profession"},{id:"librarian",name:"librarian",displayName:"Librarian",emoji:"üìö",color:"#fd79a8",isMature:!1,category:"Profession"},{id:"gardener",name:"gardener",displayName:"Gardener",emoji:"üå±",color:"#00b894",isMature:!1,category:"Profession"},{id:"photographer",name:"photographer",displayName:"Photographer",emoji:"üì∏",color:"#e17055",isMature:!1,category:"Profession"},{id:"veterinarian",name:"veterinarian",displayName:"Veterinarian",emoji:"üêæ",color:"#ffeaa7",isMature:!1,category:"Profession"},{id:"architect",name:"architect",displayName:"Architect",emoji:"üèóÔ∏è",color:"#636e72",isMature:!1,category:"Profession"},{id:"dancer",name:"dancer",displayName:"Dancer",emoji:"üíÉ",color:"#e84393",isMature:!1,category:"Profession"},{id:"athlete",name:"athlete",displayName:"Athlete",emoji:"üèÉ‚Äç‚ôÄÔ∏è",color:"#2d3436",isMature:!1,category:"Profession"},{id:"magician",name:"magician",displayName:"Magician",emoji:"üé©",color:"#6c5ce7",isMature:!1,category:"Profession"},{id:"explorer",name:"explorer",displayName:"Explorer",emoji:"üó∫Ô∏è",color:"#00b894",isMature:!1,category:"Profession"}]}],ts=Ax.map(t=>({category:t.displayName,tags:t.tags.map(e=>({name:e.name,displayName:e.displayName,color:e.color||"#636e72",emoji:e.emoji||"üè∑Ô∏è",isNSFW:e.isNSFW||!1,category:t.displayName}))}));function kx(){const[t,e]=d.useState([]),[n,r]=d.useState(!0),[s,o]=d.useState(null);d.useEffect(()=>{(async()=>{try{const a=await bt.getTags({limit:0});let u;if(Array.isArray(a))u=a;else if(a&&a.items)u=a.items;else throw new Error("Invalid API response format");const f=u.reduce((p,m)=>{const g=p.find(w=>w.category===m.category);return g?g.tags.push(m):p.push({category:m.category,tags:[m]}),p},[]),h=f.reduce((p,m)=>p+m.tags.length,0);h<50?(console.log(`API returned only ${h} tags, using fallback data with ${ts.reduce((p,m)=>p+m.tags.length,0)} tags`),e(ts)):e(f)}catch(a){console.error("Error fetching tags:",a),e(ts),o(a)}finally{r(!1)}})()},[]);const i=t.flatMap(c=>c.tags).reduce((c,a)=>(c[a.name]=a,c),{});return{tagCategories:t,isLoading:n,error:s,tagMap:i}}function Rx({isOpen:t,setIsOpen:e,onSave:n,initialSelectedTags:r=[],isFirstTimeSetup:s=!1}){const{tagCategories:o,isLoading:i,error:c}=kx(),[a,u]=d.useState([]),[f,h]=d.useState(!1),[p,m]=d.useState(!1),[g,w]=d.useState(!1);if(d.useEffect(()=>{t&&!g?(u([...r]),w(!0)):t||w(!1)},[t,g]),i)return l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:l.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto mb-4"}),l.jsx("h3",{className:"text-lg font-semibold text-orange-200 mb-2",children:"Loading Your Preferences"}),l.jsx("p",{className:"text-zinc-300",children:"Fetching available tags..."})]})})})})]})});if(c)return l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:l.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-red-900/95 to-red-800/95 backdrop-blur-lg border border-red-500/30 text-white shadow-2xl shadow-red-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"text-red-400 mb-4",children:"‚ö†Ô∏è"}),l.jsx("h3",{className:"text-lg font-semibold text-red-200 mb-2",children:"Unable to Load Tags"}),l.jsx("p",{className:"text-red-300 mb-4",children:c.message}),l.jsx("p",{className:"text-red-400 text-sm",children:"Please try refreshing the page or contact support."})]})})})})]})});const v=y=>{console.log("toggleTag called with:",y),console.log("Current selectedTags:",a),u(b=>b.includes(y)?(console.log("Removing tag:",y),b.filter(T=>T!==y)):(console.log("Adding tag:",y,"Current length:",b.length),b.length<8?[...b,y]:b))},x=()=>{s&&(!f||!p||a.length<5)||!s&&a.length<5||(n(a),e(!1))};return!i&&!c&&o.length===0?l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:l.jsx(tt,{className:"w-full max-w-xl transform overflow-hidden rounded-2xl bg-gradient-to-br from-yellow-900/95 to-yellow-800/95 backdrop-blur-lg border border-yellow-500/30 text-white shadow-2xl shadow-yellow-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500",children:l.jsxs("div",{className:"p-8 text-center",children:[l.jsx("div",{className:"text-yellow-400 mb-4",children:"üì¶"}),l.jsx("h3",{className:"text-lg font-semibold text-yellow-200 mb-2",children:"No Tags Available"}),l.jsx("p",{className:"text-yellow-300 mb-4",children:"The tag database appears to be empty."}),l.jsx("p",{className:"text-yellow-400 text-sm",children:"Please contact support to set up your preferences."})]})})})})]})}):l.jsx(et,{appear:!0,show:t,as:d.Fragment,children:l.jsxs(wt,{as:"div",className:"relative z-50",onClose:()=>{},children:[l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-300",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:l.jsx("div",{className:"fixed inset-0 bg-black/70 backdrop-blur-sm"})}),l.jsx("div",{className:"fixed inset-0 overflow-y-auto flex items-center justify-center p-8",children:l.jsx(X,{as:d.Fragment,enter:"ease-out duration-500",enterFrom:"opacity-0 scale-90 translate-y-8",enterTo:"opacity-100 scale-100 translate-y-0",leave:"ease-in duration-300",leaveFrom:"opacity-100 scale-100 translate-y-0",leaveTo:"opacity-0 scale-90 translate-y-8",children:l.jsxs(tt,{className:"w-full max-w-xl max-h-[90vh] transform rounded-2xl bg-gradient-to-br from-zinc-700/95 to-zinc-800/95 backdrop-blur-lg border border-orange-500/30 text-white shadow-2xl shadow-orange-500/20 transition-all animate-in slide-in-from-bottom-4 duration-500 flex flex-col overflow-hidden",children:[l.jsx("div",{className:"relative p-4 pb-3 border-b border-orange-500/20",children:l.jsxs("div",{className:"flex items-center justify-between",children:[l.jsxs("div",{className:"animate-in slide-in-from-left-4 duration-700",children:[l.jsx(En,{className:"text-lg font-semibold bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent animate-in fade-in duration-1000",children:s?"Welcome Aboard":"Update Your Preferences"}),l.jsx("p",{className:"text-zinc-300 text-sm mt-1 animate-in slide-in-from-left-4 duration-700 delay-200",children:s?"Pick between 5-8 things you like. It'll help you find the characters you love to talk with.":"Update your tag preferences to discover new characters and content that match your interests."})]}),l.jsxs(es,{variant:"outline",className:`animate-in slide-in-from-right-4 duration-700 delay-300 ${a.length<5?"text-red-400 border-red-500/30 animate-pulse":a.length>=5&&a.length<=8?"text-green-400 border-green-500/30 animate-bounce":"text-orange-400 border-orange-500/30"}`,children:["(",a.length,"/8) ",a.length<5&&"Need "+(5-a.length)+" more"]})]})}),l.jsx("div",{className:"flex-1 overflow-y-auto",children:l.jsxs("div",{className:"p-4 pt-3",children:[l.jsxs("div",{className:"mb-4 animate-in slide-in-from-bottom-4 duration-700 delay-400",children:[l.jsx("h3",{className:"text-base font-semibold text-orange-200 mb-2",children:"Selected Tags"}),l.jsx("div",{className:"min-h-[40px] p-2 bg-zinc-600/30 rounded-lg border border-orange-500/20 transition-all duration-300",children:a.length===0?l.jsx("p",{className:"text-zinc-500 text-xs animate-pulse",children:"No tags selected yet..."}):l.jsx("div",{className:"flex flex-wrap gap-1",children:a.map((y,b)=>{const T=o.flatMap(_=>_.tags).find(_=>_.name===y);return T?l.jsxs(es,{className:"flex items-center gap-1 px-1.5 py-0.5 text-white border-0 text-xs animate-in slide-in-from-bottom-2 duration-300 hover:scale-105 transition-transform",style:{backgroundColor:T.color,animationDelay:`${b*100}ms`},children:[l.jsx("span",{className:"text-xs",children:T.emoji}),l.jsx("span",{className:"text-xs",children:T.displayName}),l.jsx(fn,{className:"h-2.5 w-2.5 ml-0.5 cursor-pointer hover:bg-black/20 rounded-full transition-all duration-200",onClick:()=>v(y)})]},y):null})})})]}),l.jsx("div",{className:"space-y-4",children:o.map((y,b)=>l.jsxs("div",{className:"animate-in slide-in-from-bottom-4 duration-700",style:{animationDelay:`${600+b*100}ms`},children:[l.jsx("h4",{className:"text-sm font-medium text-orange-200 mb-2",children:y.category}),l.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 gap-2",children:y.tags.map((T,_)=>{const S=a.includes(T.name);return l.jsxs("button",{onClick:R=>{R.stopPropagation(),v(T.name)},disabled:!S&&a.length>=8,className:G("relative flex items-center gap-1 p-1.5 rounded-md border text-left text-xs transition-all duration-300 hover:scale-105 hover:shadow-lg group animate-in slide-in-from-bottom-2",S?"border-orange-500/50 bg-orange-500/20 text-white shadow-orange-500/20 shadow-lg animate-pulse":a.length>=8?"border-zinc-600/30 bg-zinc-700/20 text-zinc-500 cursor-not-allowed":"border-zinc-600/50 bg-zinc-700/30 text-zinc-300 hover:border-orange-500/30 hover:bg-zinc-600/50 hover:text-orange-200 hover:shadow-orange-500/10",!S&&a.length<5&&a.length>0&&"animate-pulse border-green-500/30"),style:{animationDelay:`${800+b*100+_*50}ms`,boxShadow:S?`0 0 10px ${T.color}40`:void 0},children:[l.jsx("span",{className:"text-xs transition-transform duration-200 group-hover:scale-110",children:T.emoji}),l.jsx("span",{className:"flex-1 truncate text-xs font-medium",children:T.displayName}),T.isNSFW&&l.jsx(es,{variant:"outline",className:"text-[8px] px-0.5 py-0 h-2.5 text-red-400 border-red-500/30",children:"NSFW"}),S&&l.jsx(Rr,{className:"h-2.5 w-2.5 text-orange-400 absolute -top-0.5 -right-0.5 bg-zinc-900 rounded-full"})]},T.name)})}),y.category!=="Sexuality"&&l.jsx(pu,{className:"mt-4 bg-zinc-600/50"})]},y.category))})]})}),l.jsxs("div",{className:"p-3 pt-2 border-t border-orange-500/20 space-y-2 animate-in slide-in-from-bottom-4 duration-700 delay-1000",children:[s&&l.jsxs("div",{className:"space-y-1",children:[l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group transition-all duration-200 hover:bg-zinc-700/20 p-1 rounded-lg",children:[l.jsx("input",{type:"checkbox",checked:f,onChange:y=>h(y.target.checked),className:"rounded border-zinc-600 text-orange-500 focus:ring-orange-500 focus:ring-offset-0 transition-all duration-200"}),l.jsx("span",{className:`text-xs transition-all duration-200 ${f?"text-green-300":"text-zinc-300"} group-hover:text-orange-300`,children:"I confirm that I am 18 years old or older"}),f&&l.jsx(Rr,{className:"h-3 w-3 text-green-400"})]}),l.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer group transition-all duration-200 hover:bg-zinc-700/20 p-1 rounded-lg",children:[l.jsx("input",{type:"checkbox",checked:p,onChange:y=>m(y.target.checked),className:"rounded border-zinc-600 text-orange-500 focus:ring-orange-500 focus:ring-offset-0 transition-all duration-200"}),l.jsxs("span",{className:`text-xs transition-all duration-200 ${p?"text-green-300":"text-zinc-300"} group-hover:text-orange-300`,children:["I have read and agree to the"," ",l.jsx("a",{href:"/legal/terms-of-service",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 underline transition-colors duration-200",children:"Terms of Service"})," ","and"," ",l.jsx("a",{href:"/legal/privacy-policy",target:"_blank",rel:"noopener noreferrer",className:"text-orange-400 hover:text-orange-300 underline transition-colors duration-200",children:"Privacy Policy"})]}),p&&l.jsx(Rr,{className:"h-3 w-3 text-green-400"})]})]}),l.jsx("div",{className:"flex justify-center pt-1",children:l.jsx(se,{onClick:x,disabled:s&&(!f||!p)||a.length<5,className:`px-8 py-2 text-sm bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700 text-white font-semibold transition-all duration-300 transform hover:scale-105 hover:shadow-lg hover:shadow-orange-500/25 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:scale-100 ${s&&(!f||!p)||a.length<5?"animate-pulse":""}`,children:a.length<5?`${s?"Complete Setup":"Update Preferences"} (Need ${5-a.length} more tags)`:s?"Complete Setup ‚ú®":"Update Preferences ‚ú®"})})]})]})})})]})})}function Nx(){const{user:t,isAuthenticated:e,refreshUser:n}=Rt(),[r,s]=d.useState(!1),[o,i]=d.useState(!1),[c,a]=d.useState(!1);d.useEffect(()=>{if(e&&t&&!c){if(!o){n().then(()=>{i(!0)});return}const h=t.preferences?.completedOnboarding??!1;!h&&!r?s(!0):h&&r&&s(!1)}},[e,t,n,o,c,r]);const u=async h=>{a(!0);try{await bt.updateUserPreferences({selectedTags:h,completedOnboarding:!0,nsfwEnabled:h.some(p=>["nsfw","hentai","breeding","femdom","bdsm","bondage","cnc","ntr","chastity","hypno","voyeur","cheating","cuckold","feet","worship","futa","bbw","succubus","pregnant","shortstack"].includes(p))}),s(!1),await n()}catch(p){console.error("OnboardingCheck: Failed to save preferences:",p)}finally{a(!1)}},f=h=>{!h&&t&&!t.preferences?.completedOnboarding||s(h)};return l.jsx(Rx,{isOpen:r,setIsOpen:f,onSave:u,isFirstTimeSetup:!0})}const mu=d.memo(()=>{const[t,e]=d.useState(!1),[n,r]=d.useState(!1),s=()=>{r(!1),e(!0)},o=()=>{e(!1),r(!0)};return l.jsx(Ms,{children:l.jsx(Ru,{client:oa,children:l.jsx(o0,{children:l.jsxs(mb,{onSignIn:s,onSignUp:o,children:[l.jsxs(Yh,{children:[l.jsx(_x,{children:l.jsx(dx,{})}),l.jsx(lf,{})]}),l.jsx(lu,{isOpen:t,setIsOpen:e,openSignUp:o}),l.jsx(uu,{isOpen:n,setIsOpen:r,openSignIn:s}),l.jsx(Nx,{})]})})})})});mu.displayName="App";const jx=()=>{if(typeof window<"u"&&"performance"in window){const t=performance.getEntriesByType("navigation")[0];return{ttfb:t.responseStart-t.fetchStart,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,loadComplete:t.loadEventEnd-t.loadEventStart,totalLoadTime:t.loadEventEnd-t.fetchStart,dnsLookup:t.domainLookupEnd-t.domainLookupStart,tcpConnection:t.connectEnd-t.connectStart}}return null},Ox=()=>{if(!(typeof window>"u")&&"PerformanceObserver"in window)try{new PerformanceObserver(n=>{const r=n.getEntries(),s=r[r.length-1]}).observe({entryTypes:["largest-contentful-paint"]}),new PerformanceObserver(n=>{n.getEntries().forEach(s=>{const o=s})}).observe({entryTypes:["first-input"]})}catch(t){console.warn("Performance Observer not supported:",t)}};Ox();window.addEventListener("error",t=>{if(t.error&&t.error.message){const e=t.error.message.toLowerCase();if(e.includes("insertbefore")||e.includes("removechild")||e.includes("not a child of this node"))return console.warn("üõ°Ô∏è Suppressed React DOM manipulation error:",t.error.message),t.preventDefault(),!1}});window.addEventListener("unhandledrejection",t=>{console.error(" Unhandled promise rejection:",t.reason)});window.addEventListener("load",()=>{setTimeout(()=>{jx()},0)});ss.createRoot(document.getElementById("root")).render(l.jsx(A.StrictMode,{children:l.jsx(Ms,{children:l.jsx(ed,{children:l.jsx(wx,{children:l.jsx(mu,{})})})})}));export{Ah as A,se as B,kh as C,mx as E,X as F,Hx as H,nt as I,bb as L,Wx as R,pu as S,Md as V,k as _,es as a,E as b,G as c,Fs as d,bt as e,ne as f,sf as g,kx as h,wt as i,En as j,fb as k,bx as l,su as m,Zx as n,Qx as o,Th as p,tt as q,xt as r,r0 as s,Ya as t,Rt as u,Rh as v,Vx as w,et as z};
