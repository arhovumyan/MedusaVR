import{j as e}from"./ui-vendor-wCvZxCWV.js";import{b as x}from"./query-vendor-BCFDQDjj.js";import{S as t}from"./skeleton-B4aaGUBY.js";import{u as h,B as i,b as g}from"./index-dgNfrsMx.js";import{L as l}from"./routing-DoJeAdmJ.js";import{M as u,s as f}from"./icons-BCb4Ufys.js";import"./react-vendor-CgzYKCvO.js";import"./utils--BulIq_u.js";function z(){const{user:c}=h(),{data:n,isLoading:d}=x({queryKey:["conversations"],queryFn:async()=>await(await g("GET","/api/conversations",void 0,{},"medium")).json(),enabled:!!c}),m=s=>{const a=Math.floor((new Date().getTime()-new Date(s).getTime())/(1e3*60*60));if(a<1)return"Just now";if(a<24)return`${a} hours ago`;{const o=Math.floor(a/24);return`${o} day${o>1?"s":""} ago`}};return d?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(t,{className:"h-8 w-64 mb-2"}),e.jsx(t,{className:"h-4 w-96"})]}),e.jsx("div",{className:"space-y-4",children:Array.from({length:4}).map((s,r)=>e.jsx(t,{className:"h-20 w-full rounded-lg"},r))})]}):!n||n.length===0?e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Recent Chats"}),e.jsx("p",{className:"text-zinc-400",children:"Continue your conversations"})]}),e.jsx("div",{className:"max-w-md mx-auto bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 backdrop-blur-lg border border-orange-500/20 rounded-2xl shadow-2xl shadow-orange-500/10",children:e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u,{className:"w-16 h-16 text-orange-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold mb-2 text-zinc-200",children:"No recent chats"}),e.jsx("p",{className:"text-zinc-400 mb-6",children:"Start a conversation with your favorite characters"}),e.jsx(l,{href:"/ForYouPage",children:e.jsx(i,{className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700",children:"Discover Characters"})})]})})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2 bg-gradient-to-r from-orange-400 to-orange-600 bg-clip-text text-transparent",children:"Recent Chats"}),e.jsx("p",{className:"text-zinc-400",children:"Continue your conversations"})]}),e.jsx("div",{className:"space-y-4",children:n.map(s=>e.jsx("div",{className:"bg-gradient-to-br from-zinc-800/50 to-zinc-900/50 backdrop-blur-lg border border-orange-500/20 rounded-xl shadow-lg shadow-orange-500/10 hover:shadow-orange-500/20 transition-all cursor-pointer hover:border-orange-500/40",children:e.jsx("div",{className:"p-4",children:e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("img",{src:s.avatarUrl||"/medusaSnake.png",alt:s.name||"Character",className:"w-12 h-12 rounded-full object-cover ring-2 ring-orange-500/30",onError:r=>{r.currentTarget.src="/medusaSnake.png"}}),s.unreadCount>0&&e.jsx("div",{className:"absolute -top-1 -right-1 bg-orange-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center font-medium",children:s.unreadCount})]}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"font-semibold text-lg text-zinc-200",children:s.name}),e.jsxs("div",{className:"flex items-center text-sm text-zinc-400",children:[e.jsx(f,{className:"w-4 h-4 mr-1"}),m(s.lastTime)]})]}),e.jsx("p",{className:"text-zinc-400 text-sm mb-2 line-clamp-1",children:s.snippet||"Start a conversation..."}),e.jsx("div",{className:"flex flex-wrap gap-1"})]}),e.jsxs("div",{className:"flex flex-col items-end space-y-2",children:[s.unreadCount>0&&e.jsx("div",{className:"w-3 h-3 bg-orange-500 rounded-full"}),e.jsx(l,{href:`/chat/${s.characterId}`,children:e.jsx(i,{size:"sm",className:"bg-gradient-to-r from-orange-500 to-orange-600 hover:from-orange-600 hover:to-orange-700",children:"Continue Chat"})})]})]})})},s.id))})]})}export{z as default};
